var Bd=Object.defineProperty;var Nd=(t,e,r)=>e in t?Bd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var nr=(t,e,r)=>(Nd(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ts(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sh={exports:{}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var r=t.exports.BlobBuilder;typeof window<"u"&&(r=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function i(){this._pieces=[],this._parts=[]}i.prototype.append=function(o){typeof o=="number"?this._pieces.push(o):(this.flush(),this._parts.push(o))},i.prototype.flush=function(){if(this._pieces.length>0){var o=new Uint8Array(this._pieces);e.useArrayBufferView||(o=o.buffer),this._parts.push(o),this._pieces=[]}},i.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var o=new r,l=0,p=this._parts.length;l<p;l++)o.append(this._parts[l]);return o.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=i})(sh);var oh=sh.exports,$d=oh.BufferBuilder,Lc=oh.binaryFeatures,Fd={unpack:function(t){var e=new rt(t);return e.unpack()},pack:function(t){var e=new it;e.pack(t);var r=e.getBuffer();return r}},jd=Fd;function rt(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}rt.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};rt.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};rt.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};rt.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};rt.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};rt.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256};rt.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536};rt.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};rt.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};rt.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};rt.prototype.unpack_string=function(t){for(var e=this.read(t),r=0,i="",o,l;r<t;)o=e[r],o<128?(i+=String.fromCharCode(o),r++):(o^192)<32?(l=(o^192)<<6|e[r+1]&63,i+=String.fromCharCode(l),r+=2):(l=(o&15)<<12|(e[r+1]&63)<<6|e[r+2]&63,i+=String.fromCharCode(l),r+=3);return this.index+=t,i};rt.prototype.unpack_array=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=this.unpack();return e};rt.prototype.unpack_map=function(t){for(var e={},r=0;r<t;r++){var i=this.unpack(),o=this.unpack();e[i]=o}return e};rt.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(e===0?1:-1)*i*Math.pow(2,r-23)};rt.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,o=t&1048575|1048576,l=o*Math.pow(2,i-20)+e*Math.pow(2,i-52);return(r===0?1:-1)*l};rt.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function it(){this.bufferBuilder=new $d}it.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};it.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var r=t.constructor;if(r==Array)this.pack_array(t);else if(r==Blob||r==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(r==ArrayBuffer)Lc.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)Lc.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(t);else if(r==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+r.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};it.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};it.prototype.pack_string=function(t){var e=Wd(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};it.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var r=0;r<e;r++)this.pack(t[r])};it.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};it.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var r=Math.floor(Math.log(t)/Math.LN2),i=t/Math.pow(2,r)-1,o=Math.floor(i*Math.pow(2,52)),l=Math.pow(2,32),p=e<<31|r+1023<<20|o/l&1048575,n=o%l;this.bufferBuilder.append(203),this.pack_int32(p),this.pack_int32(n)};it.prototype.pack_object=function(t){var e=Object.keys(t),r=e.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this.bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");for(var i in t)t.hasOwnProperty(i)&&(this.pack(i),this.pack(t[i]))};it.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};it.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};it.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};it.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),r=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};it.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};it.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};it.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};it.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),r=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};function Ud(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function Wd(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,Ud).length}const Pc=Ts(jd);let ah=!0,ch=!0;function sn(t,e,r){const i=t.match(e);return i&&i.length>=r&&parseInt(i[r],10)}function Bi(t,e,r){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,o=i.addEventListener;i.addEventListener=function(p,n){if(p!==e)return o.apply(this,arguments);const s=c=>{const f=r(c);f&&(n.handleEvent?n.handleEvent(f):n(f))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(n,s),o.apply(this,[p,s])};const l=i.removeEventListener;i.removeEventListener=function(p,n){if(p!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(n))return l.apply(this,arguments);const s=this._eventMap[e].get(n);return this._eventMap[e].delete(n),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[p,s])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(p){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),p&&this.addEventListener(e,this["_on"+e]=p)},enumerable:!0,configurable:!0})}function zd(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ah=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Vd(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ch=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function xa(){if(typeof window=="object"){if(ah)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function As(t,e){ch&&console.warn(t+" is deprecated, please use "+e+" instead.")}function qd(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.mozGetUserMedia)e.browser="firefox",e.version=sn(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=sn(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=sn(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=sn(r.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Oc(t){return Object.prototype.toString.call(t)==="[object Object]"}function lh(t){return Oc(t)?Object.keys(t).reduce(function(e,r){const i=Oc(t[r]),o=i?lh(t[r]):t[r],l=i&&!Object.keys(o).length;return o===void 0||l?e:Object.assign(e,{[r]:o})},{}):t}function jo(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?jo(t,t.get(e[i]),r):i.endsWith("Ids")&&e[i].forEach(o=>{jo(t,t.get(o),r)})}))}function Mc(t,e,r){const i=r?"outbound-rtp":"inbound-rtp",o=new Map;if(e===null)return o;const l=[];return t.forEach(p=>{p.type==="track"&&p.trackIdentifier===e.id&&l.push(p)}),l.forEach(p=>{t.forEach(n=>{n.type===i&&n.trackId===p.id&&jo(t,n,o)})}),o}const Ic=xa;function hh(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const i=function(n){if(typeof n!="object"||n.mandatory||n.optional)return n;const s={};return Object.keys(n).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const f=typeof n[c]=="object"?n[c]:{ideal:n[c]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const m=function(y,C){return y?y+C.charAt(0).toUpperCase()+C.slice(1):C==="deviceId"?"sourceId":C};if(f.ideal!==void 0){s.optional=s.optional||[];let y={};typeof f.ideal=="number"?(y[m("min",c)]=f.ideal,s.optional.push(y),y={},y[m("max",c)]=f.ideal,s.optional.push(y)):(y[m("",c)]=f.ideal,s.optional.push(y))}f.exact!==void 0&&typeof f.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[m("",c)]=f.exact):["min","max"].forEach(y=>{f[y]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[m(y,c)]=f[y])})}),n.advanced&&(s.optional=(s.optional||[]).concat(n.advanced)),s},o=function(n,s){if(e.version>=61)return s(n);if(n=JSON.parse(JSON.stringify(n)),n&&typeof n.audio=="object"){const c=function(f,m,y){m in f&&!(y in f)&&(f[y]=f[m],delete f[m])};n=JSON.parse(JSON.stringify(n)),c(n.audio,"autoGainControl","googAutoGainControl"),c(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=i(n.audio)}if(n&&typeof n.video=="object"){let c=n.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const f=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete n.video.facingMode;let m;if(c.exact==="environment"||c.ideal==="environment"?m=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(m=["front"]),m)return r.mediaDevices.enumerateDevices().then(y=>{y=y.filter(b=>b.kind==="videoinput");let C=y.find(b=>m.some(S=>b.label.toLowerCase().includes(S)));return!C&&y.length&&m.includes("back")&&(C=y[y.length-1]),C&&(n.video.deviceId=c.exact?{exact:C.deviceId}:{ideal:C.deviceId}),n.video=i(n.video),Ic("chrome: "+JSON.stringify(n)),s(n)})}n.video=i(n.video)}return Ic("chrome: "+JSON.stringify(n)),s(n)},l=function(n){return e.version>=64?n:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[n.name]||n.name,message:n.message,constraint:n.constraint||n.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},p=function(n,s,c){o(n,f=>{r.webkitGetUserMedia(f,s,m=>{c&&c(l(m))})})};if(r.getUserMedia=p.bind(r),r.mediaDevices.getUserMedia){const n=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return o(s,c=>n(c).then(f=>{if(c.audio&&!f.getAudioTracks().length||c.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(l(f))))}}}function Kd(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(i){return e(i).then(o=>{const l=i.video&&i.video.width,p=i.video&&i.video.height,n=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o,maxFrameRate:n||3}},l&&(i.video.mandatory.maxWidth=l),p&&(i.video.mandatory.maxHeight=p),t.navigator.mediaDevices.getUserMedia(i)})}}}function uh(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function fh(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",o=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(n=>n.track&&n.track.id===o.track.id):l={track:o.track};const p=new Event("track");p.track=o.track,p.receiver=l,p.transceiver={receiver:l},p.streams=[i.stream],this.dispatchEvent(p)}),i.stream.getTracks().forEach(o=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(n=>n.track&&n.track.id===o.id):l={track:o};const p=new Event("track");p.track=o,p.receiver=l,p.transceiver={receiver:l},p.streams=[i.stream],this.dispatchEvent(p)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Bi(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function dh(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(o,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=o.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:o}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(n,s){let c=o.apply(this,arguments);return c||(c=e(this,n),this._senders.push(c)),c};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(n){l.apply(this,arguments);const s=this._senders.indexOf(n);s!==-1&&this._senders.splice(s,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],r.apply(this,[l]),l.getTracks().forEach(p=>{this._senders.push(e(this,p))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(p=>{const n=this._senders.find(s=>s.track===p);n&&this._senders.splice(this._senders.indexOf(n),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ph(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,o,l]=arguments;if(arguments.length>0&&typeof i=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof i!="function"))return e.apply(this,[]);const p=function(s){const c={};return s.result().forEach(m=>{const y={id:m.id,timestamp:m.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[m.type]||m.type};m.names().forEach(C=>{y[C]=m.stat(C)}),c[y.id]=y}),c},n=function(s){return new Map(Object.keys(s).map(c=>[c,s[c]]))};if(arguments.length>=2){const s=function(c){o(n(p(c)))};return e.apply(this,[s,i])}return new Promise((s,c)=>{e.apply(this,[function(f){s(n(p(f)))},c])}).then(o,l)}}function _h(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=r.apply(this,[]);return l.forEach(p=>p._pc=this),l});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=i.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(p=>Mc(p,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(l=>l._pc=this),o}),Bi(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>Mc(l,o.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let o,l,p;return this.getSenders().forEach(n=>{n.track===i&&(o?p=!0:o=n)}),this.getReceivers().forEach(n=>(n.track===i&&(l?p=!0:l=n),n.track===i)),p||o&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function gh(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(p=>this._shimmedLocalStreams[p][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(p,n){if(!n)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=e.apply(this,arguments);return this._shimmedLocalStreams[n.id]?this._shimmedLocalStreams[n.id].indexOf(s)===-1&&this._shimmedLocalStreams[n.id].push(s):this._shimmedLocalStreams[n.id]=[n,s],s};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(p){this._shimmedLocalStreams=this._shimmedLocalStreams||{},p.getTracks().forEach(c=>{if(this.getSenders().find(m=>m.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const n=this.getSenders();r.apply(this,arguments);const s=this.getSenders().filter(c=>n.indexOf(c)===-1);this._shimmedLocalStreams[p.id]=[p].concat(s)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(p){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[p.id],i.apply(this,arguments)};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(p){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},p&&Object.keys(this._shimmedLocalStreams).forEach(n=>{const s=this._shimmedLocalStreams[n].indexOf(p);s!==-1&&this._shimmedLocalStreams[n].splice(s,1),this._shimmedLocalStreams[n].length===1&&delete this._shimmedLocalStreams[n]}),o.apply(this,arguments)}}function mh(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return gh(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const f=r.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(m=>this._reverseStreams[m.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(m=>{if(this.getSenders().find(C=>C.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const m=new t.MediaStream(f.getTracks());this._streams[f.id]=m,this._reverseStreams[m.id]=f,f=m}i.apply(this,[f])};const o=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},t.RTCPeerConnection.prototype.addTrack=function(f,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(S=>S===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const b=this._streams[m.id];if(b)b.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new t.MediaStream([f]);this._streams[m.id]=S,this._reverseStreams[S.id]=m,this.addStream(S)}return this.getSenders().find(S=>S.track===f)};function l(c,f){let m=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(y=>{const C=c._reverseStreams[y],b=c._streams[C.id];m=m.replace(new RegExp(b.id,"g"),C.id)}),new RTCSessionDescription({type:f.type,sdp:m})}function p(c,f){let m=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(y=>{const C=c._reverseStreams[y],b=c._streams[C.id];m=m.replace(new RegExp(C.id,"g"),b.id)}),new RTCSessionDescription({type:f.type,sdp:m})}["createOffer","createAnswer"].forEach(function(c){const f=t.RTCPeerConnection.prototype[c],m={[c](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[b=>{const S=l(this,b);y[0].apply(null,[S])},b=>{y[1]&&y[1].apply(null,b)},arguments[2]]):f.apply(this,arguments).then(b=>l(this,b))}};t.RTCPeerConnection.prototype[c]=m[c]});const n=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?n.apply(this,arguments):(arguments[0]=p(this,arguments[0]),n.apply(this,arguments))};const s=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=s.get.apply(this);return c.type===""?c:l(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(S=>f.track===S)&&(y=this._streams[C])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Uo(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const i=t.RTCPeerConnection.prototype[r],o={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=o[r]})}function vh(t,e){Bi(t,"negotiationneeded",r=>{const i=r.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return r})}const Bc=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:vh,shimAddTrackRemoveTrack:mh,shimAddTrackRemoveTrackWithNative:gh,shimGetDisplayMedia:Kd,shimGetSendersWithDtmf:dh,shimGetStats:ph,shimGetUserMedia:hh,shimMediaStream:uh,shimOnTrack:fh,shimPeerConnection:Uo,shimSenderReceiverGetStats:_h},Symbol.toStringTag,{value:"Module"}));function Gd(t,e){let r=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(i=>{if(i&&(i.urls||i.url)){let o=i.urls||i.url;i.url&&!i.urls&&As("RTCIceServer.url","RTCIceServer.urls");const l=typeof o=="string";return l&&(o=[o]),o=o.filter(p=>{if(p.indexOf("stun:")===0)return!1;const n=p.startsWith("turn")&&!p.startsWith("turn:[")&&p.includes("transport=udp");return n&&!r?(r=!0,!0):n&&!r}),delete i.url,i.urls=l?o[0]:o,!!o.length}})}var yh={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(function(i){return i.trim()})},e.splitSections=function(r){var i=r.split(`
m=`);return i.map(function(o,l){return(l>0?"m="+o:o).trim()+`\r
`})},e.getDescription=function(r){var i=e.splitSections(r);return i&&i[0]},e.getMediaSections=function(r){var i=e.splitSections(r);return i.shift(),i},e.matchPrefix=function(r,i){return e.splitLines(r).filter(function(o){return o.indexOf(i)===0})},e.parseCandidate=function(r){var i;r.indexOf("a=candidate:")===0?i=r.substring(12).split(" "):i=r.substring(10).split(" ");for(var o={foundation:i[0],component:parseInt(i[1],10),protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]},l=8;l<i.length;l+=2)switch(i[l]){case"raddr":o.relatedAddress=i[l+1];break;case"rport":o.relatedPort=parseInt(i[l+1],10);break;case"tcptype":o.tcpType=i[l+1];break;case"ufrag":o.ufrag=i[l+1],o.usernameFragment=i[l+1];break;default:o[i[l]]=i[l+1];break}return o},e.writeCandidate=function(r){var i=[];i.push(r.foundation),i.push(r.component),i.push(r.protocol.toUpperCase()),i.push(r.priority),i.push(r.address||r.ip),i.push(r.port);var o=r.type;return i.push("typ"),i.push(o),o!=="host"&&r.relatedAddress&&r.relatedPort&&(i.push("raddr"),i.push(r.relatedAddress),i.push("rport"),i.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(i.push("ufrag"),i.push(r.usernameFragment||r.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(r){return r.substr(14).split(" ")},e.parseRtpMap=function(r){var i=r.substr(9).split(" "),o={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),o.name=i[0],o.clockRate=parseInt(i[1],10),o.channels=i.length===3?parseInt(i[2],10):1,o.numChannels=o.channels,o},e.writeRtpMap=function(r){var i=r.payloadType;r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType);var o=r.channels||r.numChannels||1;return"a=rtpmap:"+i+" "+r.name+"/"+r.clockRate+(o!==1?"/"+o:"")+`\r
`},e.parseExtmap=function(r){var i=r.substr(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1]}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+`\r
`},e.parseFmtp=function(r){for(var i={},o,l=r.substr(r.indexOf(" ")+1).split(";"),p=0;p<l.length;p++)o=l[p].trim().split("="),i[o[0].trim()]=o[1];return i},e.writeFmtp=function(r){var i="",o=r.payloadType;if(r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var l=[];Object.keys(r.parameters).forEach(function(p){r.parameters[p]?l.push(p+"="+r.parameters[p]):l.push(p)}),i+="a=fmtp:"+o+" "+l.join(";")+`\r
`}return i},e.parseRtcpFb=function(r){var i=r.substr(r.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(r){var i="",o=r.payloadType;return r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(l){i+="a=rtcp-fb:"+o+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(r){var i=r.indexOf(" "),o={ssrc:parseInt(r.substr(7,i-7),10)},l=r.indexOf(":",i);return l>-1?(o.attribute=r.substr(i+1,l-i-1),o.value=r.substr(l+1)):o.attribute=r.substr(i+1),o},e.parseSsrcGroup=function(r){var i=r.substr(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(function(o){return parseInt(o,10)})}},e.getMid=function(r){var i=e.matchPrefix(r,"a=mid:")[0];if(i)return i.substr(6)},e.parseFingerprint=function(r){var i=r.substr(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1]}},e.getDtlsParameters=function(r,i){var o=e.matchPrefix(r+i,"a=fingerprint:");return{role:"auto",fingerprints:o.map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,i){var o="a=setup:"+i+`\r
`;return r.fingerprints.forEach(function(l){o+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),o},e.parseCryptoLine=function(r){var i=r.substr(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;var i=r.substr(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,i){var o=e.matchPrefix(r+i,"a=crypto:");return o.map(e.parseCryptoLine)},e.getIceParameters=function(r,i){var o=e.matchPrefix(r+i,"a=ice-ufrag:")[0],l=e.matchPrefix(r+i,"a=ice-pwd:")[0];return o&&l?{usernameFragment:o.substr(12),password:l.substr(10)}:null},e.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`},e.parseRtpParameters=function(r){for(var i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(r),l=o[0].split(" "),p=3;p<l.length;p++){var n=l[p],s=e.matchPrefix(r,"a=rtpmap:"+n+" ")[0];if(s){var c=e.parseRtpMap(s),f=e.matchPrefix(r,"a=fmtp:"+n+" ");switch(c.parameters=f.length?e.parseFmtp(f[0]):{},c.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+n+" ").map(e.parseRtcpFb),i.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(c.name.toUpperCase());break}}}return e.matchPrefix(r,"a=extmap:").forEach(function(m){i.headerExtensions.push(e.parseExtmap(m))}),i},e.writeRtpDescription=function(r,i){var o="";o+="m="+r+" ",o+=i.codecs.length>0?"9":"0",o+=" UDP/TLS/RTP/SAVPF ",o+=i.codecs.map(function(p){return p.preferredPayloadType!==void 0?p.preferredPayloadType:p.payloadType}).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(function(p){o+=e.writeRtpMap(p),o+=e.writeFmtp(p),o+=e.writeRtcpFb(p)});var l=0;return i.codecs.forEach(function(p){p.maxptime>l&&(l=p.maxptime)}),l>0&&(o+="a=maxptime:"+l+`\r
`),o+=`a=rtcp-mux\r
`,i.headerExtensions&&i.headerExtensions.forEach(function(p){o+=e.writeExtmap(p)}),o},e.parseRtpEncodingParameters=function(r){var i=[],o=e.parseRtpParameters(r),l=o.fecMechanisms.indexOf("RED")!==-1,p=o.fecMechanisms.indexOf("ULPFEC")!==-1,n=e.matchPrefix(r,"a=ssrc:").map(function(y){return e.parseSsrcMedia(y)}).filter(function(y){return y.attribute==="cname"}),s=n.length>0&&n[0].ssrc,c,f=e.matchPrefix(r,"a=ssrc-group:FID").map(function(y){var C=y.substr(17).split(" ");return C.map(function(b){return parseInt(b,10)})});f.length>0&&f[0].length>1&&f[0][0]===s&&(c=f[0][1]),o.codecs.forEach(function(y){if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){var C={ssrc:s,codecPayloadType:parseInt(y.parameters.apt,10)};s&&c&&(C.rtx={ssrc:c}),i.push(C),l&&(C=JSON.parse(JSON.stringify(C)),C.fec={ssrc:s,mechanism:p?"red+ulpfec":"red"},i.push(C))}}),i.length===0&&s&&i.push({ssrc:s});var m=e.matchPrefix(r,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substr(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substr(5),10)*1e3*.95-50*40*8:m=void 0,i.forEach(function(y){y.maxBitrate=m})),i},e.parseRtcpParameters=function(r){var i={},o=e.matchPrefix(r,"a=ssrc:").map(function(n){return e.parseSsrcMedia(n)}).filter(function(n){return n.attribute==="cname"})[0];o&&(i.cname=o.value,i.ssrc=o.ssrc);var l=e.matchPrefix(r,"a=rtcp-rsize");i.reducedSize=l.length>0,i.compound=l.length===0;var p=e.matchPrefix(r,"a=rtcp-mux");return i.mux=p.length>0,i},e.parseMsid=function(r){var i,o=e.matchPrefix(r,"a=msid:");if(o.length===1)return i=o[0].substr(7).split(" "),{stream:i[0],track:i[1]};var l=e.matchPrefix(r,"a=ssrc:").map(function(p){return e.parseSsrcMedia(p)}).filter(function(p){return p.attribute==="msid"});if(l.length>0)return i=l[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(r){var i=e.parseMLine(r),o=e.matchPrefix(r,"a=max-message-size:"),l;o.length>0&&(l=parseInt(o[0].substr(19),10)),isNaN(l)&&(l=65536);var p=e.matchPrefix(r,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:i.fmt,maxMessageSize:l};var n=e.matchPrefix(r,"a=sctpmap:");if(n.length>0){var s=e.matchPrefix(r,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:l}}},e.writeSctpDescription=function(r,i){var o=[];return r.protocol!=="DTLS/SCTP"?o=["m="+r.kind+" 9 "+r.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:o=["m="+r.kind+" 9 "+r.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&o.push("a=max-message-size:"+i.maxMessageSize+`\r
`),o.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(r,i,o){var l,p=i!==void 0?i:2;r?l=r:l=e.generateSessionId();var n=o||"thisisadapterortc";return`v=0\r
o=`+n+" "+l+" "+p+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(r,i,o,l){var p=e.writeRtpDescription(r.kind,i);if(p+=e.writeIceParameters(r.iceGatherer.getLocalParameters()),p+=e.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),o==="offer"?"actpass":"active"),p+="a=mid:"+r.mid+`\r
`,r.direction?p+="a="+r.direction+`\r
`:r.rtpSender&&r.rtpReceiver?p+=`a=sendrecv\r
`:r.rtpSender?p+=`a=sendonly\r
`:r.rtpReceiver?p+=`a=recvonly\r
`:p+=`a=inactive\r
`,r.rtpSender){var n="msid:"+l.id+" "+r.rtpSender.track.id+`\r
`;p+="a="+n,p+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+n,r.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+n,p+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return p+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,r.rtpSender&&r.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),p},e.getDirection=function(r,i){for(var o=e.splitLines(r),l=0;l<o.length;l++)switch(o[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[l].substr(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(r){var i=e.splitLines(r),o=i[0].split(" ");return o[0].substr(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){var i=e.splitLines(r),o=i[0].substr(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},e.parseOLine=function(r){var i=e.matchPrefix(r,"o=")[0],o=i.substr(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;for(var i=e.splitLines(r),o=0;o<i.length;o++)if(i[o].length<2||i[o].charAt(1)!=="=")return!1;return!0},t.exports=e})(yh);var Sh=yh.exports;const ts=Ts(Sh);var Ae=Sh;function Yd(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function Nc(t,e,r,i,o){var l=Ae.writeRtpDescription(t.kind,e);if(l+=Ae.writeIceParameters(t.iceGatherer.getLocalParameters()),l+=Ae.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),r==="offer"?"actpass":o||"active"),l+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?l+=`a=sendrecv\r
`:t.rtpSender?l+=`a=sendonly\r
`:t.rtpReceiver?l+=`a=recvonly\r
`:l+=`a=inactive\r
`,t.rtpSender){var p=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=p;var n="msid:"+(i?i.id:"-")+" "+p+`\r
`;l+="a="+n,l+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+n,t.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+n,l+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return l+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+Ae.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+Ae.localCName+`\r
`),l}function Jd(t,e){var r=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(i){if(i&&(i.urls||i.url)){var o=i.urls||i.url;i.url&&!i.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var l=typeof o=="string";return l&&(o=[o]),o=o.filter(function(p){var n=p.indexOf("turn:")===0&&p.indexOf("transport=udp")!==-1&&p.indexOf("turn:[")===-1&&!r;return n?(r=!0,!0):p.indexOf("stun:")===0&&e>=14393&&p.indexOf("?transport=udp")===-1}),delete i.url,i.urls=l?o[0]:o,!!o.length}})}function Fn(t,e){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(l,p){l=parseInt(l,10);for(var n=0;n<p.length;n++)if(p[n].payloadType===l||p[n].preferredPayloadType===l)return p[n]},o=function(l,p,n,s){var c=i(l.parameters.apt,n),f=i(p.parameters.apt,s);return c&&f&&c.name.toLowerCase()===f.name.toLowerCase()};return t.codecs.forEach(function(l){for(var p=0;p<e.codecs.length;p++){var n=e.codecs[p];if(l.name.toLowerCase()===n.name.toLowerCase()&&l.clockRate===n.clockRate){if(l.name.toLowerCase()==="rtx"&&l.parameters&&n.parameters.apt&&!o(l,n,t.codecs,e.codecs))continue;n=JSON.parse(JSON.stringify(n)),n.numChannels=Math.min(l.numChannels,n.numChannels),r.codecs.push(n),n.rtcpFeedback=n.rtcpFeedback.filter(function(s){for(var c=0;c<l.rtcpFeedback.length;c++)if(l.rtcpFeedback[c].type===s.type&&l.rtcpFeedback[c].parameter===s.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(l){for(var p=0;p<e.headerExtensions.length;p++){var n=e.headerExtensions[p];if(l.uri===n.uri){r.headerExtensions.push(n);break}}}),r}function Hc(t,e,r){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(r)!==-1}function ao(t,e){var r=t.getRemoteCandidates().find(function(i){return e.foundation===i.foundation&&e.ip===i.ip&&e.port===i.port&&e.priority===i.priority&&e.protocol===i.protocol&&e.type===i.type});return r||t.addRemoteCandidate(e),!r}function at(t,e){var r=new Error(e);return r.name=t,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],r}var Xd=function(t,e){function r(s,c){c.addTrack(s),c.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:s}))}function i(s,c){c.removeTrack(s),c.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:s}))}function o(s,c,f,m){var y=new Event("track");y.track=c,y.receiver=f,y.transceiver={receiver:f},y.streams=m,t.setTimeout(function(){s._dispatchEvent("track",y)})}var l=function(s){var c=this,f=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(y){c[y]=f[y].bind(f)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw at("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all";break}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced";break}if(s.iceServers=Jd(s.iceServers||[],e),this._iceGatherers=[],s.iceCandidatePoolSize)for(var m=s.iceCandidatePoolSize;m>0;m--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=Ae.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(s,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+s]=="function"&&this["on"+s](c))},l.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(s,c){var f=this.transceivers.length>0,m={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&f)m.iceTransport=this.transceivers[0].iceTransport,m.dtlsTransport=this.transceivers[0].dtlsTransport;else{var y=this._createIceAndDtlsTransports();m.iceTransport=y.iceTransport,m.dtlsTransport=y.dtlsTransport}return c||this.transceivers.push(m),m},l.prototype.addTrack=function(s,c){if(this._isClosed)throw at("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var f=this.transceivers.find(function(C){return C.track===s});if(f)throw at("InvalidAccessError","Track already exists.");for(var m,y=0;y<this.transceivers.length;y++)!this.transceivers[y].track&&this.transceivers[y].kind===s.kind&&(m=this.transceivers[y]);return m||(m=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),m.track=s,m.stream=c,m.rtpSender=new t.RTCRtpSender(s,m.dtlsTransport),m.rtpSender},l.prototype.addStream=function(s){var c=this;if(e>=15025)s.getTracks().forEach(function(m){c.addTrack(m,s)});else{var f=s.clone();s.getTracks().forEach(function(m,y){var C=f.getTracks()[y];m.addEventListener("enabled",function(b){C.enabled=b.enabled})}),f.getTracks().forEach(function(m){c.addTrack(m,f)})}},l.prototype.removeTrack=function(s){if(this._isClosed)throw at("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(y){return y.rtpSender===s});if(!c)throw at("InvalidAccessError","Sender was not created by this connection.");var f=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var m=this.transceivers.map(function(y){return y.stream});m.indexOf(f)===-1&&this.localStreams.indexOf(f)>-1&&this.localStreams.splice(this.localStreams.indexOf(f),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(s){var c=this;s.getTracks().forEach(function(f){var m=c.getSenders().find(function(y){return y.track===f});m&&c.removeTrack(m)})},l.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},l.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},l.prototype._createIceGatherer=function(s,c){var f=this;if(c&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var m=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(m,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(y){var C=!y.candidate||Object.keys(y.candidate).length===0;m.state=C?"completed":"gathering",f.transceivers[s].bufferedCandidateEvents!==null&&f.transceivers[s].bufferedCandidateEvents.push(y)},m.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),m},l.prototype._gather=function(s,c){var f=this,m=this.transceivers[c].iceGatherer;if(!m.onlocalcandidate){var y=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,m.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),m.onlocalcandidate=function(C){if(!(f.usingBundle&&c>0)){var b=new Event("icecandidate");b.candidate={sdpMid:s,sdpMLineIndex:c};var S=C.candidate,u=!S||Object.keys(S).length===0;if(u)(m.state==="new"||m.state==="gathering")&&(m.state="completed");else{m.state==="new"&&(m.state="gathering"),S.component=1,S.ufrag=m.getLocalParameters().usernameFragment;var _=Ae.writeCandidate(S);b.candidate=Object.assign(b.candidate,Ae.parseCandidate(_)),b.candidate.candidate=_,b.candidate.toJSON=function(){return{candidate:b.candidate.candidate,sdpMid:b.candidate.sdpMid,sdpMLineIndex:b.candidate.sdpMLineIndex,usernameFragment:b.candidate.usernameFragment}}}var v=Ae.getMediaSections(f._localDescription.sdp);u?v[b.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:v[b.candidate.sdpMLineIndex]+="a="+b.candidate.candidate+`\r
`,f._localDescription.sdp=Ae.getDescription(f._localDescription.sdp)+v.join("");var g=f.transceivers.every(function(E){return E.iceGatherer&&E.iceGatherer.state==="completed"});f.iceGatheringState!=="gathering"&&(f.iceGatheringState="gathering",f._emitGatheringStateChange()),u||f._dispatchEvent("icecandidate",b),g&&(f._dispatchEvent("icecandidate",new Event("icecandidate")),f.iceGatheringState="complete",f._emitGatheringStateChange())}},t.setTimeout(function(){y.forEach(function(C){m.onlocalcandidate(C)})},0)}},l.prototype._createIceAndDtlsTransports=function(){var s=this,c=new t.RTCIceTransport(null);c.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var f=new t.RTCDtlsTransport(c);return f.ondtlsstatechange=function(){s._updateConnectionState()},f.onerror=function(){Object.defineProperty(f,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:c,dtlsTransport:f}},l.prototype._disposeIceAndDtlsTransports=function(s){var c=this.transceivers[s].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[s].iceGatherer);var f=this.transceivers[s].iceTransport;f&&(delete f.onicestatechange,delete this.transceivers[s].iceTransport);var m=this.transceivers[s].dtlsTransport;m&&(delete m.ondtlsstatechange,delete m.onerror,delete this.transceivers[s].dtlsTransport)},l.prototype._transceive=function(s,c,f){var m=Fn(s.localCapabilities,s.remoteCapabilities);c&&s.rtpSender&&(m.encodings=s.sendEncodingParameters,m.rtcp={cname:Ae.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(m.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(m)),f&&s.rtpReceiver&&m.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&e<15019&&s.recvEncodingParameters.forEach(function(y){delete y.rtx}),s.recvEncodingParameters.length?m.encodings=s.recvEncodingParameters:m.encodings=[{}],m.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(m.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(m.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(m))},l.prototype.setLocalDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(at("TypeError",'Unsupported type "'+s.type+'"'));if(!Hc("setLocalDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(at("InvalidStateError","Can not set local "+s.type+" in state "+c.signalingState));var f,m;if(s.type==="offer")f=Ae.splitSections(s.sdp),m=f.shift(),f.forEach(function(C,b){var S=Ae.parseRtpParameters(C);c.transceivers[b].localCapabilities=S}),c.transceivers.forEach(function(C,b){c._gather(C.mid,b)});else if(s.type==="answer"){f=Ae.splitSections(c._remoteDescription.sdp),m=f.shift();var y=Ae.matchPrefix(m,"a=ice-lite").length>0;f.forEach(function(C,b){var S=c.transceivers[b],u=S.iceGatherer,_=S.iceTransport,v=S.dtlsTransport,g=S.localCapabilities,E=S.remoteCapabilities,T=Ae.isRejected(C)&&Ae.matchPrefix(C,"a=bundle-only").length===0;if(!T&&!S.rejected){var R=Ae.getIceParameters(C,m),h=Ae.getDtlsParameters(C,m);y&&(h.role="server"),(!c.usingBundle||b===0)&&(c._gather(S.mid,b),_.state==="new"&&_.start(u,R,y?"controlling":"controlled"),v.state==="new"&&v.start(h));var A=Fn(g,E);c._transceive(S,A.codecs.length>0,!1)}})}return c._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(at("TypeError",'Unsupported type "'+s.type+'"'));if(!Hc("setRemoteDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(at("InvalidStateError","Can not set remote "+s.type+" in state "+c.signalingState));var f={};c.remoteStreams.forEach(function(_){f[_.id]=_});var m=[],y=Ae.splitSections(s.sdp),C=y.shift(),b=Ae.matchPrefix(C,"a=ice-lite").length>0,S=Ae.matchPrefix(C,"a=group:BUNDLE ").length>0;c.usingBundle=S;var u=Ae.matchPrefix(C,"a=ice-options:")[0];return u?c.canTrickleIceCandidates=u.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,y.forEach(function(_,v){var g=Ae.splitLines(_),E=Ae.getKind(_),T=Ae.isRejected(_)&&Ae.matchPrefix(_,"a=bundle-only").length===0,R=g[0].substr(2).split(" ")[2],h=Ae.getDirection(_,C),A=Ae.parseMsid(_),x=Ae.getMid(_)||Ae.generateIdentifier();if(T||E==="application"&&(R==="DTLS/SCTP"||R==="UDP/DTLS/SCTP")){c.transceivers[v]={mid:x,kind:E,protocol:R,rejected:!0};return}!T&&c.transceivers[v]&&c.transceivers[v].rejected&&(c.transceivers[v]=c._createTransceiver(E,!0));var O,H,N,B,ee,ue,se,M,F,j=Ae.parseRtpParameters(_),q,te;T||(q=Ae.getIceParameters(_,C),te=Ae.getDtlsParameters(_,C),te.role="client"),se=Ae.parseRtpEncodingParameters(_);var ge=Ae.parseRtcpParameters(_),me=Ae.matchPrefix(_,"a=end-of-candidates",C).length>0,oe=Ae.matchPrefix(_,"a=candidate:").map(function(re){return Ae.parseCandidate(re)}).filter(function(re){return re.component===1});if((s.type==="offer"||s.type==="answer")&&!T&&S&&v>0&&c.transceivers[v]&&(c._disposeIceAndDtlsTransports(v),c.transceivers[v].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[v].iceTransport=c.transceivers[0].iceTransport,c.transceivers[v].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[v].rtpSender&&c.transceivers[v].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[v].rtpReceiver&&c.transceivers[v].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),s.type==="offer"&&!T){O=c.transceivers[v]||c._createTransceiver(E),O.mid=x,O.iceGatherer||(O.iceGatherer=c._createIceGatherer(v,S)),oe.length&&O.iceTransport.state==="new"&&(me&&(!S||v===0)?O.iceTransport.setRemoteCandidates(oe):oe.forEach(function(re){ao(O.iceTransport,re)})),M=t.RTCRtpReceiver.getCapabilities(E),e<15019&&(M.codecs=M.codecs.filter(function(re){return re.name!=="rtx"})),ue=O.sendEncodingParameters||[{ssrc:(2*v+2)*1001}];var pe=!1;if(h==="sendrecv"||h==="sendonly"){if(pe=!O.rtpReceiver,ee=O.rtpReceiver||new t.RTCRtpReceiver(O.dtlsTransport,E),pe){var z;F=ee.track,A&&A.stream==="-"||(A?(f[A.stream]||(f[A.stream]=new t.MediaStream,Object.defineProperty(f[A.stream],"id",{get:function(){return A.stream}})),Object.defineProperty(F,"id",{get:function(){return A.track}}),z=f[A.stream]):(f.default||(f.default=new t.MediaStream),z=f.default)),z&&(r(F,z),O.associatedRemoteMediaStreams.push(z)),m.push([F,ee,z])}}else O.rtpReceiver&&O.rtpReceiver.track&&(O.associatedRemoteMediaStreams.forEach(function(re){var ae=re.getTracks().find(function(Pe){return Pe.id===O.rtpReceiver.track.id});ae&&i(ae,re)}),O.associatedRemoteMediaStreams=[]);O.localCapabilities=M,O.remoteCapabilities=j,O.rtpReceiver=ee,O.rtcpParameters=ge,O.sendEncodingParameters=ue,O.recvEncodingParameters=se,c._transceive(c.transceivers[v],!1,pe)}else if(s.type==="answer"&&!T){O=c.transceivers[v],H=O.iceGatherer,N=O.iceTransport,B=O.dtlsTransport,ee=O.rtpReceiver,ue=O.sendEncodingParameters,M=O.localCapabilities,c.transceivers[v].recvEncodingParameters=se,c.transceivers[v].remoteCapabilities=j,c.transceivers[v].rtcpParameters=ge,oe.length&&N.state==="new"&&((b||me)&&(!S||v===0)?N.setRemoteCandidates(oe):oe.forEach(function(re){ao(O.iceTransport,re)})),(!S||v===0)&&(N.state==="new"&&N.start(H,q,"controlling"),B.state==="new"&&B.start(te));var W=Fn(O.localCapabilities,O.remoteCapabilities),Y=W.codecs.filter(function(re){return re.name.toLowerCase()==="rtx"}).length;!Y&&O.sendEncodingParameters[0].rtx&&delete O.sendEncodingParameters[0].rtx,c._transceive(O,h==="sendrecv"||h==="recvonly",h==="sendrecv"||h==="sendonly"),ee&&(h==="sendrecv"||h==="sendonly")?(F=ee.track,A?(f[A.stream]||(f[A.stream]=new t.MediaStream),r(F,f[A.stream]),m.push([F,ee,f[A.stream]])):(f.default||(f.default=new t.MediaStream),r(F,f.default),m.push([F,ee,f.default]))):delete O.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=s.type==="offer"?"active":"passive"),c._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(f).forEach(function(_){var v=f[_];if(v.getTracks().length){if(c.remoteStreams.indexOf(v)===-1){c.remoteStreams.push(v);var g=new Event("addstream");g.stream=v,t.setTimeout(function(){c._dispatchEvent("addstream",g)})}m.forEach(function(E){var T=E[0],R=E[1];v.id===E[2].id&&o(c,T,R,[v])})}}),m.forEach(function(_){_[2]||o(c,_[0],_[1],[])}),t.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(_){_.iceTransport&&_.iceTransport.state==="new"&&_.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),_.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(s){this.signalingState=s;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},l.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var c=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",c)}},0))},l.prototype._updateIceConnectionState=function(){var s,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(m){m.iceTransport&&!m.rejected&&c[m.iceTransport.state]++}),s="new",c.failed>0?s="failed":c.checking>0?s="checking":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0?s="connected":c.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var f=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",f)}},l.prototype._updateConnectionState=function(){var s,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(m){m.iceTransport&&m.dtlsTransport&&!m.rejected&&(c[m.iceTransport.state]++,c[m.dtlsTransport.state]++)}),c.connected+=c.completed,s="new",c.failed>0?s="failed":c.connecting>0?s="connecting":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var f=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",f)}},l.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(at("InvalidStateError","Can not call createOffer after close"));var c=s.transceivers.filter(function(b){return b.kind==="audio"}).length,f=s.transceivers.filter(function(b){return b.kind==="video"}).length,m=arguments[0];if(m){if(m.mandatory||m.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");m.offerToReceiveAudio!==void 0&&(m.offerToReceiveAudio===!0?c=1:m.offerToReceiveAudio===!1?c=0:c=m.offerToReceiveAudio),m.offerToReceiveVideo!==void 0&&(m.offerToReceiveVideo===!0?f=1:m.offerToReceiveVideo===!1?f=0:f=m.offerToReceiveVideo)}for(s.transceivers.forEach(function(b){b.kind==="audio"?(c--,c<0&&(b.wantReceive=!1)):b.kind==="video"&&(f--,f<0&&(b.wantReceive=!1))});c>0||f>0;)c>0&&(s._createTransceiver("audio"),c--),f>0&&(s._createTransceiver("video"),f--);var y=Ae.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(b,S){var u=b.track,_=b.kind,v=b.mid||Ae.generateIdentifier();b.mid=v,b.iceGatherer||(b.iceGatherer=s._createIceGatherer(S,s.usingBundle));var g=t.RTCRtpSender.getCapabilities(_);e<15019&&(g.codecs=g.codecs.filter(function(T){return T.name!=="rtx"})),g.codecs.forEach(function(T){T.name==="H264"&&T.parameters["level-asymmetry-allowed"]===void 0&&(T.parameters["level-asymmetry-allowed"]="1"),b.remoteCapabilities&&b.remoteCapabilities.codecs&&b.remoteCapabilities.codecs.forEach(function(R){T.name.toLowerCase()===R.name.toLowerCase()&&T.clockRate===R.clockRate&&(T.preferredPayloadType=R.payloadType)})}),g.headerExtensions.forEach(function(T){var R=b.remoteCapabilities&&b.remoteCapabilities.headerExtensions||[];R.forEach(function(h){T.uri===h.uri&&(T.id=h.id)})});var E=b.sendEncodingParameters||[{ssrc:(2*S+1)*1001}];u&&e>=15019&&_==="video"&&!E[0].rtx&&(E[0].rtx={ssrc:E[0].ssrc+1}),b.wantReceive&&(b.rtpReceiver=new t.RTCRtpReceiver(b.dtlsTransport,_)),b.localCapabilities=g,b.sendEncodingParameters=E}),s._config.bundlePolicy!=="max-compat"&&(y+="a=group:BUNDLE "+s.transceivers.map(function(b){return b.mid}).join(" ")+`\r
`),y+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(b,S){y+=Nc(b,b.localCapabilities,"offer",b.stream,s._dtlsRole),y+=`a=rtcp-rsize\r
`,b.iceGatherer&&s.iceGatheringState!=="new"&&(S===0||!s.usingBundle)&&(b.iceGatherer.getLocalCandidates().forEach(function(u){u.component=1,y+="a="+Ae.writeCandidate(u)+`\r
`}),b.iceGatherer.state==="completed"&&(y+=`a=end-of-candidates\r
`))});var C=new t.RTCSessionDescription({type:"offer",sdp:y});return Promise.resolve(C)},l.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(at("InvalidStateError","Can not call createAnswer after close"));if(!(s.signalingState==="have-remote-offer"||s.signalingState==="have-local-pranswer"))return Promise.reject(at("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var c=Ae.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(c+="a=group:BUNDLE "+s.transceivers.map(function(y){return y.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var f=Ae.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(y,C){if(!(C+1>f)){if(y.rejected){y.kind==="application"?y.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+y.protocol+` webrtc-datachannel\r
`:y.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:y.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+y.mid+`\r
`;return}if(y.stream){var b;y.kind==="audio"?b=y.stream.getAudioTracks()[0]:y.kind==="video"&&(b=y.stream.getVideoTracks()[0]),b&&e>=15019&&y.kind==="video"&&!y.sendEncodingParameters[0].rtx&&(y.sendEncodingParameters[0].rtx={ssrc:y.sendEncodingParameters[0].ssrc+1})}var S=Fn(y.localCapabilities,y.remoteCapabilities),u=S.codecs.filter(function(_){return _.name.toLowerCase()==="rtx"}).length;!u&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,c+=Nc(y,S,"answer",y.stream,s._dtlsRole),y.rtcpParameters&&y.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var m=new t.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(m)},l.prototype.addIceCandidate=function(s){var c=this,f;return s&&!(s.sdpMLineIndex!==void 0||s.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(m,y){if(c._remoteDescription)if(!s||s.candidate==="")for(var C=0;C<c.transceivers.length&&!(!c.transceivers[C].rejected&&(c.transceivers[C].iceTransport.addRemoteCandidate({}),f=Ae.getMediaSections(c._remoteDescription.sdp),f[C]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=Ae.getDescription(c._remoteDescription.sdp)+f.join(""),c.usingBundle));C++);else{var b=s.sdpMLineIndex;if(s.sdpMid){for(var S=0;S<c.transceivers.length;S++)if(c.transceivers[S].mid===s.sdpMid){b=S;break}}var u=c.transceivers[b];if(u){if(u.rejected)return m();var _=Object.keys(s.candidate).length>0?Ae.parseCandidate(s.candidate):{};if(_.protocol==="tcp"&&(_.port===0||_.port===9)||_.component&&_.component!==1)return m();if((b===0||b>0&&u.iceTransport!==c.transceivers[0].iceTransport)&&!ao(u.iceTransport,_))return y(at("OperationError","Can not add ICE candidate"));var v=s.candidate.trim();v.indexOf("a=")===0&&(v=v.substr(2)),f=Ae.getMediaSections(c._remoteDescription.sdp),f[b]+="a="+(_.type?v:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=Ae.getDescription(c._remoteDescription.sdp)+f.join("")}else return y(at("OperationError","Can not add ICE candidate"))}else return y(at("InvalidStateError","Can not add ICE candidate without a remote description"));m()})},l.prototype.getStats=function(s){if(s&&s instanceof t.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(m){m.rtpSender&&m.rtpSender.track===s?c=m.rtpSender:m.rtpReceiver&&m.rtpReceiver.track===s&&(c=m.rtpReceiver)}),!c)throw at("InvalidAccessError","Invalid selector.");return c.getStats()}var f=[];return this.transceivers.forEach(function(m){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(y){m[y]&&f.push(m[y].getStats())})}),Promise.all(f).then(function(m){var y=new Map;return m.forEach(function(C){C.forEach(function(b){y.set(b.id,b)})}),y})};var p=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];p.forEach(function(s){var c=t[s];if(c&&c.prototype&&c.prototype.getStats){var f=c.prototype.getStats;c.prototype.getStats=function(){return f.apply(this).then(function(m){var y=new Map;return Object.keys(m).forEach(function(C){m[C].type=Yd(m[C]),y.set(C,m[C])}),y})}}});var n=["createOffer","createAnswer"];return n.forEach(function(s){var c=l.prototype[s];l.prototype[s]=function(){var f=arguments;return typeof f[0]=="function"||typeof f[1]=="function"?c.apply(this,[arguments[2]]).then(function(m){typeof f[0]=="function"&&f[0].apply(null,[m])},function(m){typeof f[1]=="function"&&f[1].apply(null,[m])}):c.apply(this,arguments)}}),n=["setLocalDescription","setRemoteDescription","addIceCandidate"],n.forEach(function(s){var c=l.prototype[s];l.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"||typeof f[2]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)},function(m){typeof f[2]=="function"&&f[2].apply(null,[m])}):c.apply(this,arguments)}}),["getStats"].forEach(function(s){var c=l.prototype[s];l.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)}):c.apply(this,arguments)}}),l};const Qd=Ts(Xd);function bh(t){const e=t&&t.navigator,r=function(o){return{name:{PermissionDeniedError:"NotAllowedError"}[o.name]||o.name,message:o.message,constraint:o.constraint,toString(){return this.name}}},i=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(o){return i(o).catch(l=>Promise.reject(r(l)))}}function Ch(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function Wo(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(o){return o}),t.RTCSessionDescription||(t.RTCSessionDescription=function(o){return o}),e.version<15025)){const i=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(o){i.set.call(this,o);const l=new Event("enabled");l.enabled=o,this.dispatchEvent(l)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const r=Qd(t,e.version);t.RTCPeerConnection=function(o){return o&&o.iceServers&&(o.iceServers=Gd(o.iceServers,e.version),xa("ICE servers after filtering:",o.iceServers)),new r(o)},t.RTCPeerConnection.prototype=r.prototype}function Eh(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const $c=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:Ch,shimGetUserMedia:bh,shimPeerConnection:Wo,shimReplaceTrack:Eh},Symbol.toStringTag,{value:"Module"}));function wh(t,e){const r=t&&t.navigator,i=t&&t.MediaStreamTrack;if(r.getUserMedia=function(o,l,p){As("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(o).then(l,p)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const o=function(p,n,s){n in p&&!(s in p)&&(p[s]=p[n],delete p[n])},l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(p){return typeof p=="object"&&typeof p.audio=="object"&&(p=JSON.parse(JSON.stringify(p)),o(p.audio,"autoGainControl","mozAutoGainControl"),o(p.audio,"noiseSuppression","mozNoiseSuppression")),l(p)},i&&i.prototype.getSettings){const p=i.prototype.getSettings;i.prototype.getSettings=function(){const n=p.apply(this,arguments);return o(n,"mozAutoGainControl","autoGainControl"),o(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const p=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return this.kind==="audio"&&typeof n=="object"&&(n=JSON.parse(JSON.stringify(n)),o(n,"autoGainControl","mozAutoGainControl"),o(n,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[n])}}}}function Zd(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function Th(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zo(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const l=t.RTCPeerConnection.prototype[o],p={[o](){return arguments[0]=new(o==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};t.RTCPeerConnection.prototype[o]=p[o]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,p,n]=arguments;return i.apply(this,[l||null]).then(s=>{if(e.version<53&&!p)try{s.forEach(c=>{c.type=r[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;s.forEach((f,m)=>{s.set(m,Object.assign({},f,{type:r[f.type]||f.type}))})}return s}).then(p,n)}}function Ah(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(l=>l._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function kh(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Bi(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Rh(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){As("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&r.getTracks().includes(i.track)&&this.removeTrack(i)})})}function xh(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Dh(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const i=arguments[1],o=i&&"sendEncodings"in i;o&&i.sendEncodings.forEach(p=>{if("rid"in p&&!/^[a-z0-9]{0,16}$/i.test(p.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in p&&!(parseFloat(p.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in p&&!(parseFloat(p.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(o){const{sender:p}=l,n=p.getParameters();(!("encodings"in n)||n.encodings.length===1&&Object.keys(n.encodings[0]).length===0)&&(n.encodings=i.sendEncodings,p.sendEncodings=i.sendEncodings,this.setParametersPromises.push(p.setParameters(n).then(()=>{delete p.sendEncodings}).catch(()=>{delete p.sendEncodings})))}return l})}function Lh(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function Ph(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Oh(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Fc=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Dh,shimCreateAnswer:Oh,shimCreateOffer:Ph,shimGetDisplayMedia:Zd,shimGetParameters:Lh,shimGetUserMedia:wh,shimOnTrack:Th,shimPeerConnection:zo,shimRTCDataChannel:xh,shimReceiverGetStats:kh,shimRemoveStream:Rh,shimSenderGetStats:Ah},Symbol.toStringTag,{value:"Module"}));function Mh(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(o=>e.call(this,o,i)),i.getVideoTracks().forEach(o=>e.call(this,o,i))},t.RTCPeerConnection.prototype.addTrack=function(i,...o){return o&&o.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(r);if(i===-1)return;this._localStreams.splice(i,1);const o=r.getTracks();this.getSenders().forEach(l=>{o.includes(l.track)&&this.removeTrack(l)})})}}function Ih(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,this.dispatchEvent(l)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const p=new Event("addstream");p.stream=l,i.dispatchEvent(p)})}),e.apply(i,arguments)}}}function Bh(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,i=e.createAnswer,o=e.setLocalDescription,l=e.setRemoteDescription,p=e.addIceCandidate;e.createOffer=function(c,f){const m=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[m]);return f?(y.then(c,f),Promise.resolve()):y},e.createAnswer=function(c,f){const m=arguments.length>=2?arguments[2]:arguments[0],y=i.apply(this,[m]);return f?(y.then(c,f),Promise.resolve()):y};let n=function(s,c,f){const m=o.apply(this,[s]);return f?(m.then(c,f),Promise.resolve()):m};e.setLocalDescription=n,n=function(s,c,f){const m=l.apply(this,[s]);return f?(m.then(c,f),Promise.resolve()):m},e.setRemoteDescription=n,n=function(s,c,f){const m=p.apply(this,[s]);return f?(m.then(c,f),Promise.resolve()):m},e.addIceCandidate=n}function Nh(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,i=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=o=>i(Hh(o))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,o,l){e.mediaDevices.getUserMedia(i).then(o,l)}).bind(e))}function Hh(t){return t&&t.video!==void 0?Object.assign({},t,{video:lh(t.video)}):t}function $h(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,o){if(i&&i.iceServers){const l=[];for(let p=0;p<i.iceServers.length;p++){let n=i.iceServers[p];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(As("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,l.push(n)):l.push(i.iceServers[p])}i.iceServers=l}return new e(i,o)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Fh(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function jh(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const o=this.getTransceivers().find(p=>p.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio"),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(p=>p.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video")}return e.apply(this,arguments)}}function Uh(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const jc=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Uh,shimCallbacksAPI:Bh,shimConstraints:Hh,shimCreateOfferLegacy:jh,shimGetUserMedia:Nh,shimLocalStreamsAPI:Mh,shimRTCIceServerUrls:$h,shimRemoteStreamsAPI:Ih,shimTrackEventTransceiver:Fh},Symbol.toStringTag,{value:"Module"}));function rs(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const o=new e(i),l=ts.parseCandidate(i.candidate),p=Object.assign(o,l);return p.toJSON=function(){return{candidate:p.candidate,sdpMid:p.sdpMid,sdpMLineIndex:p.sdpMLineIndex,usernameFragment:p.usernameFragment}},p}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,Bi(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function on(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(n){if(!n||!n.sdp)return!1;const s=ts.splitSections(n.sdp);return s.shift(),s.some(c=>{const f=ts.parseMLine(c);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},i=function(n){const s=n.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(s===null||s.length<2)return-1;const c=parseInt(s[1],10);return c!==c?-1:c},o=function(n){let s=65536;return e.browser==="firefox"&&(e.version<57?n===-1?s=16384:s=2147483637:e.version<60?s=e.version===57?65535:65536:s=2147483637),s},l=function(n,s){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const f=ts.matchPrefix(n.sdp,"a=max-message-size:");return f.length>0?c=parseInt(f[0].substr(19),10):e.browser==="firefox"&&s!==-1&&(c=2147483637),c},p=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const s=i(arguments[0]),c=o(s),f=l(arguments[0],s);let m;c===0&&f===0?m=Number.POSITIVE_INFINITY:c===0||f===0?m=Math.max(c,f):m=Math.min(c,f);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return m}}),this._sctp=y}return p.apply(this,arguments)}}function an(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,o){const l=i.send;i.send=function(){const n=arguments[0],s=n.length||n.size||n.byteLength;if(i.readyState==="open"&&o.sctp&&s>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return l.apply(i,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const o=r.apply(this,arguments);return e(o,this),o},Bi(t,"datachannel",i=>(e(i.channel,i.target),i))}function Vo(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const i=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const l=o.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const p=new Event("connectionstatechange",o);l.dispatchEvent(p)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function qo(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=o.sdp.split(`
`).filter(p=>p.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&o instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:o.type,sdp:l}):o.sdp=l}return r.apply(this,arguments)}}function is(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const ep=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:qo,shimAddIceCandidateNullOrEmpty:is,shimConnectionState:Vo,shimMaxMessageSize:on,shimRTCIceCandidate:rs,shimSendThrowTypeError:an},Symbol.toStringTag,{value:"Module"}));function tp({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=xa,i=qd(t),o={browserDetails:i,commonShim:ep,extractVersion:sn,disableLog:zd,disableWarnings:Vd};switch(i.browser){case"chrome":if(!Bc||!Uo||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),o;if(i.version===null)return r("Chrome shim can not determine version, not shimming."),o;r("adapter.js shimming chrome."),o.browserShim=Bc,is(t,i),hh(t,i),uh(t),Uo(t,i),fh(t),mh(t,i),dh(t),ph(t),_h(t),vh(t,i),rs(t),Vo(t),on(t,i),an(t),qo(t,i);break;case"firefox":if(!Fc||!zo||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),o;r("adapter.js shimming firefox."),o.browserShim=Fc,is(t,i),wh(t,i),zo(t,i),Th(t),Rh(t),Ah(t),kh(t),xh(t),Dh(t),Lh(t),Ph(t),Oh(t),rs(t),Vo(t),on(t,i),an(t);break;case"edge":if(!$c||!Wo||!e.shimEdge)return r("MS edge shim is not included in this adapter release."),o;r("adapter.js shimming edge."),o.browserShim=$c,bh(t),Ch(t),Wo(t,i),Eh(t),on(t,i),an(t);break;case"safari":if(!jc||!e.shimSafari)return r("Safari shim is not included in this adapter release."),o;r("adapter.js shimming safari."),o.browserShim=jc,is(t,i),$h(t),jh(t),Bh(t),Mh(t),Ih(t),Fh(t),Nh(t),Uh(t),rs(t),on(t,i),an(t),qo(t,i);break;default:r("Unsupported browser!");break}return o}const Uc=tp({window:typeof window>"u"?void 0:window});function hr(t,e,r,i){Object.defineProperty(t,e,{get:r,set:i,enumerable:!0,configurable:!0})}var co=Uc.default||Uc,Ji=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),r=this.getVersion(),i=this.supportedBrowsers.includes(e);return i?e==="chrome"?r>=this.minChromeVersion:e==="firefox"?r>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return co.browserDetails.browser},t.prototype.getVersion=function(){return co.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),r=co.browserDetails.version||0;if(e==="chrome"&&r<this.minChromeVersion)return!1;if(e==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var i,o=!1;try{i=new RTCPeerConnection,i.addTransceiver("audio"),o=!0}catch{}finally{i&&i.close()}return o},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),Wc={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},rp=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Wc,this.browser=Ji.getBrowser(),this.browserVersion=Ji.getVersion(),this.supports=function(){var e={browser:Ji.isBrowserSupported(),webRTC:Ji.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var r;try{r=new RTCPeerConnection(Wc),e.audioVideo=!0;var i=void 0;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!i.ordered;try{i.binaryType="blob",e.binaryBlob=!Ji.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return e}(),this.pack=Pc.pack,this.unpack=Pc.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var r=[],i=e.size,o=Math.ceil(i/je.chunkedMTU),l=0,p=0;p<i;){var n=Math.min(i,p+je.chunkedMTU),s=e.slice(p,n),c={__peerData:this._dataCount,n:l,data:s,total:o};r.push(c),p=n,l++}return this._dataCount++,r},t.prototype.blobToArrayBuffer=function(e,r){var i=new FileReader;return i.onload=function(o){o.target&&r(o.target.result)},i.readAsArrayBuffer(e),i},t.prototype.binaryStringToArrayBuffer=function(e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i)&255;return r.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),je=new rp,Wh={};hr(Wh,"Peer",()=>us,t=>us=t);var vn={},ip=Object.prototype.hasOwnProperty,_t="~";function pn(){}Object.create&&(pn.prototype=Object.create(null),new pn().__proto__||(_t=!1));function np(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function zh(t,e,r,i,o){if(typeof r!="function")throw new TypeError("The listener must be a function");var l=new np(r,i||t,o),p=_t?_t+e:e;return t._events[p]?t._events[p].fn?t._events[p]=[t._events[p],l]:t._events[p].push(l):(t._events[p]=l,t._eventsCount++),t}function ns(t,e){--t._eventsCount===0?t._events=new pn:delete t._events[e]}function ct(){this._events=new pn,this._eventsCount=0}ct.prototype.eventNames=function(){var e=[],r,i;if(this._eventsCount===0)return e;for(i in r=this._events)ip.call(r,i)&&e.push(_t?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};ct.prototype.listeners=function(e){var r=_t?_t+e:e,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,l=i.length,p=new Array(l);o<l;o++)p[o]=i[o].fn;return p};ct.prototype.listenerCount=function(e){var r=_t?_t+e:e,i=this._events[r];return i?i.fn?1:i.length:0};ct.prototype.emit=function(e,r,i,o,l,p){var n=_t?_t+e:e;if(!this._events[n])return!1;var s=this._events[n],c=arguments.length,f,m;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,r),!0;case 3:return s.fn.call(s.context,r,i),!0;case 4:return s.fn.call(s.context,r,i,o),!0;case 5:return s.fn.call(s.context,r,i,o,l),!0;case 6:return s.fn.call(s.context,r,i,o,l,p),!0}for(m=1,f=new Array(c-1);m<c;m++)f[m-1]=arguments[m];s.fn.apply(s.context,f)}else{var y=s.length,C;for(m=0;m<y;m++)switch(s[m].once&&this.removeListener(e,s[m].fn,void 0,!0),c){case 1:s[m].fn.call(s[m].context);break;case 2:s[m].fn.call(s[m].context,r);break;case 3:s[m].fn.call(s[m].context,r,i);break;case 4:s[m].fn.call(s[m].context,r,i,o);break;default:if(!f)for(C=1,f=new Array(c-1);C<c;C++)f[C-1]=arguments[C];s[m].fn.apply(s[m].context,f)}}return!0};ct.prototype.on=function(e,r,i){return zh(this,e,r,i,!1)};ct.prototype.once=function(e,r,i){return zh(this,e,r,i,!0)};ct.prototype.removeListener=function(e,r,i,o){var l=_t?_t+e:e;if(!this._events[l])return this;if(!r)return ns(this,l),this;var p=this._events[l];if(p.fn)p.fn===r&&(!o||p.once)&&(!i||p.context===i)&&ns(this,l);else{for(var n=0,s=[],c=p.length;n<c;n++)(p[n].fn!==r||o&&!p[n].once||i&&p[n].context!==i)&&s.push(p[n]);s.length?this._events[l]=s.length===1?s[0]:s:ns(this,l)}return this};ct.prototype.removeAllListeners=function(e){var r;return e?(r=_t?_t+e:e,this._events[r]&&ns(this,r)):(this._events=new pn,this._eventsCount=0),this};ct.prototype.off=ct.prototype.removeListener;ct.prototype.addListener=ct.prototype.on;ct.prefixed=_t;ct.EventEmitter=ct;vn=ct;var Se={};hr(Se,"LogLevel",()=>bt,t=>bt=t);hr(Se,"default",()=>zc,t=>zc=t);var Yr=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),o,l=[],p;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(n){p={error:n}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(p)throw p.error}}return l},Jr=function(t,e,r){if(r||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))},sp="PeerJS: ",bt;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(bt||(bt={}));var op=function(){function t(){this._logLevel=bt.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._logLevel>=bt.All&&this._print.apply(this,Jr([bt.All],Yr(e),!1))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._logLevel>=bt.Warnings&&this._print.apply(this,Jr([bt.Warnings],Yr(e),!1))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._logLevel>=bt.Errors&&this._print.apply(this,Jr([bt.Errors],Yr(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=Jr([sp],Yr(r),!1);for(var l in o)o[l]instanceof Error&&(o[l]="("+o[l].name+") "+o[l].message);e>=bt.All?console.log.apply(console,Jr([],Yr(o),!1)):e>=bt.Warnings?console.warn.apply(console,Jr(["WARNING"],Yr(o),!1)):e>=bt.Errors&&console.error.apply(console,Jr(["ERROR"],Yr(o),!1))},t}(),zc=new op,Vh={};hr(Vh,"Socket",()=>Vc,t=>Vc=t);var Gt;(function(t){t.Data="data",t.Media="media"})(Gt||(Gt={}));var Je;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(Je||(Je={}));var gr;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})(gr||(gr={}));var vr;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(vr||(vr={}));var tt;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(tt||(tt={}));var Da={};Da=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var ap=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),cp=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),o,l=[],p;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(n){p={error:n}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(p)throw p.error}}return l},lp=function(t,e,r){if(r||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))},hp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vc=function(t){ap(e,t);function e(r,i,o,l,p,n){n===void 0&&(n=5e3);var s=t.call(this)||this;s.pingInterval=n,s._disconnected=!0,s._messagesQueue=[];var c=r?"wss://":"ws://";return s._baseUrl=c+i+":"+o+l+"peerjs?key="+p,s}return e.prototype.start=function(r,i){var o=this;this._id=r;var l="".concat(this._baseUrl,"&id=").concat(r,"&token=").concat(i);this._socket||!this._disconnected||(this._socket=new WebSocket(l+"&version="+Da.version),this._disconnected=!1,this._socket.onmessage=function(p){var n;try{n=JSON.parse(p.data),Se.default.log("Server message received:",n)}catch{Se.default.log("Invalid server message",p.data);return}o.emit(vr.Message,n)},this._socket.onclose=function(p){o._disconnected||(Se.default.log("Socket closed.",p),o._cleanup(),o._disconnected=!0,o.emit(vr.Disconnected))},this._socket.onopen=function(){o._disconnected||(o._sendQueuedMessages(),Se.default.log("Socket open"),o._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var r=this;this._wsPingTimer=setTimeout(function(){r._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){Se.default.log("Cannot send heartbeat, because socket closed");return}var r=JSON.stringify({type:tt.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var r,i,o=lp([],cp(this._messagesQueue),!1);this._messagesQueue=[];try{for(var l=hp(o),p=l.next();!p.done;p=l.next()){var n=p.value;this.send(n)}}catch(s){r={error:s}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}},e.prototype.send=function(r){if(!this._disconnected){if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit(vr.Error,"Invalid message");return}if(this._wsOpen()){var i=JSON.stringify(r);this._socket.send(i)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(vn.EventEmitter),Ko={};hr(Ko,"MediaConnection",()=>Gc,t=>Gc=t);var La={};hr(La,"Negotiator",()=>qc,t=>qc=t);var ls=function(){return ls=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ls.apply(this,arguments)},jn=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(p){p(l)})}return new(r||(r=Promise))(function(l,p){function n(f){try{c(i.next(f))}catch(m){p(m)}}function s(f){try{c(i.throw(f))}catch(m){p(m)}}function c(f){f.done?l(f.value):o(f.value).then(n,s)}c((i=i.apply(t,e||[])).next())})},Un=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,p;return p={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function n(c){return function(f){return s([c,f])}}function s(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(l=c[0]&2?o.return:c[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,c[1])).done)return l;switch(o=0,l&&(c=[c[0]&2,l.value]),c[0]){case 0:case 1:l=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!l||c[1]>l[0]&&c[1]<l[3])){r.label=c[1];break}if(c[0]===6&&r.label<l[1]){r.label=l[1],l=c;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(c);break}l[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(f){c=[6,f],o=0}finally{i=l=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},qc=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Gt.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){if(this.connection.type===Gt.Data){var i=this.connection,o={ordered:!!e.reliable},l=r.createDataChannel(i.label,o);i.initialize(l)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){Se.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var r=this,i=this.connection.peer,o=this.connection.connectionId,l=this.connection.type,p=this.connection.provider;Se.default.log("Listening for ICE candidates."),e.onicecandidate=function(n){!n.candidate||!n.candidate.candidate||(Se.default.log("Received ICE candidates for ".concat(i,":"),n.candidate),p.socket.send({type:tt.Candidate,payload:{candidate:n.candidate,type:l,connectionId:o},dst:i}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":Se.default.log("iceConnectionState is failed, closing connections to "+i),r.connection.emit("error",new Error("Negotiation of connection to "+i+" failed.")),r.connection.close();break;case"closed":Se.default.log("iceConnectionState is closed, closing connections to "+i),r.connection.emit("error",new Error("Connection to "+i+" closed.")),r.connection.close();break;case"disconnected":Se.default.log("iceConnectionState changed to disconnected on the connection with "+i);break;case"completed":e.onicecandidate=je.noop;break}r.connection.emit("iceStateChanged",e.iceConnectionState)},Se.default.log("Listening for data channel"),e.ondatachannel=function(n){Se.default.log("Received data channel");var s=n.channel,c=p.getConnection(i,o);c.initialize(s)},Se.default.log("Listening for remote stream"),e.ontrack=function(n){Se.default.log("Received remote stream");var s=n.streams[0],c=p.getConnection(i,o);if(c.type===Gt.Media){var f=c;r._addStreamToMediaConnection(s,f)}}},t.prototype.cleanup=function(){Se.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var r=e.signalingState!=="closed",i=!1;if(this.connection.type===Gt.Data){var o=this.connection,l=o.dataChannel;l&&(i=!!l.readyState&&l.readyState!=="closed")}(r||i)&&e.close()}},t.prototype._makeOffer=function(){return jn(this,void 0,Promise,function(){var e,r,i,o,l,p,n;return Un(this,function(s){switch(s.label){case 0:e=this.connection.peerConnection,r=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:i=s.sent(),Se.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,e.setLocalDescription(i)];case 4:return s.sent(),Se.default.log("Set localDescription:",i,"for:".concat(this.connection.peer)),o={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:je.browser},this.connection.type===Gt.Data&&(l=this.connection,o=ls(ls({},o),{label:l.label,reliable:l.reliable,serialization:l.serialization})),r.socket.send({type:tt.Offer,payload:o,dst:this.connection.peer}),[3,6];case 5:return p=s.sent(),p!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(Je.WebRTC,p),Se.default.log("Failed to setLocalDescription, ",p)),[3,6];case 6:return[3,8];case 7:return n=s.sent(),r.emitError(Je.WebRTC,n),Se.default.log("Failed to createOffer, ",n),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return jn(this,void 0,Promise,function(){var e,r,i,o,l;return Un(this,function(p){switch(p.label){case 0:e=this.connection.peerConnection,r=this.connection.provider,p.label=1;case 1:return p.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:i=p.sent(),Se.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp),p.label=3;case 3:return p.trys.push([3,5,,6]),[4,e.setLocalDescription(i)];case 4:return p.sent(),Se.default.log("Set localDescription:",i,"for:".concat(this.connection.peer)),r.socket.send({type:tt.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,browser:je.browser},dst:this.connection.peer}),[3,6];case 5:return o=p.sent(),r.emitError(Je.WebRTC,o),Se.default.log("Failed to setLocalDescription, ",o),[3,6];case 6:return[3,8];case 7:return l=p.sent(),r.emitError(Je.WebRTC,l),Se.default.log("Failed to create answer, ",l),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,r){return jn(this,void 0,Promise,function(){var i,o,l,p;return Un(this,function(n){switch(n.label){case 0:r=new RTCSessionDescription(r),i=this.connection.peerConnection,o=this.connection.provider,Se.default.log("Setting remote description",r),l=this,n.label=1;case 1:return n.trys.push([1,5,,6]),[4,i.setRemoteDescription(r)];case 2:return n.sent(),Se.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,l._makeAnswer()];case 3:n.sent(),n.label=4;case 4:return[3,6];case 5:return p=n.sent(),o.emitError(Je.WebRTC,p),Se.default.log("Failed to setRemoteDescription, ",p),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return jn(this,void 0,Promise,function(){var r,i,o,l,p,n;return Un(this,function(s){switch(s.label){case 0:Se.default.log("handleCandidate:",e),r=e.candidate,i=e.sdpMLineIndex,o=e.sdpMid,l=this.connection.peerConnection,p=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,l.addIceCandidate(new RTCIceCandidate({sdpMid:o,sdpMLineIndex:i,candidate:r}))];case 2:return s.sent(),Se.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return n=s.sent(),p.emitError(Je.WebRTC,n),Se.default.log("Failed to handleCandidate, ",n),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,r){if(Se.default.log("add tracks from stream ".concat(e.id," to peer connection")),!r.addTrack)return Se.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(i){r.addTrack(i,e)})},t.prototype._addStreamToMediaConnection=function(e,r){Se.default.log("add stream ".concat(e.id," to media connection ").concat(r.connectionId)),r.addStream(e)},t}(),Pa={};hr(Pa,"BaseConnection",()=>Kc,t=>Kc=t);var up=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Kc=function(t){up(e,t);function e(r,i,o){var l=t.call(this)||this;return l.peer=r,l.provider=i,l.options=o,l._open=!1,l.metadata=o.metadata,l}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(vn.EventEmitter),fp=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),hs=function(){return hs=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},hs.apply(this,arguments)},dp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gc=function(t){fp(e,t);function e(r,i,o){var l=t.call(this,r,i,o)||this;return l._localStream=l.options._stream,l.connectionId=l.options.connectionId||e.ID_PREFIX+je.randomToken(),l._negotiator=new La.Negotiator(l),l._localStream&&l._negotiator.startConnection({_stream:l._localStream,originator:!0}),l}return Object.defineProperty(e.prototype,"type",{get:function(){return Gt.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(r){Se.default.log("Receiving stream",r),this._remoteStream=r,t.prototype.emit.call(this,"stream",r)},e.prototype.handleMessage=function(r){var i=r.type,o=r.payload;switch(r.type){case tt.Answer:this._negotiator.handleSDP(i,o.sdp),this._open=!0;break;case tt.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:Se.default.warn("Unrecognized message type:".concat(i," from peer:").concat(this.peer));break}},e.prototype.answer=function(r,i){var o,l;if(i===void 0&&(i={}),this._localStream){Se.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,i&&i.sdpTransform&&(this.options.sdpTransform=i.sdpTransform),this._negotiator.startConnection(hs(hs({},this.options._payload),{_stream:r}));var p=this.provider._getMessages(this.connectionId);try{for(var n=dp(p),s=n.next();!s.done;s=n.next()){var c=s.value;this.handleMessage(c)}}catch(f){o={error:f}}finally{try{s&&!s.done&&(l=n.return)&&l.call(n)}finally{if(o)throw o.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}(Pa.BaseConnection),Go={};hr(Go,"DataConnection",()=>Jc,t=>Jc=t);var qh={};hr(qh,"EncodingQueue",()=>Yc,t=>Yc=t);var pp=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Yc=function(t){pp(e,t);function e(){var r=t.call(this)||this;return r.fileReader=new FileReader,r._queue=[],r._processing=!1,r.fileReader.onload=function(i){r._processing=!1,i.target&&r.emit("done",i.target.result),r.doNextTask()},r.fileReader.onerror=function(i){Se.default.error("EncodingQueue error:",i),r._processing=!1,r.destroy(),r.emit("error",i)},r}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(r){this.queue.push(r),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(vn.EventEmitter),_p=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),gp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jc=function(t){_p(e,t);function e(r,i,o){var l=t.call(this,r,i,o)||this;return l.stringify=JSON.stringify,l.parse=JSON.parse,l._buffer=[],l._bufferSize=0,l._buffering=!1,l._chunkedData={},l._encodingQueue=new qh.EncodingQueue,l.connectionId=l.options.connectionId||e.ID_PREFIX+je.randomToken(),l.label=l.options.label||l.connectionId,l.serialization=l.options.serialization||gr.Binary,l.reliable=!!l.options.reliable,l._encodingQueue.on("done",function(p){l._bufferedSend(p)}),l._encodingQueue.on("error",function(){Se.default.error("DC#".concat(l.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),l.close()}),l._negotiator=new La.Negotiator(l),l._negotiator.startConnection(l.options._payload||{originator:!0}),l}return Object.defineProperty(e.prototype,"type",{get:function(){return Gt.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(r){this._dc=r,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var r=this;(!je.supports.binaryBlob||je.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){Se.default.log("DC#".concat(r.connectionId," dc connection success")),r._open=!0,r.emit("open")},this.dataChannel.onmessage=function(i){Se.default.log("DC#".concat(r.connectionId," dc onmessage:"),i.data),r._handleDataMessage(i)},this.dataChannel.onclose=function(){Se.default.log("DC#".concat(r.connectionId," dc closed for:"),r.peer),r.close()}},e.prototype._handleDataMessage=function(r){var i=this,o=r.data,l=o.constructor,p=this.serialization===gr.Binary||this.serialization===gr.BinaryUTF8,n=o;if(p){if(l===Blob){je.blobToArrayBuffer(o,function(c){var f=je.unpack(c);i.emit("data",f)});return}else if(l===ArrayBuffer)n=je.unpack(o);else if(l===String){var s=je.binaryStringToArrayBuffer(o);n=je.unpack(s)}}else this.serialization===gr.JSON&&(n=this.parse(o));if(n.__peerData){this._handleChunk(n);return}t.prototype.emit.call(this,"data",n)},e.prototype._handleChunk=function(r){var i=r.__peerData,o=this._chunkedData[i]||{data:[],count:0,total:r.total};if(o.data[r.n]=r.data,o.count++,this._chunkedData[i]=o,o.total===o.count){delete this._chunkedData[i];var l=new Blob(o.data);this._handleDataMessage({data:l})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(r,i){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===gr.JSON)this._bufferedSend(this.stringify(r));else if(this.serialization===gr.Binary||this.serialization===gr.BinaryUTF8){var o=je.pack(r);if(!i&&o.size>je.chunkedMTU){this._sendChunks(o);return}je.supports.binaryBlob?this._bufferedSend(o):this._encodingQueue.enque(o)}else this._bufferedSend(r)},e.prototype._bufferedSend=function(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(r){var i=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){i._buffering=!1,i._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(o){return Se.default.error("DC#:".concat(this.connectionId," Error when sending:"),o),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(r){var i,o,l=je.chunk(r);Se.default.log("DC#".concat(this.connectionId," Try to send ").concat(l.length," chunks..."));try{for(var p=gp(l),n=p.next();!n.done;n=p.next()){var s=n.value;this.send(s,!0)}}catch(c){i={error:c}}finally{try{n&&!n.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}},e.prototype.handleMessage=function(r){var i=r.payload;switch(r.type){case tt.Answer:this._negotiator.handleSDP(r.type,i.sdp);break;case tt.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:Se.default.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(Pa.BaseConnection),Kh={};hr(Kh,"API",()=>Zc,t=>Zc=t);var Xc=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(p){p(l)})}return new(r||(r=Promise))(function(l,p){function n(f){try{c(i.next(f))}catch(m){p(m)}}function s(f){try{c(i.throw(f))}catch(m){p(m)}}function c(f){f.done?l(f.value):o(f.value).then(n,s)}c((i=i.apply(t,e||[])).next())})},Qc=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,p;return p={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function n(c){return function(f){return s([c,f])}}function s(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(l=c[0]&2?o.return:c[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,c[1])).done)return l;switch(o=0,l&&(c=[c[0]&2,l.value]),c[0]){case 0:case 1:l=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!l||c[1]>l[0]&&c[1]<l[3])){r.label=c[1];break}if(c[0]===6&&r.label<l[1]){r.label=l[1],l=c;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(c);break}l[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(f){c=[6,f],o=0}finally{i=l=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Zc=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var r=this._options.secure?"https":"http",i=this._options,o=i.host,l=i.port,p=i.path,n=i.key,s=new URL("".concat(r,"://").concat(o,":").concat(l).concat(p).concat(n,"/").concat(e));return s.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),s.searchParams.set("version",Da.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return Xc(this,void 0,Promise,function(){var e,r,i;return Qc(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=o.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw r=o.sent(),Se.default.error("Error retrieving ID",r),i="",this._options.path==="/"&&this._options.host!==je.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return Xc(this,void 0,Promise,function(){var e,r,i;return Qc(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=o.sent(),e.status!==200)throw e.status===401?(r="",this._options.host===je.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw i=o.sent(),Se.default.error("Error retrieving list peers",i),new Error("Could not get list peers from the server."+i);case 3:return[2]}})})},t}(),mp=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),ln=function(){return ln=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ln.apply(this,arguments)},Xi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vp=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),o,l=[],p;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(n){p={error:n}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(p)throw p.error}}return l},us=function(t){mp(e,t);function e(r,i){var o=t.call(this)||this;o._id=null,o._lastServerId=null,o._destroyed=!1,o._disconnected=!1,o._open=!1,o._connections=new Map,o._lostMessages=new Map;var l;return r&&r.constructor==Object?i=r:r&&(l=r.toString()),i=ln({debug:0,host:je.CLOUD_HOST,port:je.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:je.randomToken(),config:je.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},i),o._options=i,o._options.host==="/"&&(o._options.host=window.location.hostname),o._options.path&&(o._options.path[0]!=="/"&&(o._options.path="/"+o._options.path),o._options.path[o._options.path.length-1]!=="/"&&(o._options.path+="/")),o._options.secure===void 0&&o._options.host!==je.CLOUD_HOST?o._options.secure=je.isSecure():o._options.host==je.CLOUD_HOST&&(o._options.secure=!0),o._options.logFunction&&Se.default.setLogFunction(o._options.logFunction),Se.default.logLevel=o._options.debug||0,o._api=new Kh.API(i),o._socket=o._createServerConnection(),!je.supports.audioVideo&&!je.supports.data?(o._delayedAbort(Je.BrowserIncompatible,"The current browser does not support WebRTC"),o):l&&!je.validateId(l)?(o._delayedAbort(Je.InvalidID,'ID "'.concat(l,'" is invalid')),o):(l?o._initialize(l):o._api.retrieveId().then(function(p){return o._initialize(p)}).catch(function(p){return o._abort(Je.ServerError,p)}),o)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var r,i,o=Object.create(null);try{for(var l=Xi(this._connections),p=l.next();!p.done;p=l.next()){var n=vp(p.value,2),s=n[0],c=n[1];o[s]=c}}catch(f){r={error:f}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var r=this,i=new Vh.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return i.on(vr.Message,function(o){r._handleMessage(o)}),i.on(vr.Error,function(o){r._abort(Je.SocketError,o)}),i.on(vr.Disconnected,function(){r.disconnected||(r.emitError(Je.Network,"Lost connection to server."),r.disconnect())}),i.on(vr.Close,function(){r.disconnected||r._abort(Je.SocketClosed,"Underlying socket is already closed.")}),i},e.prototype._initialize=function(r){this._id=r,this.socket.start(r,this._options.token)},e.prototype._handleMessage=function(r){var i,o,l=r.type,p=r.payload,n=r.src;switch(l){case tt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case tt.Error:this._abort(Je.ServerError,p.msg);break;case tt.IdTaken:this._abort(Je.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case tt.InvalidKey:this._abort(Je.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case tt.Leave:Se.default.log("Received leave message from ".concat(n)),this._cleanupPeer(n),this._connections.delete(n);break;case tt.Expire:this.emitError(Je.PeerUnavailable,"Could not connect to peer ".concat(n));break;case tt.Offer:var b=p.connectionId,S=this.getConnection(n,b);if(S&&(S.close(),Se.default.warn("Offer received for existing Connection ID:".concat(b))),p.type===Gt.Media){var s=new Ko.MediaConnection(n,this,{connectionId:b,_payload:p,metadata:p.metadata});S=s,this._addConnection(n,S),this.emit("call",s)}else if(p.type===Gt.Data){var c=new Go.DataConnection(n,this,{connectionId:b,_payload:p,metadata:p.metadata,label:p.label,serialization:p.serialization,reliable:p.reliable});S=c,this._addConnection(n,S),this.emit("connection",c)}else{Se.default.warn("Received malformed connection type:".concat(p.type));return}var f=this._getMessages(b);try{for(var m=Xi(f),y=m.next();!y.done;y=m.next()){var C=y.value;S.handleMessage(C)}}catch(u){i={error:u}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}break;default:if(!p){Se.default.warn("You received a malformed message from ".concat(n," of type ").concat(l));return}var b=p.connectionId,S=this.getConnection(n,b);S&&S.peerConnection?S.handleMessage(r):b?this._storeMessage(b,r):Se.default.warn("You received an unrecognized message:",r);break}},e.prototype._storeMessage=function(r,i){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(i)},e.prototype._getMessages=function(r){var i=this._lostMessages.get(r);return i?(this._lostMessages.delete(r),i):[]},e.prototype.connect=function(r,i){if(i===void 0&&(i={}),this.disconnected){Se.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Je.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var o=new Go.DataConnection(r,this,i);return this._addConnection(r,o),o},e.prototype.call=function(r,i,o){if(o===void 0&&(o={}),this.disconnected){Se.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Je.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!i){Se.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var l=new Ko.MediaConnection(r,this,ln(ln({},o),{_stream:i}));return this._addConnection(r,l),l},e.prototype._addConnection=function(r,i){Se.default.log("add connection ".concat(i.type,":").concat(i.connectionId," to peerId:").concat(r)),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(i)},e.prototype._removeConnection=function(r){var i=this._connections.get(r.peer);if(i){var o=i.indexOf(r);o!==-1&&i.splice(o,1)}this._lostMessages.delete(r.connectionId)},e.prototype.getConnection=function(r,i){var o,l,p=this._connections.get(r);if(!p)return null;try{for(var n=Xi(p),s=n.next();!s.done;s=n.next()){var c=s.value;if(c.connectionId===i)return c}}catch(f){o={error:f}}finally{try{s&&!s.done&&(l=n.return)&&l.call(n)}finally{if(o)throw o.error}}return null},e.prototype._delayedAbort=function(r,i){var o=this;setTimeout(function(){o._abort(r,i)},0)},e.prototype._abort=function(r,i){Se.default.error("Aborting!"),this.emitError(r,i),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(r,i){Se.default.error("Error:",i);var o;typeof i=="string"?o=new Error(i):o=i,o.type=r,this.emit("error",o)},e.prototype.destroy=function(){this.destroyed||(Se.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var r,i;try{for(var o=Xi(this._connections.keys()),l=o.next();!l.done;l=o.next()){var p=l.value;this._cleanupPeer(p),this._connections.delete(p)}}catch(n){r={error:n}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(r){var i,o,l=this._connections.get(r);if(l)try{for(var p=Xi(l),n=p.next();!n.done;n=p.next()){var s=n.value;s.close()}}catch(c){i={error:c}}finally{try{n&&!n.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var r=this.id;Se.default.log("Disconnect peer with ID:".concat(r)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)Se.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Se.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(r){var i=this;r===void 0&&(r=function(o){}),this._api.listAllPeers().then(function(o){return r(o)}).catch(function(o){return i._abort(Je.ServerError,o)})},e.DEFAULT_KEY="peerjs",e}(vn.EventEmitter);Wh.Peer;const yp=(t,e=document)=>e.querySelector(t),Yo=(t,e=document)=>[...e.querySelectorAll(t)],Gh=(t,e=document)=>{const i=new XPathEvaluator().createExpression(t).evaluate(e,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),o=[];for(let l=0,{snapshotLength:p}=i;l<p;l++)o.push(i.snapshotItem(l));return o},Yh=-1,ks=0,fs=1,ds=2,Oa=3,Ma=4,Ia=5,Ba=6,Jh=7,Xh=8,el=typeof self=="object"?self:globalThis,Sp=(t,e)=>{const r=(o,l)=>(t.set(l,o),o),i=o=>{if(t.has(o))return t.get(o);const[l,p]=e[o];switch(l){case ks:case Yh:return r(p,o);case fs:{const n=r([],o);for(const s of p)n.push(i(s));return n}case ds:{const n=r({},o);for(const[s,c]of p)n[i(s)]=i(c);return n}case Oa:return r(new Date(p),o);case Ma:{const{source:n,flags:s}=p;return r(new RegExp(n,s),o)}case Ia:{const n=r(new Map,o);for(const[s,c]of p)n.set(i(s),i(c));return n}case Ba:{const n=r(new Set,o);for(const s of p)n.add(i(s));return n}case Jh:{const{name:n,message:s}=p;return r(new el[n](s),o)}case Xh:return r(BigInt(p),o);case"BigInt":return r(Object(BigInt(p)),o)}return r(new el[l](p),o)};return i},bp=t=>Sp(new Map,t)(0),pi="",{toString:Cp}={},{keys:Ep}=Object,Qi=t=>{const e=typeof t;if(e!=="object"||!t)return[ks,e];const r=Cp.call(t).slice(8,-1);switch(r){case"Array":return[fs,pi];case"Object":return[ds,pi];case"Date":return[Oa,pi];case"RegExp":return[Ma,pi];case"Map":return[Ia,pi];case"Set":return[Ba,pi]}return r.includes("Array")?[fs,r]:r.includes("Error")?[Jh,r]:[ds,r]},Wn=([t,e])=>t===ks&&(e==="function"||e==="symbol"),wp=(t,e,r,i)=>{const o=(p,n)=>{const s=i.push(p)-1;return r.set(n,s),s},l=p=>{if(r.has(p))return r.get(p);let[n,s]=Qi(p);switch(n){case ks:{let f=p;switch(s){case"bigint":n=Xh,f=p.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+s);f=null;break;case"undefined":return o([Yh],p)}return o([n,f],p)}case fs:{if(s)return o([s,[...p]],p);const f=[],m=o([n,f],p);for(const y of p)f.push(l(y));return m}case ds:{if(s)switch(s){case"BigInt":return o([s,p.toString()],p);case"Boolean":case"Number":case"String":return o([s,p.valueOf()],p)}if(e&&"toJSON"in p)return l(p.toJSON());const f=[],m=o([n,f],p);for(const y of Ep(p))(t||!Wn(Qi(p[y])))&&f.push([l(y),l(p[y])]);return m}case Oa:return o([n,p.toISOString()],p);case Ma:{const{source:f,flags:m}=p;return o([n,{source:f,flags:m}],p)}case Ia:{const f=[],m=o([n,f],p);for(const[y,C]of p)(t||!(Wn(Qi(y))||Wn(Qi(C))))&&f.push([l(y),l(C)]);return m}case Ba:{const f=[],m=o([n,f],p);for(const y of p)(t||!Wn(Qi(y)))&&f.push(l(y));return m}}const{message:c}=p;return o([n,{name:s,message:c}],p)};return l},Tp=(t,{json:e,lossy:r}={})=>{const i=[];return wp(!(e||r),!!e,new Map,i)(t),i};/*! (c) Andrea Giammarchi - ISC */const{parse:Ap,stringify:kp}=JSON,Rp={json:!0,lossy:!0},xp=t=>bp(Ap(t)),Dp=t=>kp(Tp(t,Rp)),Lp=Object.freeze(Object.defineProperty({__proto__:null,parse:xp,stringify:Dp},Symbol.toStringTag,{value:"Module"})),ps="0811fd41-1b6b-49f1-8344-96210ac283f1",Pp="M"+ps,Op="T"+ps,Mp=t=>({value:new Promise(e=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=e,r.postMessage(t)})});/*! (c) Andrea Giammarchi - ISC */const{Int32Array:Jo,Map:tl,SharedArrayBuffer:rl,Uint16Array:Xo}=globalThis,{BYTES_PER_ELEMENT:il}=Jo,{BYTES_PER_ELEMENT:Ip}=Xo,{isArray:Bp}=Array,{notify:Np,wait:Hp,waitAsync:$p}=Atomics,{fromCharCode:Fp}=String,nl=(t,e)=>t?($p||Mp)(e,0):(Hp(e,0),{value:{then:r=>r()}}),Qo=new WeakSet,lo=new WeakMap;let jp=0;const Na=(t,{parse:e,stringify:r,transform:i}=JSON)=>{if(!lo.has(t)){const o=(l,...p)=>t.postMessage({[ps]:p},{transfer:l});lo.set(t,new Proxy(new tl,{has:(l,p)=>typeof p=="string"&&!p.startsWith("_"),get:(l,p)=>p==="then"?null:(...n)=>{const s=jp++;let c=new Jo(new rl(il)),f=[];Qo.has(n.at(-1)||f)&&Qo.delete(f=n.pop()),o(f,s,c,p,i?n.map(i):n);const m=t!==globalThis;return nl(m,c).value.then(()=>{const y=c[0];if(!y)return;const C=Ip*y;return c=new Jo(new rl(C+C%il)),o([],s,c),nl(m,c).value.then(()=>e(Fp(...new Xo(c.buffer).slice(0,y))))})},set(l,p,n){if(!l.size){const s=new tl;t.addEventListener("message",async c=>{var m;const f=(m=c.data)==null?void 0:m[ps];if(Bp(f)){c.stopImmediatePropagation();const[y,C,...b]=f;if(b.length){const[S,u]=b;if(l.has(S)){const _=await l.get(S)(...u);if(_!==void 0){const v=r(_);s.set(y,v),C[0]=v.length}}else throw new Error(`Unsupported action: ${S}`)}else{const S=s.get(y);s.delete(y);for(let u=new Xo(C.buffer),_=0;_<S.length;_++)u[_]=S.charCodeAt(_)}Np(C,0)}})}return!!l.set(p,n)}}))}return lo.get(t)};Na.transfer=(...t)=>(Qo.add(t),t);const Mr="object",sr="function",Up="boolean",Ha="number",_s="string",Qh="undefined",Wp="bigint",Rs="symbol",zp="null",{defineProperty:Zo,getOwnPropertyDescriptor:Vp,getPrototypeOf:Zh,isExtensible:qp,ownKeys:eu,preventExtensions:Kp,set:Gp,setPrototypeOf:Yp}=Reflect,{assign:Jp,create:Xp}=Object,tu=Zh(Int8Array),ho="isArray",ru=(t,e)=>{const{get:r,set:i,value:o}=t;return r&&(t.get=e(r)),i&&(t.set=e(i)),o&&(t.value=e(o)),t},Nt=(t,e)=>[t,e],iu=t=>e=>{const r=typeof e;switch(r){case Mr:if(e==null)return Nt(zp,e);if(e===globalThis)return Nt(Mr,null);case sr:return t(r,e);case Up:case Ha:case _s:case Qh:case Wp:return Nt(r,e);case Rs:if(ea.has(e))return Nt(r,ea.get(e))}throw new Error(`Unable to handle this ${r} type`)},ea=new Map(eu(Symbol).filter(t=>typeof Symbol[t]===Rs).map(t=>[Symbol[t],t])),nu=t=>{for(const[e,r]of ea)if(r===t)return e};function Qp(){return this}const Ci="apply",gs="construct",ms="defineProperty",ta="deleteProperty",ra="get",ia="getOwnPropertyDescriptor",na="getPrototypeOf",sa="has",oa="isExtensible",aa="ownKeys",ca="preventExtensions",la="set",ha="setPrototypeOf",vs="delete",Zp=(t,e)=>{const r=e&&new WeakMap;if(e){const{addEventListener:o}=EventTarget.prototype;Zo(EventTarget.prototype,"addEventListener",{value(l,p,...n){var s;return(s=n.at(0))!=null&&s.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(l,[].concat(n[0].invoke)),delete n[0].invoke),o.call(this,l,p,...n)}})}const i=e&&(o=>{var s;const{currentTarget:l,target:p,type:n}=o;for(const c of((s=r.get(l||p))==null?void 0:s.get(n))||[])o[c]()});return(o,l,p,...n)=>{let s=0;const c=new Map,f=new Map,{[p]:m}=o,y=n.length?Jp(Xp(globalThis),...n):globalThis,C=iu((_,v)=>{if(!c.has(v)){let g;for(;f.has(g=s++););c.set(v,g),f.set(g,v)}return Nt(_,c.get(v))}),b=new FinalizationRegistry(_=>{m(vs,Nt(_s,_))}),S=([_,v])=>{switch(_){case Mr:if(v==null)return y;if(typeof v===Ha)return f.get(v);if(!(v instanceof tu))for(const g in v)v[g]=S(v[g]);return v;case sr:if(typeof v===_s){if(!f.has(v)){const g=function(...T){return e&&T.at(0)instanceof Event&&i(...T),m(Ci,Nt(sr,v),C(this),T.map(C))},E=new WeakRef(g);f.set(v,E),b.register(g,v,E)}return f.get(v).deref()}return f.get(v);case Rs:return nu(v)}return v},u={[Ci]:(_,v,g)=>C(_.apply(v,g)),[gs]:(_,v)=>C(new _(...v)),[ms]:(_,v,g)=>C(Zo(_,v,g)),[ta]:(_,v)=>C(delete _[v]),[na]:_=>C(Zh(_)),[ra]:(_,v)=>C(_[v]),[ia]:(_,v)=>{const g=Vp(_,v);return g?Nt(Mr,ru(g,C)):Nt(Qh,g)},[sa]:(_,v)=>C(v in _),[oa]:_=>C(qp(_)),[aa]:_=>Nt(Mr,eu(_).map(C)),[ca]:_=>C(Kp(_)),[la]:(_,v,g)=>C(Gp(_,v,g)),[ha]:(_,v)=>C(Yp(_,v)),[vs](_){c.delete(f.get(_)),f.delete(_)}};return o[l]=(_,v,...g)=>{switch(_){case Ci:g[0]=S(g[0]),g[1]=g[1].map(S);break;case gs:g[0]=g[0].map(S);break;case ms:{const[E,T]=g;g[0]=S(E);const{get:R,set:h,value:A}=T;R&&(T.get=S(R)),h&&(T.set=S(h)),A&&(T.value=S(A));break}default:g=g.map(S);break}return u[_](S(v),...g)},{proxy:o,[t.toLowerCase()]:y,[`is${t}Proxy`]:()=>!1}}},e_=Zp("Window",!0),t_=t=>{let e=0;const r=new Map,i=new Map,o=Symbol(),l=c=>typeof c===sr?c():c,p=c=>typeof c===Mr&&!!c&&o in c,n=Array[ho],s=iu((c,f)=>{if(o in f)return l(f[o]);if(c===sr){if(!i.has(f)){let m;for(;i.has(m=String(e++)););r.set(f,m),i.set(m,f)}return Nt(c,r.get(f))}if(!(f instanceof tu))for(const m in f)f[m]=s(f[m]);return Nt(c,f)});return(c,f,m)=>{const{[f]:y}=c,C=new Map,b=new FinalizationRegistry(T=>{C.delete(T),y(vs,s(T))}),S=T=>{const[R,h]=T;if(!C.has(h)){const A=R===sr?Qp.bind(T):T,x=new Proxy(A,v),O=new WeakRef(x);C.set(h,O),b.register(x,h,O)}return C.get(h).deref()},u=T=>{const[R,h]=T;switch(R){case Mr:return h===null?globalThis:typeof h===Ha?S(T):h;case sr:return typeof h===_s?i.get(h):S(T);case Rs:return nu(h)}return h},_=(T,R,...h)=>u(y(T,l(R),...h)),v={[Ci]:(T,R,h)=>_(Ci,T,s(R),h.map(s)),[gs]:(T,R)=>_(gs,T,R.map(s)),[ms]:(T,R,h)=>{const{get:A,set:x,value:O}=h;return typeof A===sr&&(h.get=s(A)),typeof x===sr&&(h.set=s(x)),typeof O===sr&&(h.value=s(O)),_(ms,T,s(R),h)},[ta]:(T,R)=>_(ta,T,s(R)),[na]:T=>_(na,T),[ra]:(T,R)=>R===o?T:_(ra,T,s(R)),[ia]:(T,R)=>{const h=_(ia,T,s(R));return h&&ru(h,u)},[sa]:(T,R)=>R===o||_(sa,T,s(R)),[oa]:T=>_(oa,T),[aa]:T=>_(aa,T).map(u),[ca]:T=>_(ca,T),[la]:(T,R,h)=>_(la,T,s(R),s(h)),[ha]:(T,R)=>_(ha,T,s(R))};c[m]=(T,R,h,A)=>{switch(T){case Ci:return u(R).apply(u(h),A.map(u));case vs:{const x=u(R);r.delete(i.get(x)),i.delete(x)}}};const g=new Proxy([Mr,null],v),E=g.Array[ho];return Zo(Array,ho,{value:T=>p(T)?E(T):n(T)}),{[t.toLowerCase()]:g,[`is${t}Proxy`]:p,proxy:c}}},r_=t_("Window"),uo=new WeakMap,su=(t,...e)=>{const r=Na(t,...e);if(!uo.has(r)){const i=t instanceof Worker?e_:r_;uo.set(r,i(r,Pp,Op))}return uo.get(r)};su.transfer=Na.transfer;const i_=()=>new Worker(URL.createObjectURL(new Blob(['const e="object"==typeof self?self:globalThis,t=t=>((t,r)=>{const n=(e,r)=>(t.set(r,e),e),s=o=>{if(t.has(o))return t.get(o);const[a,i]=r[o];switch(a){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},o);for(const[t,r]of i)e[s(t)]=s(r);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,r]of i)e.set(s(t),s(r));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(s(t));return e}case 7:{const{name:t,message:r}=i;return n(new e[t](r),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new e[a](i),o)};return s})(new Map,t)(0),r="",{toString:n}={},{keys:s}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const s=n.call(e).slice(8,-1);switch(s){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),i=(e,{json:t,lossy:r}={})=>{const n=[];return((e,t,r,n)=>{const i=(e,t)=>{const s=n.push(e)-1;return r.set(t,s),s},c=n=>{if(r.has(n))return r.get(n);let[l,u]=o(n);switch(l){case 0:{let t=n;switch(u){case"bigint":l=8,t=n.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return i([-1],n)}return i([l,t],n)}case 1:{if(u)return i([u,[...n]],n);const e=[],t=i([l,e],n);for(const t of n)e.push(c(t));return t}case 2:{if(u)switch(u){case"BigInt":return i([u,n.toString()],n);case"Boolean":case"Number":case"String":return i([u,n.valueOf()],n)}if(t&&"toJSON"in n)return c(n.toJSON());const r=[],f=i([l,r],n);for(const t of s(n))!e&&a(o(n[t]))||r.push([c(t),c(n[t])]);return f}case 3:return i([l,n.toISOString()],n);case 4:{const{source:e,flags:t}=n;return i([l,{source:e,flags:t}],n)}case 5:{const t=[],r=i([l,t],n);for(const[r,s]of n)(e||!a(o(r))&&!a(o(s)))&&t.push([c(r),c(s)]);return r}case 6:{const t=[],r=i([l,t],n);for(const r of n)!e&&a(o(r))||t.push(c(r));return r}}const{message:f}=n;return i([l,{name:u,message:f}],n)};return c})(!(t||r),!!t,new Map,n)(e),n},{parse:c,stringify:l}=JSON,u={json:!0,lossy:!0};var f=Object.freeze({__proto__:null,parse:e=>t(c(e)),stringify:e=>l(i(e,u))});const p="0811fd41-1b6b-49f1-8344-96210ac283f1",d="M"+p,g="T"+p;var y=e=>({value:new Promise((t=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=t,r.postMessage(e)}))})\n/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:w,Map:h,SharedArrayBuffer:m,Uint16Array:b}=globalThis,{BYTES_PER_ELEMENT:v}=w,{BYTES_PER_ELEMENT:S}=b,{isArray:P}=Array,{notify:A,wait:E,waitAsync:M}=Atomics,{fromCharCode:j}=String,$=(e,t)=>e?(M||y)(t,0):(E(t,0),{value:{then:e=>e()}}),_=new WeakSet,x=new WeakMap;let k=0;const T=(e,{parse:t,stringify:r,transform:n}=JSON)=>{if(!x.has(e)){const s=(t,...r)=>e.postMessage({[p]:r},{transfer:t});x.set(e,new Proxy(new h,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(r,o)=>"then"===o?null:(...r)=>{const a=k++;let i=new w(new m(v)),c=[];_.has(r.at(-1)||c)&&_.delete(c=r.pop()),s(c,a,i,o,n?r.map(n):r);const l=e!==globalThis;return $(l,i).value.then((()=>{const e=i[0];if(!e)return;const r=S*e;return i=new w(new m(r+r%v)),s([],a,i),$(l,i).value.then((()=>t(j(...new b(i.buffer).slice(0,e)))))}))},set(t,n,s){if(!t.size){const n=new h;e.addEventListener("message",(async e=>{const s=e.data?.[p];if(P(s)){e.stopImmediatePropagation();const[o,a,...i]=s;if(i.length){const[e,s]=i;if(!t.has(e))throw new Error(`Unsupported action: ${e}`);{const i=await t.get(e)(...s);if(void 0!==i){const e=r(i);n.set(o,e),a[0]=e.length}}}else{const e=n.get(o);n.delete(o);for(let t=new b(a.buffer),r=0;r<e.length;r++)t[r]=e.charCodeAt(r)}A(a,0)}}))}return!!t.set(n,s)}}))}return x.get(e)};T.transfer=(...e)=>(_.add(e),e);const O="object",F="function",W="number",R="string",B="undefined",J="symbol",{defineProperty:L,getOwnPropertyDescriptor:I,getPrototypeOf:H,isExtensible:C,ownKeys:D,preventExtensions:N,set:U,setPrototypeOf:z}=Reflect,{assign:q,create:K}=Object,Y=H(Int8Array),G="isArray",V=(e,t)=>{const{get:r,set:n,value:s}=e;return r&&(e.get=t(r)),n&&(e.set=t(n)),s&&(e.value=t(s)),e},Q=(e,t)=>[e,t],X=e=>t=>{const r=typeof t;switch(r){case O:if(null==t)return Q("null",t);if(t===globalThis)return Q(O,null);case F:return e(r,t);case"boolean":case W:case R:case B:case"bigint":return Q(r,t);case J:if(Z.has(t))return Q(r,Z.get(t))}throw new Error(`Unable to handle this ${r} type`)},Z=new Map(D(Symbol).filter((e=>typeof Symbol[e]===J)).map((e=>[Symbol[e],e]))),ee=e=>{for(const[t,r]of Z)if(r===e)return t};function te(){return this}const re="apply",ne="construct",se="defineProperty",oe="deleteProperty",ae="get",ie="getOwnPropertyDescriptor",ce="getPrototypeOf",le="has",ue="isExtensible",fe="ownKeys",pe="preventExtensions",de="set",ge="setPrototypeOf",ye="delete";var we=((e,t)=>{const r=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;L(EventTarget.prototype,"addEventListener",{value(t,n,...s){return s.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,n,...s)}})}const n=t&&(e=>{const{currentTarget:t,target:n,type:s}=e;for(const o of r.get(t||n)?.get(s)||[])e[o]()});return(r,s,o,...a)=>{let i=0;const c=new Map,l=new Map,{[o]:u}=r,f=a.length?q(K(globalThis),...a):globalThis,p=X(((e,t)=>{if(!c.has(t)){let e;for(;l.has(e=i++););c.set(t,e),l.set(e,t)}return Q(e,c.get(t))})),d=new FinalizationRegistry((e=>{u(ye,Q(R,e))})),g=([e,r])=>{switch(e){case O:if(null==r)return f;if(typeof r===W)return l.get(r);if(!(r instanceof Y))for(const e in r)r[e]=g(r[e]);return r;case F:if(typeof r===R){if(!l.has(r)){const e=function(...e){return t&&e.at(0)instanceof Event&&n(...e),u(re,Q(F,r),p(this),e.map(p))},s=new WeakRef(e);l.set(r,s),d.register(e,r,s)}return l.get(r).deref()}return l.get(r);case J:return ee(r)}return r},y={[re]:(e,t,r)=>p(e.apply(t,r)),[ne]:(e,t)=>p(new e(...t)),[se]:(e,t,r)=>p(L(e,t,r)),[oe]:(e,t)=>p(delete e[t]),[ce]:e=>p(H(e)),[ae]:(e,t)=>p(e[t]),[ie]:(e,t)=>{const r=I(e,t);return r?Q(O,V(r,p)):Q(B,r)},[le]:(e,t)=>p(t in e),[ue]:e=>p(C(e)),[fe]:e=>Q(O,D(e).map(p)),[pe]:e=>p(N(e)),[de]:(e,t,r)=>p(U(e,t,r)),[ge]:(e,t)=>p(z(e,t)),[ye](e){c.delete(l.get(e)),l.delete(e)}};return r[s]=(e,t,...r)=>{switch(e){case re:r[0]=g(r[0]),r[1]=r[1].map(g);break;case ne:r[0]=r[0].map(g);break;case se:{const[e,t]=r;r[0]=g(e);const{get:n,set:s,value:o}=t;n&&(t.get=g(n)),s&&(t.set=g(s)),o&&(t.value=g(o));break}default:r=r.map(g)}return y[e](g(t),...r)},{proxy:r,[e.toLowerCase()]:f,[`is${e}Proxy`]:()=>!1}}})("Window",!0),he=(e=>{let t=0;const r=new Map,n=new Map,s=Symbol(),o=e=>typeof e===F?e():e,a=e=>typeof e===O&&!!e&&s in e,i=Array[G],c=X(((e,a)=>{if(s in a)return o(a[s]);if(e===F){if(!n.has(a)){let e;for(;n.has(e=String(t++)););r.set(a,e),n.set(e,a)}return Q(e,r.get(a))}if(!(a instanceof Y))for(const e in a)a[e]=c(a[e]);return Q(e,a)}));return(t,l,u)=>{const{[l]:f}=t,p=new Map,d=new FinalizationRegistry((e=>{p.delete(e),f(ye,c(e))})),g=e=>{const[t,r]=e;if(!p.has(r)){const n=t===F?te.bind(e):e,s=new Proxy(n,h),o=new WeakRef(s);p.set(r,o),d.register(s,r,o)}return p.get(r).deref()},y=e=>{const[t,r]=e;switch(t){case O:return null===r?globalThis:typeof r===W?g(e):r;case F:return typeof r===R?n.get(r):g(e);case J:return ee(r)}return r},w=(e,t,...r)=>y(f(e,o(t),...r)),h={[re]:(e,t,r)=>w(re,e,c(t),r.map(c)),[ne]:(e,t)=>w(ne,e,t.map(c)),[se]:(e,t,r)=>{const{get:n,set:s,value:o}=r;return typeof n===F&&(r.get=c(n)),typeof s===F&&(r.set=c(s)),typeof o===F&&(r.value=c(o)),w(se,e,c(t),r)},[oe]:(e,t)=>w(oe,e,c(t)),[ce]:e=>w(ce,e),[ae]:(e,t)=>t===s?e:w(ae,e,c(t)),[ie]:(e,t)=>{const r=w(ie,e,c(t));return r&&V(r,y)},[le]:(e,t)=>t===s||w(le,e,c(t)),[ue]:e=>w(ue,e),[fe]:e=>w(fe,e).map(y),[pe]:e=>w(pe,e),[de]:(e,t,r)=>w(de,e,c(t),c(r)),[ge]:(e,t)=>w(ge,e,c(t))};t[u]=(e,t,s,o)=>{switch(e){case re:return y(t).apply(y(s),o.map(y));case ye:{const e=y(t);r.delete(n.get(e)),n.delete(e)}}};const m=new Proxy([O,null],h),b=m.Array[G];return L(Array,G,{value:e=>a(e)?b(e):i(e)}),{[e.toLowerCase()]:m,[`is${e}Proxy`]:a,proxy:t}}})("Window");const me=new WeakMap,be=(e,...t)=>{const r=T(e,...t);if(!me.has(r)){const t=e instanceof Worker?we:he;me.set(r,t(r,d,g))}return me.get(r)};be.transfer=T.transfer;const{isArray:ve}=Array,{assign:Se,create:Pe,defineProperties:Ae,defineProperty:Ee,entries:Me}=Object,{all:je,resolve:$e}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),_e=(e,t=location.href)=>new URL(e,t).href;Promise.withResolvers||(Promise.withResolvers=function(){var e,t,r=new this((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}});const xe=e=>e.arrayBuffer(),ke=e=>e.json(),Te=e=>e.text(),Oe=e=>e.replace(/^[^\\r\\n]+$/,(e=>e.trim())),Fe=new WeakMap,We=e=>{const t=e||console,r={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>r.stderr(...e),stdout:(...e)=>r.stdout(...e),async get(e){const t=await e;return Fe.set(t,r),t}}},Re=({FS:e,PATH:t,PATH_FS:r},n,s)=>{const o=r.resolve(n);return e.mkdirTree(t.dirname(o)),e.writeFile(o,new Uint8Array(s),{canOwn:!0})},Be=e=>{const t=e.split("/");return t.pop(),t.join("/")},Je=(e,t)=>{const r=[];for(const n of t.split("/"))"."!==n&&(r.push(n),n&&e.mkdir(r.join("/")))},Le=(e,t)=>{const r=[];for(const e of t.split("/"))switch(e){case"":case".":break;case"..":r.pop();break;default:r.push(e)}return[e.cwd()].concat(r).join("/").replace(/^\\/+/,"/")},Ie=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},He=new WeakMap,Ce=(e,t,r)=>je((e=>{for(const{files:t,to_file:r,from:n=""}of e){if(void 0!==t&&void 0!==r)throw new Error("Cannot use \'to_file\' and \'files\' parameters together!");if(void 0===t&&void 0===r&&n.endsWith("/"))throw new Error(`Couldn\'t determine the filename from the path ${n}, please supply \'to_file\' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:r,files:n})=>{if(ve(n))return n.map((r=>({url:Ie([e,r]),path:Ie([t,r])})));const s=r||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:Ie([t,s])}]}))})(r).map((({url:n,path:s})=>((e,t)=>fetch(_e(t,He.get(e))))(r,n).then(xe).then((r=>e.writeFile(t,s,r)))))),De=(e,t,r)=>{e.registerJsModule(t,r)},Ne=(e,t)=>e.runPython(Oe(t)),Ue=(e,t)=>e.runPythonAsync(Oe(t)),ze=async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.globals.get(n);for(const e of s)[o,a]=[a,a[e]];await a.call(o,r)};var qe={type:"micropython",module:(e="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,r){const{stderr:n,stdout:s,get:o}=We();r=r.replace(/\\.m?js$/,".wasm");const a=await o(e({stderr:n,stdout:s,url:r}));return t.fetch&&await Ce(this,a,t.fetch),a},registerJSModule:De,run:Ne,runAsync:Ue,runEvent:ze,transform:(e,t)=>t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:r}},n,s)=>Re({FS:e,PATH:t,PATH_FS:r},n,s)};const Ke={dict_converter:Object.fromEntries};var Ye={type:"pyodide",module:(e="0.23.4")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,r){const{stderr:n,stdout:s,get:o}=We(),a=r.slice(0,r.lastIndexOf("/")),i=await o(e({stderr:n,stdout:s,indexURL:a}));if(t.fetch&&await Ce(this,i,t.fetch),t.packages){await i.loadPackage("micropip");const e=await i.pyimport("micropip");await e.install(t.packages),e.destroy()}return i},registerJSModule:De,run:Ne,runAsync:Ue,runEvent:ze,transform:(e,t)=>t instanceof e.ffi.PyProxy?t.toJs(Ke):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:r}},n,s)=>Re({FS:e,PATH:t,PATH_FS:r},n,s)};const Ge="ruby-wasm-wasi",Ve=Ge.replace(/\\W+/g,"_");var Qe={type:Ge,experimental:!0,module:(e="2.0.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await n.arrayBuffer()),{vm:o}=await e(s);return t.fetch&&await Ce(this,o,t.fetch),o},registerJSModule(e,t,r){const n=[\'require "js"\'];for(const[e,t]of Me(r)){const r=`__module_${Ve}_${e}`;globalThis[r]=t,n.push(`$${e}=JS.global[:${r}]`)}this.run(e,n.join(";"))},run:(e,t)=>e.eval(Oe(t)),runAsync:(e,t)=>e.evalAsync(Oe(t)),async runEvent(e,t,r){if(/^xworker\\.(on\\w+)$/.test(t)){const{$1:t}=RegExp,n=`__module_${Ve}_event`;globalThis[n]=r,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${n}])`),delete globalThis[n]}else{const n=this.run(e,`method(:${t})`);await n.call(t,e.wrap(r))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${Ge}`)}};var Xe={type:"wasmoon",module:(e="1.15.0")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},r){const{stderr:n,stdout:s,get:o}=We(),a=await o((new e).createEngine());return a.global.getTable(t.Base,(e=>{a.global.setField(e,"print",s),a.global.setField(e,"printErr",n)})),r.fetch&&await Ce(this,a,r.fetch),a},registerJSModule:(e,t,r)=>{for(const[t,n]of Me(r))e.global.set(t,n)},run:(e,t)=>e.doStringSync(Oe(t)),runAsync:(e,t)=>e.doString(Oe(t)),runEvent:async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.global.get(n);for(const e of s)[o,a]=[a,a[e]];await a.call(o,r)},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,r)=>((e,t,r)=>(Je(e,Be(t)),t=Le(e,t),e.writeFile(t,new Uint8Array(r),{canOwn:!0})))(e,t,r)};const Ze=new Map,et=new Map,tt=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[r,...n]=t.split("@"),s=Ze.get(r),o=/^https?:\\/\\//i.test(n)?n.join("@"):s.module(...n);e.set(t,{url:o,module:import(o),engine:s.engine.bind(s)})}const{url:r,module:n,engine:s}=e.get(t);return(e,o)=>n.then((n=>{et.set(t,e);const a=e?.fetch;return a&&He.set(a,o),s(n,e,r)}))}}),rt=e=>{for(const t of[].concat(e.type))Ze.set(t,e)};for(const e of[qe,Ye,Qe,Xe])rt(e);const nt=async e=>(await import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")).parse(e);try{new SharedArrayBuffer(4)}catch(e){throw new Error(["Unable to use SharedArrayBuffer due insecure environment.","Please read requirements in MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements"].join("\\n"))}let st,ot,at;const it=(e,t)=>{addEventListener(e,t||(async t=>{try{await st,ot(`xworker.on${e}`,t)}catch(e){postMessage(e)}}),!!t&&{once:!0})},{parse:ct,stringify:lt}=f,{proxy:ut,window:ft,isWindowProxy:pt}=be(self,{parse:ct,stringify:lt,transform:e=>at?at(e):e}),dt={sync:ut,window:ft,isWindowProxy:pt,onmessage:console.info,onerror:console.error,onmessageerror:console.warn,postMessage:postMessage.bind(self)};it("message",(({data:{options:e,config:t,code:r,hooks:n}})=>{st=(async()=>{try{const{type:s,version:o,config:a,async:i}=e,c=await((e,t,r={})=>{if(t)if(t.endsWith(".json"))r=fetch(t).then(ke),t=_e(t);else if(t.endsWith(".toml"))r=fetch(t).then(Te).then(nt),t=_e(t);else if(!t.endsWith(".txt")){try{r=JSON.parse(t)}catch(e){r=nt(t)}t=_e("./config.txt")}return $e(r).then((r=>tt[e](r,t)))})(((e,t="")=>`${e}@${t}`.replace(/@$/,""))(s,o),t,a),l=Pe(Ze.get(s)),u="run"+(i?"Async":"");if(n){const{beforeRun:e,beforeRunAsync:t,afterRun:r,afterRunAsync:s}=n,o=r||s,a=e||t;if(o){const e=l[u].bind(l);l[u]=(t,r)=>e(t,`${r}\\n${o}`)}if(a){const e=l[u].bind(l);l[u]=(t,r)=>e(t,`${a}\\n${r}`)}}return l.registerJSModule(c,"polyscript",{xworker:dt}),ot=l.runEvent.bind(l,c),at=l.transform.bind(l,c),await l[u](c,r),c}catch(e){postMessage(e)}})(),it("error"),it("message"),it("messageerror")}));\n'],{type:"application/javascript"})),{type:"module"}),{isArray:n_}=Array,{assign:ou,create:au,defineProperties:s_,defineProperty:cu,entries:lu}=Object,{all:$a,resolve:hu}=new Proxy(Promise,{get:(t,e)=>t[e].bind(t)}),hn=(t,e=location.href)=>new URL(t,e).href,o_=t=>t.arrayBuffer(),a_=t=>t.json(),Fa=t=>t.text(),sl=[["beforeRun","codeBeforeRunWorker"],["beforeRunAsync","codeBeforeRunWorkerAsync"],["afterRun","codeAfterRunWorker"],["afterRunAsync","codeAfterRunWorkerAsync"]];class uu{constructor(e,r){var i;this.interpreter=e,this.onWorkerReady=r.onWorkerReady;for(const[o,l]of sl)this[o]=(i=r[l])==null?void 0:i.call(r)}get stringHooks(){const e={};for(const[r]of sl)this[r]&&(e[r]=this[r]);return e}}const fu=(...t)=>function(r,i){var c;const o=i_(),{postMessage:l}=o,p=this instanceof uu;if(t.length){const[f,m]=t;i=ou({},i||{type:f,version:m}),i.type||(i.type=f)}const n=hn(typeof i.config=="string"?i.config:"./config.txt"),s=fetch(r).then(Fa).then(f=>{const m=p?this.stringHooks:void 0;l.call(o,{options:i,config:n,code:f,hooks:m})});return s_(o,{postMessage:{value:(f,...m)=>s.then(()=>l.call(o,f,...m))},sync:{value:su(o,Lp).proxy},onerror:{writable:!0,configurable:!0,value:console.error}}),p&&((c=this.onWorkerReady)==null||c.call(this,this.interpreter,o)),o.addEventListener("message",f=>{const{data:m}=f;m instanceof Error&&(f.stopImmediatePropagation(),o.onerror(Object.create(f,{type:{value:"error"},error:{value:m}})))}),o},c_="modulepreload",l_=function(t){return"/mpyc/"+t},ol={},du=function(e,r,i){if(!r||r.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=l_(l),l in ol)return;ol[l]=!0;const p=l.endsWith(".css"),n=p?'[rel="stylesheet"]':"";if(!!i)for(let f=o.length-1;f>=0;f--){const m=o[f];if(m.href===l&&(!p||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${n}`))return;const c=document.createElement("link");if(c.rel=p?"stylesheet":c_,p||(c.as="script",c.crossOrigin=""),c.href=l,document.head.appendChild(c),p)return new Promise((f,m)=>{c.addEventListener("load",f),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e()).catch(l=>{const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=l,window.dispatchEvent(p),!p.defaultPrevented)throw l})};Promise.withResolvers||(Promise.withResolvers=function(){var e,r,i=new this(function(o,l){e=o,r=l});return{resolve:e,reject:r,promise:i}});const Ei=t=>t.replace(/^[^\r\n]+$/,e=>e.trim()),pu=new WeakMap,ja=t=>{const e=t||console,r={stderr:(e.stderr||console.error).bind(e),stdout:(e.stdout||console.log).bind(e)};return{stderr:(...i)=>r.stderr(...i),stdout:(...i)=>r.stdout(...i),async get(i){const o=await i;return pu.set(o,r),o}}},_u=({FS:t,PATH:e,PATH_FS:r},i,o)=>{const l=r.resolve(i);return t.mkdirTree(e.dirname(l)),t.writeFile(l,new Uint8Array(o),{canOwn:!0})},h_=(t,e,r)=>(f_(t,u_(e)),e=d_(t,e),t.writeFile(e,new Uint8Array(r),{canOwn:!0})),u_=t=>{const e=t.split("/");return e.pop(),e.join("/")},f_=(t,e)=>{const r=[];for(const i of e.split("/"))i!=="."&&(r.push(i),i&&t.mkdir(r.join("/")))},d_=(t,e)=>{const r=[];for(const i of e.split("/"))switch(i){case"":break;case".":break;case"..":r.pop();break;default:r.push(i)}return[t.cwd()].concat(r).join("/").replace(/^\/+/,"/")},p_=t=>{for(const{files:e,to_file:r,from:i=""}of t){if(e!==void 0&&r!==void 0)throw new Error("Cannot use 'to_file' and 'files' parameters together!");if(e===void 0&&r===void 0&&i.endsWith("/"))throw new Error(`Couldn't determine the filename from the path ${i}, please supply 'to_file' parameter.`)}return t.flatMap(({from:e="",to_folder:r=".",to_file:i,files:o})=>{if(n_(o))return o.map(p=>({url:fo([e,p]),path:fo([r,p])}));const l=i||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:fo([r,l])}]})},fo=t=>{const e=t.map(r=>r.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(r=>r!==""&&r!==".").join("/");return t[0].startsWith("/")?`/${e}`:e},__=(t,e)=>fetch(hn(e,gu.get(t))),gu=new WeakMap,xs=(t,e,r)=>$a(p_(r).map(({url:i,path:o})=>__(r,i).then(o_).then(l=>t.writeFile(e,o,l)))),mu=(t,e,r)=>{t.registerJsModule(e,r)},vu=(t,e)=>t.runPython(Ei(e)),yu=(t,e)=>t.runPythonAsync(Ei(e)),Su=async(t,e,r)=>{const[i,...o]=e.split(".");let l=t.globals.get(i),p;for(const n of o)[p,l]=[l,l[n]];await l.call(p,r)},g_="micropython",m_={type:g_,module:(t="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${t}/micropython.mjs`,async engine({loadMicroPython:t},e,r){const{stderr:i,stdout:o,get:l}=ja();r=r.replace(/\.m?js$/,".wasm");const p=await l(t({stderr:i,stdout:o,url:r}));return e.fetch&&await xs(this,p,e.fetch),p},registerJSModule:mu,run:vu,runAsync:yu,runEvent:Su,transform:(t,e)=>e,writeFile:({FS:t,_module:{PATH:e,PATH_FS:r}},i,o)=>_u({FS:t,PATH:e,PATH_FS:r},i,o)},v_="pyodide",y_={dict_converter:Object.fromEntries},S_={type:v_,module:(t="0.23.4")=>`https://cdn.jsdelivr.net/pyodide/v${t}/full/pyodide.mjs`,async engine({loadPyodide:t},e,r){const{stderr:i,stdout:o,get:l}=ja(),p=r.slice(0,r.lastIndexOf("/")),n=await l(t({stderr:i,stdout:o,indexURL:p}));if(e.fetch&&await xs(this,n,e.fetch),e.packages){await n.loadPackage("micropip");const s=await n.pyimport("micropip");await s.install(e.packages),s.destroy()}return n},registerJSModule:mu,run:vu,runAsync:yu,runEvent:Su,transform:(t,e)=>e instanceof t.ffi.PyProxy?e.toJs(y_):e,writeFile:({FS:t,PATH:e,_module:{PATH_FS:r}},i,o)=>_u({FS:t,PATH:e,PATH_FS:r},i,o)},ua="ruby-wasm-wasi",al=ua.replace(/\W+/g,"_"),b_={type:ua,experimental:!0,module:(t="2.0.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${t}/dist/browser.esm.js`,async engine({DefaultRubyVM:t},e,r){const i=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),o=await WebAssembly.compile(await i.arrayBuffer()),{vm:l}=await t(o);return e.fetch&&await xs(this,l,e.fetch),l},registerJSModule(t,e,r){const i=['require "js"'];for(const[o,l]of lu(r)){const p=`__module_${al}_${o}`;globalThis[p]=l,i.push(`$${o}=JS.global[:${p}]`)}this.run(t,i.join(";"))},run:(t,e)=>t.eval(Ei(e)),runAsync:(t,e)=>t.evalAsync(Ei(e)),async runEvent(t,e,r){if(/^xworker\.(on\w+)$/.test(e)){const{$1:i}=RegExp,o=`__module_${al}_event`;globalThis[o]=r,this.run(t,`require "js";$xworker.call("${i}",JS.global[:${o}])`),delete globalThis[o]}else await this.run(t,`method(:${e})`).call(e,t.wrap(r))},transform:(t,e)=>e,writeFile:()=>{throw new Error(`writeFile is not supported in ${ua}`)}},C_="wasmoon",E_={type:C_,module:(t="1.15.0")=>`https://cdn.jsdelivr.net/npm/wasmoon@${t}/+esm`,async engine({LuaFactory:t,LuaLibraries:e},r){const{stderr:i,stdout:o,get:l}=ja(),p=await l(new t().createEngine());return p.global.getTable(e.Base,n=>{p.global.setField(n,"print",o),p.global.setField(n,"printErr",i)}),r.fetch&&await xs(this,p,r.fetch),p},registerJSModule:(t,e,r)=>{for(const[i,o]of lu(r))t.global.set(i,o)},run:(t,e)=>t.doStringSync(Ei(e)),runAsync:(t,e)=>t.doString(Ei(e)),runEvent:async(t,e,r)=>{const[i,...o]=e.split(".");let l=t.global.get(i),p;for(const n of o)[p,l]=[l,l[n]];await l.call(p,r)},transform:(t,e)=>e,writeFile:({cmodule:{module:{FS:t}}},e,r)=>h_(t,e,r)},yn=new Map,bu=new Map,Cu=[],Ds=[],w_=new Proxy(new Map,{get(t,e){if(!t.has(e)){const[l,...p]=e.split("@"),n=yn.get(l),s=/^https?:\/\//i.test(p)?p.join("@"):n.module(...p);t.set(e,{url:s,module:du(()=>import(s),[]),engine:n.engine.bind(n)})}const{url:r,module:i,engine:o}=t.get(e);return(l,p)=>i.then(n=>{bu.set(e,l);const s=l==null?void 0:l.fetch;return s&&gu.set(s,p),o(n,l,r)})}}),T_=t=>{for(const e of[].concat(t.type))yn.set(e,t),Cu.push(`script[type="${e}"]`),Ds.push(`${e}-`)};for(const t of[m_,S_,b_,E_])T_(t);const A_="https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js",cl=async t=>(await du(()=>import(A_),[])).parse(t),k_=(t,e,r={})=>{if(e){if(e.endsWith(".json"))r=fetch(e).then(a_),e=hn(e);else if(e.endsWith(".toml"))r=fetch(e).then(Fa).then(cl),e=hn(e);else if(!e.endsWith(".txt")){try{r=JSON.parse(e)}catch{r=cl(e)}e=hn("./config.txt")}}return hu(r).then(i=>w_[t](i,e))},Eu=(t,e="")=>`${t}@${e}`.replace(/@$/,""),R_=t=>{let e=t;for(;e.parentNode;)e=e.parentNode;return e},wu=(t,e)=>{const r=R_(t);return r.getElementById(e)||yp(e,r)},cn=new WeakMap,x_={get(){let t=cn.get(this);return t||(t=document.createElement(`${this.type}-script`),cn.set(this,t),_n(this)),t},set(t){typeof t=="string"?cn.set(this,wu(this,t)):(cn.set(this,t),_n(this))}},fa=new WeakMap,mr=new Map,D_=async(t,e,r,i)=>{const o=yn.get(t.type);o.experimental&&console.warn(`The ${t.type} interpreter is experimental`);const[l,p]=await $a([fa.get(t).interpreter,e]);try{return cu(document,"currentScript",{configurable:!0,get:()=>t}),o.registerJSModule(l,"polyscript",{XWorker:r}),o[i?"runAsync":"run"](l,p)}finally{delete document.currentScript}},po=(t,e)=>{const r=t==null?void 0:t.value;return r?e+r:""},Tu=(t,e,r,i,o)=>{if(!mr.has(e)){const l={interpreter:k_(r,o),queue:hu(),XWorker:fu(t,i)};mr.set(e,l),mr.has(t)||mr.set(t,l)}return mr.get(e)},_n=async t=>{if(fa.has(t)){const{target:e}=t;e&&(t.closest("head")?document.body.append(e):t.after(e))}else{const{attributes:{async:e,config:r,env:i,target:o,version:l},src:p,type:n}=t,s=l==null?void 0:l.value,c=Eu(n,s),f=po(o,"");let m=po(r,"|");const y=po(i,"")||`${c}${m}`;m=m.slice(1);const C=Tu(n,y,c,s,m);fa.set(cu(t,"target",x_),C),f&&cn.set(t,wu(t,f));const b=p?fetch(p).then(Fa):t.textContent;C.queue=C.queue.then(()=>D_(t,b,C.XWorker,!!e))}};new Proxy(au(null),{get:(t,e)=>Au(e)});const Au=async t=>{if(mr.has(t)){const{interpreter:r,queue:i}=mr.get(t);return(await $a([r,i]))[0]}const e=mr.size?`Available interpreters are: ${[...mr.keys()].map(r=>`"${r}"`).join(", ")}.`:"There are no interpreters in this page.";throw new Error(`The interpreter "${t}" was not found. ${e}`)},ku=async t=>{const{type:e,currentTarget:r}=t;for(let{name:i,value:o,ownerElement:l}of Gh(`./@*[${Ds.map(p=>`name()="${p}${e}"`).join(" or ")}]`,r)){i=i.slice(0,-(e.length+1));const p=await Au(l.getAttribute(`${i}-env`)||i);yn.get(i).runEvent(p,o,t)}},Ru=t=>{for(let{name:e,ownerElement:r}of Gh(`.//@*[${Ds.map(i=>`starts-with(name(),"${i}")`).join(" or ")}]`,t))e=e.slice(e.lastIndexOf("-")+1),e!=="env"&&r.addEventListener(e,ku)},da=[],L_=new Map,P_=new Map,ll=t=>{for(const e of da)if(t.matches(e)){const r=L_.get(e),{resolve:i}=P_.get(r),{options:o,known:l}=O_.get(r);if(!l.has(t)){l.add(t);const{interpreter:p,version:n,config:s,env:c,onInterpreterReady:f}=o,m=Eu(p,n),y=c||`${m}${s?`|${s}`:""}`,{interpreter:C,XWorker:b}=Tu(p,y,m,n,s);C.then(S=>{const u=au(yn.get(p)),{onBeforeRun:_,onBeforeRunAsync:v,onAfterRun:g,onAfterRunAsync:E}=o,T=new uu(S,o),R=function(...x){return b.apply(T,x)};for(const[A,[x,O]]of[["run",[_,g]]]){const H=u[A];u[A]=function(N,B){x&&x.call(this,h,t);const ee=H.call(this,N,B);return O&&O.call(this,h,t),ee}}for(const[A,[x,O]]of[["runAsync",[v,E]]]){const H=u[A];u[A]=async function(N,B){x&&await x.call(this,h,t);const ee=await H.call(this,N,B);return O&&await O.call(this,h,t),ee}}u.registerJSModule(S,"polyscript",{XWorker:R});const h={type:r,interpreter:S,XWorker:R,io:pu.get(S),config:structuredClone(bu.get(m)),run:u.run.bind(u,S),runAsync:u.runAsync.bind(u,S),runEvent:u.runEvent.bind(u,S)};i(h),f==null||f(h,t)})}}},O_=new Map,M_=fu(),pa=Cu.join(","),I_=new MutationObserver(t=>{for(const{type:e,target:r,attributeName:i,addedNodes:o}of t){if(e==="attributes"){const l=i.lastIndexOf("-")+1;if(l){const p=i.slice(0,l);for(const n of Ds)if(p===n){const s=i.slice(l);if(s!=="env"){const c=r.hasAttribute(i)?"add":"remove";r[`${c}EventListener`](s,ku)}break}}continue}for(const l of o)if(l.nodeType===1)if(Ru(l),l.matches(pa))_n(l);else{if(Yo(pa,l).forEach(_n),!da.length)continue;ll(l),Yo(da.join(","),l).forEach(ll)}}}),xu=t=>(I_.observe(t,{childList:!0,subtree:!0,attributes:!0}),t),{attachShadow:B_}=Element.prototype;ou(Element.prototype,{attachShadow(t){return xu(B_.call(this,t))}});Ru(xu(document));Yo(pa,document).forEach(_n);class N_{constructor(e,r){nr(this,"peer");nr(this,"conns",new Map);nr(this,"worker");nr(this,"onPeerConnectedHook",()=>{});nr(this,"onPeerDisconnectedHook",()=>{});nr(this,"onPeerJSUserDataReceivedHook",()=>{});nr(this,"onPeerIDReadyHook",()=>{});nr(this,"onPyScriptDisplayHook",()=>{});nr(this,"onRuntimeReadyHook",()=>{});this.peer=this.newPeerJS(e),this.worker=this.newWorker(this.conns,r)}getPeers(e=!1){let r=Array.from(this.conns,([i,o])=>o.peer);return e&&r.push(this.peer.id),r.sort()}broadcastMessage(e){this.conns.forEach(r=>{r.send(e)})}connectToPeer(e){let r=this.peer.connect(e,{reliable:!0});r.on("open",()=>{this.sendKnownPeers(r),this.conns.set(r.peer,r),this.onPeerConnectedHook(r.peer,!0,this)}),r.on("error",i=>{this.onPeerConnectedHook(r.peer,!1,this),console.log(i)}),this.ready(r)}runMPyCDemo(e=!1){let r=this.getPeers(!0),i=r.findIndex(o=>o===this.peer.id);console.log("peers:",r),console.log("my id:",this.peer.id),console.log("my pid:",i),this.postWorkerMessage({init:{pid:i,parties:r,is_async:e,no_async:!e}})}close(){this.peer.destroy(),this.worker.terminate()}newPeerJS(e){var r;return e?r=new us(e):r=new us,this.addPeerEvents(r),r}newWorker(e,r){let i=M_("./py/worker.py",{async:!0,type:"pyodide",config:r});return i.sync.myFunc=function(o){console.log("myFunc",o)},i.onmessage=o=>{var p;console.log("(mpyc.js:worker:onmessage): --------------- data",o.data);let l=JSON.parse(o.data);l.display&&this.onPyScriptDisplayHook(l.display,this),l.peerJS&&(console.log("++++++++++++++ peerJS data"),(p=e.get(l.peerJS.peerID))==null||p.send({mpycMessage:l.peerJS.message}))},i}addPeerEvents(e){e.on("open",r=>{this.onPeerIDReadyHook(r,this)}),e.on("connection",r=>{r.on("open",()=>{this.sendKnownPeers(r)}),this.conns.set(r.peer,r),this.onPeerConnectedHook(r.peer,!0,this),this.ready(r)})}sendKnownPeers(e){e.send({knownPeers:this.getPeers()})}ready(e){e.on("data",r=>{console.log("Data received"),console.log(r),this.processNewPeers(r==null?void 0:r.knownPeers),this.processMPyCMessage(e.peer,r==null?void 0:r.mpycMessage),this.onPeerJSUserDataReceivedHook(e.peer,r,this)}),e.on("close",()=>{this.conns.delete(e.peer),this.onPeerDisconnectedHook(e.peer,this)})}processNewPeers(e){e&&e.forEach(r=>{!this.conns.get(r)&&r!=this.peer.id&&this.connectToPeer(r)})}processMPyCMessage(e,r){r&&this.postWorkerMessage({peerJS:{peerID:e,message:r}})}postWorkerMessage(e){this.worker.postMessage(this.workMessage(e))}workMessage(e){return e={init:null,peerJS:null,...e},e.peerJS&&(e.peerJS.message={runtime_message:null,ready_message:null,...e.peerJS.message}),e}}var dt="top",At="bottom",kt="right",pt="left",Ls="auto",Ni=[dt,At,kt,pt],ei="start",wi="end",Du="clippingParents",Ua="viewport",vi="popper",Lu="reference",_a=Ni.reduce(function(t,e){return t.concat([e+"-"+ei,e+"-"+wi])},[]),Wa=[].concat(Ni,[Ls]).reduce(function(t,e){return t.concat([e,e+"-"+ei,e+"-"+wi])},[]),Pu="beforeRead",Ou="read",Mu="afterRead",Iu="beforeMain",Bu="main",Nu="afterMain",Hu="beforeWrite",$u="write",Fu="afterWrite",ju=[Pu,Ou,Mu,Iu,Bu,Nu,Hu,$u,Fu];function cr(t){return t?(t.nodeName||"").toLowerCase():null}function Rt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ti(t){var e=Rt(t).Element;return t instanceof e||t instanceof Element}function Ht(t){var e=Rt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function za(t){if(typeof ShadowRoot>"u")return!1;var e=Rt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function H_(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var i=e.styles[r]||{},o=e.attributes[r]||{},l=e.elements[r];!Ht(l)||!cr(l)||(Object.assign(l.style,i),Object.keys(o).forEach(function(p){var n=o[p];n===!1?l.removeAttribute(p):l.setAttribute(p,n===!0?"":n)}))})}function $_(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(i){var o=e.elements[i],l=e.attributes[i]||{},p=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:r[i]),n=p.reduce(function(s,c){return s[c]="",s},{});!Ht(o)||!cr(o)||(Object.assign(o.style,n),Object.keys(l).forEach(function(s){o.removeAttribute(s)}))})}}const Va={name:"applyStyles",enabled:!0,phase:"write",fn:H_,effect:$_,requires:["computeStyles"]};function or(t){return t.split("-")[0]}var Zr=Math.max,ys=Math.min,Ti=Math.round;function ga(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Uu(){return!/^((?!chrome|android).)*safari/i.test(ga())}function Ai(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=t.getBoundingClientRect(),o=1,l=1;e&&Ht(t)&&(o=t.offsetWidth>0&&Ti(i.width)/t.offsetWidth||1,l=t.offsetHeight>0&&Ti(i.height)/t.offsetHeight||1);var p=ti(t)?Rt(t):window,n=p.visualViewport,s=!Uu()&&r,c=(i.left+(s&&n?n.offsetLeft:0))/o,f=(i.top+(s&&n?n.offsetTop:0))/l,m=i.width/o,y=i.height/l;return{width:m,height:y,top:f,right:c+m,bottom:f+y,left:c,x:c,y:f}}function qa(t){var e=Ai(t),r=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:i}}function Wu(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&za(r)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function br(t){return Rt(t).getComputedStyle(t)}function F_(t){return["table","td","th"].indexOf(cr(t))>=0}function $r(t){return((ti(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ps(t){return cr(t)==="html"?t:t.assignedSlot||t.parentNode||(za(t)?t.host:null)||$r(t)}function hl(t){return!Ht(t)||br(t).position==="fixed"?null:t.offsetParent}function j_(t){var e=/firefox/i.test(ga()),r=/Trident/i.test(ga());if(r&&Ht(t)){var i=br(t);if(i.position==="fixed")return null}var o=Ps(t);for(za(o)&&(o=o.host);Ht(o)&&["html","body"].indexOf(cr(o))<0;){var l=br(o);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||e&&l.willChange==="filter"||e&&l.filter&&l.filter!=="none")return o;o=o.parentNode}return null}function Sn(t){for(var e=Rt(t),r=hl(t);r&&F_(r)&&br(r).position==="static";)r=hl(r);return r&&(cr(r)==="html"||cr(r)==="body"&&br(r).position==="static")?e:r||j_(t)||e}function Ka(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function un(t,e,r){return Zr(t,ys(e,r))}function U_(t,e,r){var i=un(t,e,r);return i>r?r:i}function zu(){return{top:0,right:0,bottom:0,left:0}}function Vu(t){return Object.assign({},zu(),t)}function qu(t,e){return e.reduce(function(r,i){return r[i]=t,r},{})}var W_=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Vu(typeof e!="number"?e:qu(e,Ni))};function z_(t){var e,r=t.state,i=t.name,o=t.options,l=r.elements.arrow,p=r.modifiersData.popperOffsets,n=or(r.placement),s=Ka(n),c=[pt,kt].indexOf(n)>=0,f=c?"height":"width";if(!(!l||!p)){var m=W_(o.padding,r),y=qa(l),C=s==="y"?dt:pt,b=s==="y"?At:kt,S=r.rects.reference[f]+r.rects.reference[s]-p[s]-r.rects.popper[f],u=p[s]-r.rects.reference[s],_=Sn(l),v=_?s==="y"?_.clientHeight||0:_.clientWidth||0:0,g=S/2-u/2,E=m[C],T=v-y[f]-m[b],R=v/2-y[f]/2+g,h=un(E,R,T),A=s;r.modifiersData[i]=(e={},e[A]=h,e.centerOffset=h-R,e)}}function V_(t){var e=t.state,r=t.options,i=r.element,o=i===void 0?"[data-popper-arrow]":i;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||Wu(e.elements.popper,o)&&(e.elements.arrow=o))}const Ku={name:"arrow",enabled:!0,phase:"main",fn:z_,effect:V_,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ki(t){return t.split("-")[1]}var q_={top:"auto",right:"auto",bottom:"auto",left:"auto"};function K_(t,e){var r=t.x,i=t.y,o=e.devicePixelRatio||1;return{x:Ti(r*o)/o||0,y:Ti(i*o)/o||0}}function ul(t){var e,r=t.popper,i=t.popperRect,o=t.placement,l=t.variation,p=t.offsets,n=t.position,s=t.gpuAcceleration,c=t.adaptive,f=t.roundOffsets,m=t.isFixed,y=p.x,C=y===void 0?0:y,b=p.y,S=b===void 0?0:b,u=typeof f=="function"?f({x:C,y:S}):{x:C,y:S};C=u.x,S=u.y;var _=p.hasOwnProperty("x"),v=p.hasOwnProperty("y"),g=pt,E=dt,T=window;if(c){var R=Sn(r),h="clientHeight",A="clientWidth";if(R===Rt(r)&&(R=$r(r),br(R).position!=="static"&&n==="absolute"&&(h="scrollHeight",A="scrollWidth")),R=R,o===dt||(o===pt||o===kt)&&l===wi){E=At;var x=m&&R===T&&T.visualViewport?T.visualViewport.height:R[h];S-=x-i.height,S*=s?1:-1}if(o===pt||(o===dt||o===At)&&l===wi){g=kt;var O=m&&R===T&&T.visualViewport?T.visualViewport.width:R[A];C-=O-i.width,C*=s?1:-1}}var H=Object.assign({position:n},c&&q_),N=f===!0?K_({x:C,y:S},Rt(r)):{x:C,y:S};if(C=N.x,S=N.y,s){var B;return Object.assign({},H,(B={},B[E]=v?"0":"",B[g]=_?"0":"",B.transform=(T.devicePixelRatio||1)<=1?"translate("+C+"px, "+S+"px)":"translate3d("+C+"px, "+S+"px, 0)",B))}return Object.assign({},H,(e={},e[E]=v?S+"px":"",e[g]=_?C+"px":"",e.transform="",e))}function G_(t){var e=t.state,r=t.options,i=r.gpuAcceleration,o=i===void 0?!0:i,l=r.adaptive,p=l===void 0?!0:l,n=r.roundOffsets,s=n===void 0?!0:n,c={placement:or(e.placement),variation:ki(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ul(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:p,roundOffsets:s})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ul(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ga={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:G_,data:{}};var zn={passive:!0};function Y_(t){var e=t.state,r=t.instance,i=t.options,o=i.scroll,l=o===void 0?!0:o,p=i.resize,n=p===void 0?!0:p,s=Rt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return l&&c.forEach(function(f){f.addEventListener("scroll",r.update,zn)}),n&&s.addEventListener("resize",r.update,zn),function(){l&&c.forEach(function(f){f.removeEventListener("scroll",r.update,zn)}),n&&s.removeEventListener("resize",r.update,zn)}}const Ya={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Y_,data:{}};var J_={left:"right",right:"left",bottom:"top",top:"bottom"};function ss(t){return t.replace(/left|right|bottom|top/g,function(e){return J_[e]})}var X_={start:"end",end:"start"};function fl(t){return t.replace(/start|end/g,function(e){return X_[e]})}function Ja(t){var e=Rt(t),r=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:r,scrollTop:i}}function Xa(t){return Ai($r(t)).left+Ja(t).scrollLeft}function Q_(t,e){var r=Rt(t),i=$r(t),o=r.visualViewport,l=i.clientWidth,p=i.clientHeight,n=0,s=0;if(o){l=o.width,p=o.height;var c=Uu();(c||!c&&e==="fixed")&&(n=o.offsetLeft,s=o.offsetTop)}return{width:l,height:p,x:n+Xa(t),y:s}}function Z_(t){var e,r=$r(t),i=Ja(t),o=(e=t.ownerDocument)==null?void 0:e.body,l=Zr(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),p=Zr(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),n=-i.scrollLeft+Xa(t),s=-i.scrollTop;return br(o||r).direction==="rtl"&&(n+=Zr(r.clientWidth,o?o.clientWidth:0)-l),{width:l,height:p,x:n,y:s}}function Qa(t){var e=br(t),r=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+i)}function Gu(t){return["html","body","#document"].indexOf(cr(t))>=0?t.ownerDocument.body:Ht(t)&&Qa(t)?t:Gu(Ps(t))}function fn(t,e){var r;e===void 0&&(e=[]);var i=Gu(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=Rt(i),p=o?[l].concat(l.visualViewport||[],Qa(i)?i:[]):i,n=e.concat(p);return o?n:n.concat(fn(Ps(p)))}function ma(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function eg(t,e){var r=Ai(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function dl(t,e,r){return e===Ua?ma(Q_(t,r)):ti(e)?eg(e,r):ma(Z_($r(t)))}function tg(t){var e=fn(Ps(t)),r=["absolute","fixed"].indexOf(br(t).position)>=0,i=r&&Ht(t)?Sn(t):t;return ti(i)?e.filter(function(o){return ti(o)&&Wu(o,i)&&cr(o)!=="body"}):[]}function rg(t,e,r,i){var o=e==="clippingParents"?tg(t):[].concat(e),l=[].concat(o,[r]),p=l[0],n=l.reduce(function(s,c){var f=dl(t,c,i);return s.top=Zr(f.top,s.top),s.right=ys(f.right,s.right),s.bottom=ys(f.bottom,s.bottom),s.left=Zr(f.left,s.left),s},dl(t,p,i));return n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}function Yu(t){var e=t.reference,r=t.element,i=t.placement,o=i?or(i):null,l=i?ki(i):null,p=e.x+e.width/2-r.width/2,n=e.y+e.height/2-r.height/2,s;switch(o){case dt:s={x:p,y:e.y-r.height};break;case At:s={x:p,y:e.y+e.height};break;case kt:s={x:e.x+e.width,y:n};break;case pt:s={x:e.x-r.width,y:n};break;default:s={x:e.x,y:e.y}}var c=o?Ka(o):null;if(c!=null){var f=c==="y"?"height":"width";switch(l){case ei:s[c]=s[c]-(e[f]/2-r[f]/2);break;case wi:s[c]=s[c]+(e[f]/2-r[f]/2);break}}return s}function Ri(t,e){e===void 0&&(e={});var r=e,i=r.placement,o=i===void 0?t.placement:i,l=r.strategy,p=l===void 0?t.strategy:l,n=r.boundary,s=n===void 0?Du:n,c=r.rootBoundary,f=c===void 0?Ua:c,m=r.elementContext,y=m===void 0?vi:m,C=r.altBoundary,b=C===void 0?!1:C,S=r.padding,u=S===void 0?0:S,_=Vu(typeof u!="number"?u:qu(u,Ni)),v=y===vi?Lu:vi,g=t.rects.popper,E=t.elements[b?v:y],T=rg(ti(E)?E:E.contextElement||$r(t.elements.popper),s,f,p),R=Ai(t.elements.reference),h=Yu({reference:R,element:g,strategy:"absolute",placement:o}),A=ma(Object.assign({},g,h)),x=y===vi?A:R,O={top:T.top-x.top+_.top,bottom:x.bottom-T.bottom+_.bottom,left:T.left-x.left+_.left,right:x.right-T.right+_.right},H=t.modifiersData.offset;if(y===vi&&H){var N=H[o];Object.keys(O).forEach(function(B){var ee=[kt,At].indexOf(B)>=0?1:-1,ue=[dt,At].indexOf(B)>=0?"y":"x";O[B]+=N[ue]*ee})}return O}function ig(t,e){e===void 0&&(e={});var r=e,i=r.placement,o=r.boundary,l=r.rootBoundary,p=r.padding,n=r.flipVariations,s=r.allowedAutoPlacements,c=s===void 0?Wa:s,f=ki(i),m=f?n?_a:_a.filter(function(b){return ki(b)===f}):Ni,y=m.filter(function(b){return c.indexOf(b)>=0});y.length===0&&(y=m);var C=y.reduce(function(b,S){return b[S]=Ri(t,{placement:S,boundary:o,rootBoundary:l,padding:p})[or(S)],b},{});return Object.keys(C).sort(function(b,S){return C[b]-C[S]})}function ng(t){if(or(t)===Ls)return[];var e=ss(t);return[fl(t),e,fl(e)]}function sg(t){var e=t.state,r=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var o=r.mainAxis,l=o===void 0?!0:o,p=r.altAxis,n=p===void 0?!0:p,s=r.fallbackPlacements,c=r.padding,f=r.boundary,m=r.rootBoundary,y=r.altBoundary,C=r.flipVariations,b=C===void 0?!0:C,S=r.allowedAutoPlacements,u=e.options.placement,_=or(u),v=_===u,g=s||(v||!b?[ss(u)]:ng(u)),E=[u].concat(g).reduce(function(oe,pe){return oe.concat(or(pe)===Ls?ig(e,{placement:pe,boundary:f,rootBoundary:m,padding:c,flipVariations:b,allowedAutoPlacements:S}):pe)},[]),T=e.rects.reference,R=e.rects.popper,h=new Map,A=!0,x=E[0],O=0;O<E.length;O++){var H=E[O],N=or(H),B=ki(H)===ei,ee=[dt,At].indexOf(N)>=0,ue=ee?"width":"height",se=Ri(e,{placement:H,boundary:f,rootBoundary:m,altBoundary:y,padding:c}),M=ee?B?kt:pt:B?At:dt;T[ue]>R[ue]&&(M=ss(M));var F=ss(M),j=[];if(l&&j.push(se[N]<=0),n&&j.push(se[M]<=0,se[F]<=0),j.every(function(oe){return oe})){x=H,A=!1;break}h.set(H,j)}if(A)for(var q=b?3:1,te=function(pe){var z=E.find(function(W){var Y=h.get(W);if(Y)return Y.slice(0,pe).every(function(re){return re})});if(z)return x=z,"break"},ge=q;ge>0;ge--){var me=te(ge);if(me==="break")break}e.placement!==x&&(e.modifiersData[i]._skip=!0,e.placement=x,e.reset=!0)}}const Ju={name:"flip",enabled:!0,phase:"main",fn:sg,requiresIfExists:["offset"],data:{_skip:!1}};function pl(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function _l(t){return[dt,kt,At,pt].some(function(e){return t[e]>=0})}function og(t){var e=t.state,r=t.name,i=e.rects.reference,o=e.rects.popper,l=e.modifiersData.preventOverflow,p=Ri(e,{elementContext:"reference"}),n=Ri(e,{altBoundary:!0}),s=pl(p,i),c=pl(n,o,l),f=_l(s),m=_l(c);e.modifiersData[r]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:f,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":m})}const Xu={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:og};function ag(t,e,r){var i=or(t),o=[pt,dt].indexOf(i)>=0?-1:1,l=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,p=l[0],n=l[1];return p=p||0,n=(n||0)*o,[pt,kt].indexOf(i)>=0?{x:n,y:p}:{x:p,y:n}}function cg(t){var e=t.state,r=t.options,i=t.name,o=r.offset,l=o===void 0?[0,0]:o,p=Wa.reduce(function(f,m){return f[m]=ag(m,e.rects,l),f},{}),n=p[e.placement],s=n.x,c=n.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=s,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=p}const Qu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cg};function lg(t){var e=t.state,r=t.name;e.modifiersData[r]=Yu({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Za={name:"popperOffsets",enabled:!0,phase:"read",fn:lg,data:{}};function hg(t){return t==="x"?"y":"x"}function ug(t){var e=t.state,r=t.options,i=t.name,o=r.mainAxis,l=o===void 0?!0:o,p=r.altAxis,n=p===void 0?!1:p,s=r.boundary,c=r.rootBoundary,f=r.altBoundary,m=r.padding,y=r.tether,C=y===void 0?!0:y,b=r.tetherOffset,S=b===void 0?0:b,u=Ri(e,{boundary:s,rootBoundary:c,padding:m,altBoundary:f}),_=or(e.placement),v=ki(e.placement),g=!v,E=Ka(_),T=hg(E),R=e.modifiersData.popperOffsets,h=e.rects.reference,A=e.rects.popper,x=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,O=typeof x=="number"?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(R){if(l){var B,ee=E==="y"?dt:pt,ue=E==="y"?At:kt,se=E==="y"?"height":"width",M=R[E],F=M+u[ee],j=M-u[ue],q=C?-A[se]/2:0,te=v===ei?h[se]:A[se],ge=v===ei?-A[se]:-h[se],me=e.elements.arrow,oe=C&&me?qa(me):{width:0,height:0},pe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:zu(),z=pe[ee],W=pe[ue],Y=un(0,h[se],oe[se]),re=g?h[se]/2-q-Y-z-O.mainAxis:te-Y-z-O.mainAxis,ae=g?-h[se]/2+q+Y+W+O.mainAxis:ge+Y+W+O.mainAxis,Pe=e.elements.arrow&&Sn(e.elements.arrow),de=Pe?E==="y"?Pe.clientTop||0:Pe.clientLeft||0:0,Fe=(B=H==null?void 0:H[E])!=null?B:0,Ue=M+re-Fe-de,ze=M+ae-Fe,Oe=un(C?ys(F,Ue):F,M,C?Zr(j,ze):j);R[E]=Oe,N[E]=Oe-M}if(n){var Dt,mt=E==="x"?dt:pt,Fi=E==="x"?At:kt,Et=R[T],Lt=T==="y"?"height":"width",Xe=Et+u[mt],lt=Et-u[Fi],Pt=[dt,pt].indexOf(_)!==-1,be=(Dt=H==null?void 0:H[T])!=null?Dt:0,Qe=Pt?Xe:Et-h[Lt]-A[Lt]-be+O.altAxis,Er=Pt?Et+h[Lt]+A[Lt]-be-O.altAxis:lt,Wr=C&&Pt?U_(Qe,Et,Er):un(C?Qe:Xe,Et,C?Er:lt);R[T]=Wr,N[T]=Wr-Et}e.modifiersData[i]=N}}const Zu={name:"preventOverflow",enabled:!0,phase:"main",fn:ug,requiresIfExists:["offset"]};function fg(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function dg(t){return t===Rt(t)||!Ht(t)?Ja(t):fg(t)}function pg(t){var e=t.getBoundingClientRect(),r=Ti(e.width)/t.offsetWidth||1,i=Ti(e.height)/t.offsetHeight||1;return r!==1||i!==1}function _g(t,e,r){r===void 0&&(r=!1);var i=Ht(e),o=Ht(e)&&pg(e),l=$r(e),p=Ai(t,o,r),n={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(i||!i&&!r)&&((cr(e)!=="body"||Qa(l))&&(n=dg(e)),Ht(e)?(s=Ai(e,!0),s.x+=e.clientLeft,s.y+=e.clientTop):l&&(s.x=Xa(l))),{x:p.left+n.scrollLeft-s.x,y:p.top+n.scrollTop-s.y,width:p.width,height:p.height}}function gg(t){var e=new Map,r=new Set,i=[];t.forEach(function(l){e.set(l.name,l)});function o(l){r.add(l.name);var p=[].concat(l.requires||[],l.requiresIfExists||[]);p.forEach(function(n){if(!r.has(n)){var s=e.get(n);s&&o(s)}}),i.push(l)}return t.forEach(function(l){r.has(l.name)||o(l)}),i}function mg(t){var e=gg(t);return ju.reduce(function(r,i){return r.concat(e.filter(function(o){return o.phase===i}))},[])}function vg(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function yg(t){var e=t.reduce(function(r,i){var o=r[i.name];return r[i.name]=o?Object.assign({},o,i,{options:Object.assign({},o.options,i.options),data:Object.assign({},o.data,i.data)}):i,r},{});return Object.keys(e).map(function(r){return e[r]})}var gl={placement:"bottom",modifiers:[],strategy:"absolute"};function ml(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Os(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,i=r===void 0?[]:r,o=e.defaultOptions,l=o===void 0?gl:o;return function(n,s,c){c===void 0&&(c=l);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},gl,l),modifiersData:{},elements:{reference:n,popper:s},attributes:{},styles:{}},m=[],y=!1,C={state:f,setOptions:function(_){var v=typeof _=="function"?_(f.options):_;S(),f.options=Object.assign({},l,f.options,v),f.scrollParents={reference:ti(n)?fn(n):n.contextElement?fn(n.contextElement):[],popper:fn(s)};var g=mg(yg([].concat(i,f.options.modifiers)));return f.orderedModifiers=g.filter(function(E){return E.enabled}),b(),C.update()},forceUpdate:function(){if(!y){var _=f.elements,v=_.reference,g=_.popper;if(ml(v,g)){f.rects={reference:_g(v,Sn(g),f.options.strategy==="fixed"),popper:qa(g)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(O){return f.modifiersData[O.name]=Object.assign({},O.data)});for(var E=0;E<f.orderedModifiers.length;E++){if(f.reset===!0){f.reset=!1,E=-1;continue}var T=f.orderedModifiers[E],R=T.fn,h=T.options,A=h===void 0?{}:h,x=T.name;typeof R=="function"&&(f=R({state:f,options:A,name:x,instance:C})||f)}}}},update:vg(function(){return new Promise(function(u){C.forceUpdate(),u(f)})}),destroy:function(){S(),y=!0}};if(!ml(n,s))return C;C.setOptions(c).then(function(u){!y&&c.onFirstUpdate&&c.onFirstUpdate(u)});function b(){f.orderedModifiers.forEach(function(u){var _=u.name,v=u.options,g=v===void 0?{}:v,E=u.effect;if(typeof E=="function"){var T=E({state:f,name:_,instance:C,options:g}),R=function(){};m.push(T||R)}})}function S(){m.forEach(function(u){return u()}),m=[]}return C}}var Sg=Os(),bg=[Ya,Za,Ga,Va],Cg=Os({defaultModifiers:bg}),Eg=[Ya,Za,Ga,Va,Qu,Ju,Zu,Ku,Xu],ec=Os({defaultModifiers:Eg});const ef=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Nu,afterRead:Mu,afterWrite:Fu,applyStyles:Va,arrow:Ku,auto:Ls,basePlacements:Ni,beforeMain:Iu,beforeRead:Pu,beforeWrite:Hu,bottom:At,clippingParents:Du,computeStyles:Ga,createPopper:ec,createPopperBase:Sg,createPopperLite:Cg,detectOverflow:Ri,end:wi,eventListeners:Ya,flip:Ju,hide:Xu,left:pt,main:Bu,modifierPhases:ju,offset:Qu,placements:Wa,popper:vi,popperGenerator:Os,popperOffsets:Za,preventOverflow:Zu,read:Ou,reference:Lu,right:kt,start:ei,top:dt,variationPlacements:_a,viewport:Ua,write:$u},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Pr=new Map,_o={set(t,e,r){Pr.has(t)||Pr.set(t,new Map);const i=Pr.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,r)},get(t,e){return Pr.has(t)&&Pr.get(t).get(e)||null},remove(t,e){if(!Pr.has(t))return;const r=Pr.get(t);r.delete(e),r.size===0&&Pr.delete(t)}},wg=1e6,Tg=1e3,va="transitionend",tf=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,r)=>`#${CSS.escape(r)}`)),t),Ag=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),kg=t=>{do t+=Math.floor(Math.random()*wg);while(document.getElementById(t));return t},Rg=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(t);const i=Number.parseFloat(e),o=Number.parseFloat(r);return!i&&!o?0:(e=e.split(",")[0],r=r.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(r))*Tg)},rf=t=>{t.dispatchEvent(new Event(va))},yr=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Br=t=>yr(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(tf(t)):null,Hi=t=>{if(!yr(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",r=t.closest("details:not([open])");if(!r)return e;if(r!==t){const i=t.closest("summary");if(i&&i.parentNode!==r||i===null)return!1}return e},Nr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",nf=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?nf(t.parentNode):null},Ss=()=>{},bn=t=>{t.offsetHeight},sf=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,go=[],xg=t=>{document.readyState==="loading"?(go.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of go)e()}),go.push(t)):t()},$t=()=>document.documentElement.dir==="rtl",Ut=t=>{xg(()=>{const e=sf();if(e){const r=t.NAME,i=e.fn[r];e.fn[r]=t.jQueryInterface,e.fn[r].Constructor=t,e.fn[r].noConflict=()=>(e.fn[r]=i,t.jQueryInterface)}})},Ct=(t,e=[],r=t)=>typeof t=="function"?t(...e):r,of=(t,e,r=!0)=>{if(!r){Ct(t);return}const i=5,o=Rg(e)+i;let l=!1;const p=({target:n})=>{n===e&&(l=!0,e.removeEventListener(va,p),Ct(t))};e.addEventListener(va,p),setTimeout(()=>{l||rf(e)},o)},tc=(t,e,r,i)=>{const o=t.length;let l=t.indexOf(e);return l===-1?!r&&i?t[o-1]:t[0]:(l+=r?1:-1,i&&(l=(l+o)%o),t[Math.max(0,Math.min(l,o-1))])},Dg=/[^.]*(?=\..*)\.|.*/,Lg=/\..*/,Pg=/::\d+$/,mo={};let vl=1;const af={mouseenter:"mouseover",mouseleave:"mouseout"},Og=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function cf(t,e){return e&&`${e}::${vl++}`||t.uidEvent||vl++}function lf(t){const e=cf(t);return t.uidEvent=e,mo[e]=mo[e]||{},mo[e]}function Mg(t,e){return function r(i){return rc(i,{delegateTarget:t}),r.oneOff&&ce.off(t,i.type,e),e.apply(t,[i])}}function Ig(t,e,r){return function i(o){const l=t.querySelectorAll(e);for(let{target:p}=o;p&&p!==this;p=p.parentNode)for(const n of l)if(n===p)return rc(o,{delegateTarget:p}),i.oneOff&&ce.off(t,o.type,e,r),r.apply(p,[o])}}function hf(t,e,r=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===r)}function uf(t,e,r){const i=typeof e=="string",o=i?r:e||r;let l=ff(t);return Og.has(l)||(l=t),[i,o,l]}function yl(t,e,r,i,o){if(typeof e!="string"||!t)return;let[l,p,n]=uf(e,r,i);e in af&&(p=(b=>function(S){if(!S.relatedTarget||S.relatedTarget!==S.delegateTarget&&!S.delegateTarget.contains(S.relatedTarget))return b.call(this,S)})(p));const s=lf(t),c=s[n]||(s[n]={}),f=hf(c,p,l?r:null);if(f){f.oneOff=f.oneOff&&o;return}const m=cf(p,e.replace(Dg,"")),y=l?Ig(t,r,p):Mg(t,p);y.delegationSelector=l?r:null,y.callable=p,y.oneOff=o,y.uidEvent=m,c[m]=y,t.addEventListener(n,y,l)}function ya(t,e,r,i,o){const l=hf(e[r],i,o);l&&(t.removeEventListener(r,l,!!o),delete e[r][l.uidEvent])}function Bg(t,e,r,i){const o=e[r]||{};for(const[l,p]of Object.entries(o))l.includes(i)&&ya(t,e,r,p.callable,p.delegationSelector)}function ff(t){return t=t.replace(Lg,""),af[t]||t}const ce={on(t,e,r,i){yl(t,e,r,i,!1)},one(t,e,r,i){yl(t,e,r,i,!0)},off(t,e,r,i){if(typeof e!="string"||!t)return;const[o,l,p]=uf(e,r,i),n=p!==e,s=lf(t),c=s[p]||{},f=e.startsWith(".");if(typeof l<"u"){if(!Object.keys(c).length)return;ya(t,s,p,l,o?r:null);return}if(f)for(const m of Object.keys(s))Bg(t,s,m,e.slice(1));for(const[m,y]of Object.entries(c)){const C=m.replace(Pg,"");(!n||e.includes(C))&&ya(t,s,p,y.callable,y.delegationSelector)}},trigger(t,e,r){if(typeof e!="string"||!t)return null;const i=sf(),o=ff(e),l=e!==o;let p=null,n=!0,s=!0,c=!1;l&&i&&(p=i.Event(e,r),i(t).trigger(p),n=!p.isPropagationStopped(),s=!p.isImmediatePropagationStopped(),c=p.isDefaultPrevented());const f=rc(new Event(e,{bubbles:n,cancelable:!0}),r);return c&&f.preventDefault(),s&&t.dispatchEvent(f),f.defaultPrevented&&p&&p.preventDefault(),f}};function rc(t,e={}){for(const[r,i]of Object.entries(e))try{t[r]=i}catch{Object.defineProperty(t,r,{configurable:!0,get(){return i}})}return t}function Sl(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function vo(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Sr={setDataAttribute(t,e,r){t.setAttribute(`data-bs-${vo(e)}`,r)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${vo(e)}`)},getDataAttributes(t){if(!t)return{};const e={},r=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of r){let o=i.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=Sl(t.dataset[i])}return e},getDataAttribute(t,e){return Sl(t.getAttribute(`data-bs-${vo(e)}`))}};class Cn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,r){const i=yr(r)?Sr.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...yr(r)?Sr.getDataAttributes(r):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,r=this.constructor.DefaultType){for(const[i,o]of Object.entries(r)){const l=e[i],p=yr(l)?"element":Ag(l);if(!new RegExp(o).test(p))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${p}" but expected type "${o}".`)}}}const Ng="5.3.1";class Jt extends Cn{constructor(e,r){super(),e=Br(e),e&&(this._element=e,this._config=this._getConfig(r),_o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){_o.remove(this._element,this.constructor.DATA_KEY),ce.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,r,i=!0){of(e,r,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return _o.get(Br(e),this.DATA_KEY)}static getOrCreateInstance(e,r={}){return this.getInstance(e)||new this(e,typeof r=="object"?r:null)}static get VERSION(){return Ng}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const yo=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let r=t.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&r!=="#"?r.trim():null}return tf(e)},we={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(r=>r.matches(e))},parents(t,e){const r=[];let i=t.parentNode.closest(e);for(;i;)r.push(i),i=i.parentNode.closest(e);return r},prev(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return[r];r=r.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(r=>!Nr(r)&&Hi(r))},getSelectorFromElement(t){const e=yo(t);return e&&we.findOne(e)?e:null},getElementFromSelector(t){const e=yo(t);return e?we.findOne(e):null},getMultipleElementsFromSelector(t){const e=yo(t);return e?we.find(e):[]}},Ms=(t,e="hide")=>{const r=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;ce.on(document,r,`[data-bs-dismiss="${i}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),Nr(this))return;const l=we.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(l)[e]()})},Hg="alert",$g="bs.alert",df=`.${$g}`,Fg=`close${df}`,jg=`closed${df}`,Ug="fade",Wg="show";class Is extends Jt{static get NAME(){return Hg}close(){if(ce.trigger(this._element,Fg).defaultPrevented)return;this._element.classList.remove(Wg);const r=this._element.classList.contains(Ug);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),ce.trigger(this._element,jg),this.dispose()}static jQueryInterface(e){return this.each(function(){const r=Is.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}Ms(Is,"close");Ut(Is);const zg="button",Vg="bs.button",qg=`.${Vg}`,Kg=".data-api",Gg="active",bl='[data-bs-toggle="button"]',Yg=`click${qg}${Kg}`;class Bs extends Jt{static get NAME(){return zg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Gg))}static jQueryInterface(e){return this.each(function(){const r=Bs.getOrCreateInstance(this);e==="toggle"&&r[e]()})}}ce.on(document,Yg,bl,t=>{t.preventDefault();const e=t.target.closest(bl);Bs.getOrCreateInstance(e).toggle()});Ut(Bs);const Jg="swipe",$i=".bs.swipe",Xg=`touchstart${$i}`,Qg=`touchmove${$i}`,Zg=`touchend${$i}`,em=`pointerdown${$i}`,tm=`pointerup${$i}`,rm="touch",im="pen",nm="pointer-event",sm=40,om={endCallback:null,leftCallback:null,rightCallback:null},am={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class bs extends Cn{constructor(e,r){super(),this._element=e,!(!e||!bs.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return om}static get DefaultType(){return am}static get NAME(){return Jg}dispose(){ce.off(this._element,$i)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ct(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=sm)return;const r=e/this._deltaX;this._deltaX=0,r&&Ct(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ce.on(this._element,em,e=>this._start(e)),ce.on(this._element,tm,e=>this._end(e)),this._element.classList.add(nm)):(ce.on(this._element,Xg,e=>this._start(e)),ce.on(this._element,Qg,e=>this._move(e)),ce.on(this._element,Zg,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===im||e.pointerType===rm)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const cm="carousel",lm="bs.carousel",Fr=`.${lm}`,pf=".data-api",hm="ArrowLeft",um="ArrowRight",fm=500,Zi="next",_i="prev",yi="left",os="right",dm=`slide${Fr}`,So=`slid${Fr}`,pm=`keydown${Fr}`,_m=`mouseenter${Fr}`,gm=`mouseleave${Fr}`,mm=`dragstart${Fr}`,vm=`load${Fr}${pf}`,ym=`click${Fr}${pf}`,_f="carousel",Vn="active",Sm="slide",bm="carousel-item-end",Cm="carousel-item-start",Em="carousel-item-next",wm="carousel-item-prev",gf=".active",mf=".carousel-item",Tm=gf+mf,Am=".carousel-item img",km=".carousel-indicators",Rm="[data-bs-slide], [data-bs-slide-to]",xm='[data-bs-ride="carousel"]',Dm={[hm]:os,[um]:yi},Lm={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Pm={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class En extends Jt{constructor(e,r){super(e,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=we.findOne(km,this._element),this._addEventListeners(),this._config.ride===_f&&this.cycle()}static get Default(){return Lm}static get DefaultType(){return Pm}static get NAME(){return cm}next(){this._slide(Zi)}nextWhenVisible(){!document.hidden&&Hi(this._element)&&this.next()}prev(){this._slide(_i)}pause(){this._isSliding&&rf(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){ce.one(this._element,So,()=>this.cycle());return}this.cycle()}}to(e){const r=this._getItems();if(e>r.length-1||e<0)return;if(this._isSliding){ce.one(this._element,So,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const o=e>i?Zi:_i;this._slide(o,r[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&ce.on(this._element,pm,e=>this._keydown(e)),this._config.pause==="hover"&&(ce.on(this._element,_m,()=>this.pause()),ce.on(this._element,gm,()=>this._maybeEnableCycle())),this._config.touch&&bs.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of we.find(Am,this._element))ce.on(i,mm,o=>o.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(yi)),rightCallback:()=>this._slide(this._directionToOrder(os)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),fm+this._config.interval))}};this._swipeHelper=new bs(this._element,r)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const r=Dm[e.key];r&&(e.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const r=we.findOne(gf,this._indicatorsElement);r.classList.remove(Vn),r.removeAttribute("aria-current");const i=we.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Vn),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const r=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(e,r=null){if(this._isSliding)return;const i=this._getActive(),o=e===Zi,l=r||tc(this._getItems(),i,o,this._config.wrap);if(l===i)return;const p=this._getItemIndex(l),n=C=>ce.trigger(this._element,C,{relatedTarget:l,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:p});if(n(dm).defaultPrevented||!i||!l)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(p),this._activeElement=l;const f=o?Cm:bm,m=o?Em:wm;l.classList.add(m),bn(l),i.classList.add(f),l.classList.add(f);const y=()=>{l.classList.remove(f,m),l.classList.add(Vn),i.classList.remove(Vn,m,f),this._isSliding=!1,n(So)};this._queueCallback(y,i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(Sm)}_getActive(){return we.findOne(Tm,this._element)}_getItems(){return we.find(mf,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return $t()?e===yi?_i:Zi:e===yi?Zi:_i}_orderToDirection(e){return $t()?e===_i?yi:os:e===_i?os:yi}static jQueryInterface(e){return this.each(function(){const r=En.getOrCreateInstance(this,e);if(typeof e=="number"){r.to(e);return}if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}ce.on(document,ym,Rm,function(t){const e=we.getElementFromSelector(this);if(!e||!e.classList.contains(_f))return;t.preventDefault();const r=En.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){r.to(i),r._maybeEnableCycle();return}if(Sr.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});ce.on(window,vm,()=>{const t=we.find(xm);for(const e of t)En.getOrCreateInstance(e)});Ut(En);const Om="collapse",Mm="bs.collapse",wn=`.${Mm}`,Im=".data-api",Bm=`show${wn}`,Nm=`shown${wn}`,Hm=`hide${wn}`,$m=`hidden${wn}`,Fm=`click${wn}${Im}`,bo="show",bi="collapse",qn="collapsing",jm="collapsed",Um=`:scope .${bi} .${bi}`,Wm="collapse-horizontal",zm="width",Vm="height",qm=".collapse.show, .collapse.collapsing",Sa='[data-bs-toggle="collapse"]',Km={parent:null,toggle:!0},Gm={parent:"(null|element)",toggle:"boolean"};class gn extends Jt{constructor(e,r){super(e,r),this._isTransitioning=!1,this._triggerArray=[];const i=we.find(Sa);for(const o of i){const l=we.getSelectorFromElement(o),p=we.find(l).filter(n=>n===this._element);l!==null&&p.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Km}static get DefaultType(){return Gm}static get NAME(){return Om}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(qm).filter(n=>n!==this._element).map(n=>gn.getOrCreateInstance(n,{toggle:!1}))),e.length&&e[0]._isTransitioning||ce.trigger(this._element,Bm).defaultPrevented)return;for(const n of e)n.hide();const i=this._getDimension();this._element.classList.remove(bi),this._element.classList.add(qn),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(qn),this._element.classList.add(bi,bo),this._element.style[i]="",ce.trigger(this._element,Nm)},p=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[i]=`${this._element[p]}px`}hide(){if(this._isTransitioning||!this._isShown()||ce.trigger(this._element,Hm).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,bn(this._element),this._element.classList.add(qn),this._element.classList.remove(bi,bo);for(const o of this._triggerArray){const l=we.getElementFromSelector(o);l&&!this._isShown(l)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(qn),this._element.classList.add(bi),ce.trigger(this._element,$m)};this._element.style[r]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(bo)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Br(e.parent),e}_getDimension(){return this._element.classList.contains(Wm)?zm:Vm}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Sa);for(const r of e){const i=we.getElementFromSelector(r);i&&this._addAriaAndCollapsedClass([r],this._isShown(i))}}_getFirstLevelChildren(e){const r=we.find(Um,this._config.parent);return we.find(e,this._config.parent).filter(i=>!r.includes(i))}_addAriaAndCollapsedClass(e,r){if(e.length)for(const i of e)i.classList.toggle(jm,!r),i.setAttribute("aria-expanded",r)}static jQueryInterface(e){const r={};return typeof e=="string"&&/show|hide/.test(e)&&(r.toggle=!1),this.each(function(){const i=gn.getOrCreateInstance(this,r);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}ce.on(document,Fm,Sa,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of we.getMultipleElementsFromSelector(this))gn.getOrCreateInstance(e,{toggle:!1}).toggle()});Ut(gn);const Cl="dropdown",Ym="bs.dropdown",ri=`.${Ym}`,ic=".data-api",Jm="Escape",El="Tab",Xm="ArrowUp",wl="ArrowDown",Qm=2,Zm=`hide${ri}`,ev=`hidden${ri}`,tv=`show${ri}`,rv=`shown${ri}`,vf=`click${ri}${ic}`,yf=`keydown${ri}${ic}`,iv=`keyup${ri}${ic}`,Si="show",nv="dropup",sv="dropend",ov="dropstart",av="dropup-center",cv="dropdown-center",Xr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',lv=`${Xr}.${Si}`,as=".dropdown-menu",hv=".navbar",uv=".navbar-nav",fv=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",dv=$t()?"top-end":"top-start",pv=$t()?"top-start":"top-end",_v=$t()?"bottom-end":"bottom-start",gv=$t()?"bottom-start":"bottom-end",mv=$t()?"left-start":"right-start",vv=$t()?"right-start":"left-start",yv="top",Sv="bottom",bv={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Cv={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ar extends Jt{constructor(e,r){super(e,r),this._popper=null,this._parent=this._element.parentNode,this._menu=we.next(this._element,as)[0]||we.prev(this._element,as)[0]||we.findOne(as,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return bv}static get DefaultType(){return Cv}static get NAME(){return Cl}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Nr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!ce.trigger(this._element,tv,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(uv))for(const i of[].concat(...document.body.children))ce.on(i,"mouseover",Ss);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Si),this._element.classList.add(Si),ce.trigger(this._element,rv,e)}}hide(){if(Nr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!ce.trigger(this._element,Zm,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))ce.off(i,"mouseover",Ss);this._popper&&this._popper.destroy(),this._menu.classList.remove(Si),this._element.classList.remove(Si),this._element.setAttribute("aria-expanded","false"),Sr.removeDataAttribute(this._menu,"popper"),ce.trigger(this._element,ev,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!yr(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Cl.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof ef>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:yr(this._config.reference)?e=Br(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const r=this._getPopperConfig();this._popper=ec(e,this._menu,r)}_isShown(){return this._menu.classList.contains(Si)}_getPlacement(){const e=this._parent;if(e.classList.contains(sv))return mv;if(e.classList.contains(ov))return vv;if(e.classList.contains(av))return yv;if(e.classList.contains(cv))return Sv;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(nv)?r?pv:dv:r?gv:_v}_detectNavbar(){return this._element.closest(hv)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Sr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Ct(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:r}){const i=we.find(fv,this._menu).filter(o=>Hi(o));i.length&&tc(i,r,e===wl,!i.includes(r)).focus()}static jQueryInterface(e){return this.each(function(){const r=ar.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}static clearMenus(e){if(e.button===Qm||e.type==="keyup"&&e.key!==El)return;const r=we.find(lv);for(const i of r){const o=ar.getInstance(i);if(!o||o._config.autoClose===!1)continue;const l=e.composedPath(),p=l.includes(o._menu);if(l.includes(o._element)||o._config.autoClose==="inside"&&!p||o._config.autoClose==="outside"&&p||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===El||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const n={relatedTarget:o._element};e.type==="click"&&(n.clickEvent=e),o._completeHide(n)}}static dataApiKeydownHandler(e){const r=/input|textarea/i.test(e.target.tagName),i=e.key===Jm,o=[Xm,wl].includes(e.key);if(!o&&!i||r&&!i)return;e.preventDefault();const l=this.matches(Xr)?this:we.prev(this,Xr)[0]||we.next(this,Xr)[0]||we.findOne(Xr,e.delegateTarget.parentNode),p=ar.getOrCreateInstance(l);if(o){e.stopPropagation(),p.show(),p._selectMenuItem(e);return}p._isShown()&&(e.stopPropagation(),p.hide(),l.focus())}}ce.on(document,yf,Xr,ar.dataApiKeydownHandler);ce.on(document,yf,as,ar.dataApiKeydownHandler);ce.on(document,vf,ar.clearMenus);ce.on(document,iv,ar.clearMenus);ce.on(document,vf,Xr,function(t){t.preventDefault(),ar.getOrCreateInstance(this).toggle()});Ut(ar);const Sf="backdrop",Ev="fade",Tl="show",Al=`mousedown.bs.${Sf}`,wv={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Tv={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class bf extends Cn{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return wv}static get DefaultType(){return Tv}static get NAME(){return Sf}show(e){if(!this._config.isVisible){Ct(e);return}this._append();const r=this._getElement();this._config.isAnimated&&bn(r),r.classList.add(Tl),this._emulateAnimation(()=>{Ct(e)})}hide(e){if(!this._config.isVisible){Ct(e);return}this._getElement().classList.remove(Tl),this._emulateAnimation(()=>{this.dispose(),Ct(e)})}dispose(){this._isAppended&&(ce.off(this._element,Al),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Ev),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Br(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),ce.on(e,Al,()=>{Ct(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){of(e,this._getElement(),this._config.isAnimated)}}const Av="focustrap",kv="bs.focustrap",Cs=`.${kv}`,Rv=`focusin${Cs}`,xv=`keydown.tab${Cs}`,Dv="Tab",Lv="forward",kl="backward",Pv={autofocus:!0,trapElement:null},Ov={autofocus:"boolean",trapElement:"element"};class Cf extends Cn{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Pv}static get DefaultType(){return Ov}static get NAME(){return Av}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ce.off(document,Cs),ce.on(document,Rv,e=>this._handleFocusin(e)),ce.on(document,xv,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ce.off(document,Cs))}_handleFocusin(e){const{trapElement:r}=this._config;if(e.target===document||e.target===r||r.contains(e.target))return;const i=we.focusableChildren(r);i.length===0?r.focus():this._lastTabNavDirection===kl?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===Dv&&(this._lastTabNavDirection=e.shiftKey?kl:Lv)}}const Rl=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xl=".sticky-top",Kn="padding-right",Dl="margin-right";class ba{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Kn,r=>r+e),this._setElementAttributes(Rl,Kn,r=>r+e),this._setElementAttributes(xl,Dl,r=>r-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Kn),this._resetElementAttributes(Rl,Kn),this._resetElementAttributes(xl,Dl)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,r,i){const o=this.getWidth(),l=p=>{if(p!==this._element&&window.innerWidth>p.clientWidth+o)return;this._saveInitialAttribute(p,r);const n=window.getComputedStyle(p).getPropertyValue(r);p.style.setProperty(r,`${i(Number.parseFloat(n))}px`)};this._applyManipulationCallback(e,l)}_saveInitialAttribute(e,r){const i=e.style.getPropertyValue(r);i&&Sr.setDataAttribute(e,r,i)}_resetElementAttributes(e,r){const i=o=>{const l=Sr.getDataAttribute(o,r);if(l===null){o.style.removeProperty(r);return}Sr.removeDataAttribute(o,r),o.style.setProperty(r,l)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,r){if(yr(e)){r(e);return}for(const i of we.find(e,this._element))r(i)}}const Mv="modal",Iv="bs.modal",Ft=`.${Iv}`,Bv=".data-api",Nv="Escape",Hv=`hide${Ft}`,$v=`hidePrevented${Ft}`,Ef=`hidden${Ft}`,wf=`show${Ft}`,Fv=`shown${Ft}`,jv=`resize${Ft}`,Uv=`click.dismiss${Ft}`,Wv=`mousedown.dismiss${Ft}`,zv=`keydown.dismiss${Ft}`,Vv=`click${Ft}${Bv}`,Ll="modal-open",qv="fade",Pl="show",Co="modal-static",Kv=".modal.show",Gv=".modal-dialog",Yv=".modal-body",Jv='[data-bs-toggle="modal"]',Xv={backdrop:!0,focus:!0,keyboard:!0},Qv={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class xi extends Jt{constructor(e,r){super(e,r),this._dialog=we.findOne(Gv,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ba,this._addEventListeners()}static get Default(){return Xv}static get DefaultType(){return Qv}static get NAME(){return Mv}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||ce.trigger(this._element,wf,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ll),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||ce.trigger(this._element,Hv).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Pl),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ce.off(window,Ft),ce.off(this._dialog,Ft),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new bf({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Cf({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=we.findOne(Yv,this._dialog);r&&(r.scrollTop=0),bn(this._element),this._element.classList.add(Pl);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ce.trigger(this._element,Fv,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){ce.on(this._element,zv,e=>{if(e.key===Nv){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),ce.on(window,jv,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ce.on(this._element,Wv,e=>{ce.one(this._element,Uv,r=>{if(!(this._element!==e.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ll),this._resetAdjustments(),this._scrollBar.reset(),ce.trigger(this._element,Ef)})}_isAnimated(){return this._element.classList.contains(qv)}_triggerBackdropTransition(){if(ce.trigger(this._element,$v).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Co)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(Co),this._queueCallback(()=>{this._element.classList.remove(Co),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),i=r>0;if(i&&!e){const o=$t()?"paddingLeft":"paddingRight";this._element.style[o]=`${r}px`}if(!i&&e){const o=$t()?"paddingRight":"paddingLeft";this._element.style[o]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,r){return this.each(function(){const i=xi.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](r)}})}}ce.on(document,Vv,Jv,function(t){const e=we.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),ce.one(e,wf,o=>{o.defaultPrevented||ce.one(e,Ef,()=>{Hi(this)&&this.focus()})});const r=we.findOne(Kv);r&&xi.getInstance(r).hide(),xi.getOrCreateInstance(e).toggle(this)});Ms(xi);Ut(xi);const Zv="offcanvas",e0="bs.offcanvas",Cr=`.${e0}`,Tf=".data-api",t0=`load${Cr}${Tf}`,r0="Escape",Ol="show",Ml="showing",Il="hiding",i0="offcanvas-backdrop",Af=".offcanvas.show",n0=`show${Cr}`,s0=`shown${Cr}`,o0=`hide${Cr}`,Bl=`hidePrevented${Cr}`,kf=`hidden${Cr}`,a0=`resize${Cr}`,c0=`click${Cr}${Tf}`,l0=`keydown.dismiss${Cr}`,h0='[data-bs-toggle="offcanvas"]',u0={backdrop:!0,keyboard:!0,scroll:!1},f0={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Hr extends Jt{constructor(e,r){super(e,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return u0}static get DefaultType(){return f0}static get NAME(){return Zv}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||ce.trigger(this._element,n0,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ba().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ml);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ol),this._element.classList.remove(Ml),ce.trigger(this._element,s0,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||ce.trigger(this._element,o0).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Il),this._backdrop.hide();const r=()=>{this._element.classList.remove(Ol,Il),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ba().reset(),ce.trigger(this._element,kf)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){ce.trigger(this._element,Bl);return}this.hide()},r=!!this._config.backdrop;return new bf({className:i0,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?e:null})}_initializeFocusTrap(){return new Cf({trapElement:this._element})}_addEventListeners(){ce.on(this._element,l0,e=>{if(e.key===r0){if(this._config.keyboard){this.hide();return}ce.trigger(this._element,Bl)}})}static jQueryInterface(e){return this.each(function(){const r=Hr.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}ce.on(document,c0,h0,function(t){const e=we.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Nr(this))return;ce.one(e,kf,()=>{Hi(this)&&this.focus()});const r=we.findOne(Af);r&&r!==e&&Hr.getInstance(r).hide(),Hr.getOrCreateInstance(e).toggle(this)});ce.on(window,t0,()=>{for(const t of we.find(Af))Hr.getOrCreateInstance(t).show()});ce.on(window,a0,()=>{for(const t of we.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Hr.getOrCreateInstance(t).hide()});Ms(Hr);Ut(Hr);const d0=/^aria-[\w-]*$/i,Rf={"*":["class","dir","id","lang","role",d0],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},p0=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),_0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,g0=(t,e)=>{const r=t.nodeName.toLowerCase();return e.includes(r)?p0.has(r)?!!_0.test(t.nodeValue):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(r))};function m0(t,e,r){if(!t.length)return t;if(r&&typeof r=="function")return r(t);const o=new window.DOMParser().parseFromString(t,"text/html"),l=[].concat(...o.body.querySelectorAll("*"));for(const p of l){const n=p.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){p.remove();continue}const s=[].concat(...p.attributes),c=[].concat(e["*"]||[],e[n]||[]);for(const f of s)g0(f,c)||p.removeAttribute(f.nodeName)}return o.body.innerHTML}const v0="TemplateFactory",y0={allowList:Rf,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},S0={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},b0={entry:"(string|element|function|null)",selector:"(string|element)"};class C0 extends Cn{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return y0}static get DefaultType(){return S0}static get NAME(){return v0}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,l]of Object.entries(this._config.content))this._setContent(e,l,o);const r=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&r.classList.add(...i.split(" ")),r}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[r,i]of Object.entries(e))super._typeCheckConfig({selector:r,entry:i},b0)}_setContent(e,r,i){const o=we.findOne(i,e);if(o){if(r=this._resolvePossibleFunction(r),!r){o.remove();return}if(yr(r)){this._putElementInTemplate(Br(r),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(r);return}o.textContent=r}}_maybeSanitize(e){return this._config.sanitize?m0(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Ct(e,[this])}_putElementInTemplate(e,r){if(this._config.html){r.innerHTML="",r.append(e);return}r.textContent=e.textContent}}const E0="tooltip",w0=new Set(["sanitize","allowList","sanitizeFn"]),Eo="fade",T0="modal",Gn="show",A0=".tooltip-inner",Nl=`.${T0}`,Hl="hide.bs.modal",en="hover",wo="focus",k0="click",R0="manual",x0="hide",D0="hidden",L0="show",P0="shown",O0="inserted",M0="click",I0="focusin",B0="focusout",N0="mouseenter",H0="mouseleave",$0={AUTO:"auto",TOP:"top",RIGHT:$t()?"left":"right",BOTTOM:"bottom",LEFT:$t()?"right":"left"},F0={allowList:Rf,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},j0={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class lr extends Jt{constructor(e,r){if(typeof ef>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return F0}static get DefaultType(){return j0}static get NAME(){return E0}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),ce.off(this._element.closest(Nl),Hl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=ce.trigger(this._element,this.constructor.eventName(L0)),i=(nf(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:l}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(l.append(o),ce.trigger(this._element,this.constructor.eventName(O0))),this._popper=this._createPopper(o),o.classList.add(Gn),"ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))ce.on(n,"mouseover",Ss);const p=()=>{ce.trigger(this._element,this.constructor.eventName(P0)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(p,this.tip,this._isAnimated())}hide(){if(!this._isShown()||ce.trigger(this._element,this.constructor.eventName(x0)).defaultPrevented)return;if(this._getTipElement().classList.remove(Gn),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))ce.off(o,"mouseover",Ss);this._activeTrigger[k0]=!1,this._activeTrigger[wo]=!1,this._activeTrigger[en]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ce.trigger(this._element,this.constructor.eventName(D0)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const r=this._getTemplateFactory(e).toHtml();if(!r)return null;r.classList.remove(Eo,Gn),r.classList.add(`bs-${this.constructor.NAME}-auto`);const i=kg(this.constructor.NAME).toString();return r.setAttribute("id",i),this._isAnimated()&&r.classList.add(Eo),r}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new C0({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[A0]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Eo)}_isShown(){return this.tip&&this.tip.classList.contains(Gn)}_createPopper(e){const r=Ct(this._config.placement,[this,e,this._element]),i=$0[r.toUpperCase()];return ec(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_resolvePossibleFunction(e){return Ct(e,[this._element])}_getPopperConfig(e){const r={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...r,...Ct(this._config.popperConfig,[r])}}_setListeners(){const e=this._config.trigger.split(" ");for(const r of e)if(r==="click")ce.on(this._element,this.constructor.eventName(M0),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(r!==R0){const i=r===en?this.constructor.eventName(N0):this.constructor.eventName(I0),o=r===en?this.constructor.eventName(H0):this.constructor.eventName(B0);ce.on(this._element,i,this._config.selector,l=>{const p=this._initializeOnDelegatedTarget(l);p._activeTrigger[l.type==="focusin"?wo:en]=!0,p._enter()}),ce.on(this._element,o,this._config.selector,l=>{const p=this._initializeOnDelegatedTarget(l);p._activeTrigger[l.type==="focusout"?wo:en]=p._element.contains(l.relatedTarget),p._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ce.on(this._element.closest(Nl),Hl,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,r){clearTimeout(this._timeout),this._timeout=setTimeout(e,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const r=Sr.getDataAttributes(this._element);for(const i of Object.keys(r))w0.has(i)&&delete r[i];return e={...r,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Br(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[r,i]of Object.entries(this._config))this.constructor.Default[r]!==i&&(e[r]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const r=lr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}Ut(lr);const U0="popover",W0=".popover-header",z0=".popover-body",V0={...lr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},q0={...lr.DefaultType,content:"(null|string|element|function)"};class nc extends lr{static get Default(){return V0}static get DefaultType(){return q0}static get NAME(){return U0}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[W0]:this._getTitle(),[z0]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const r=nc.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}Ut(nc);const K0="scrollspy",G0="bs.scrollspy",sc=`.${G0}`,Y0=".data-api",J0=`activate${sc}`,$l=`click${sc}`,X0=`load${sc}${Y0}`,Q0="dropdown-item",gi="active",Z0='[data-bs-spy="scroll"]',To="[href]",ey=".nav, .list-group",Fl=".nav-link",ty=".nav-item",ry=".list-group-item",iy=`${Fl}, ${ty} > ${Fl}, ${ry}`,ny=".dropdown",sy=".dropdown-toggle",oy={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ay={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ns extends Jt{constructor(e,r){super(e,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return oy}static get DefaultType(){return ay}static get NAME(){return K0}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Br(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(r=>Number.parseFloat(r))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ce.off(this._config.target,$l),ce.on(this._config.target,$l,To,e=>{const r=this._observableSections.get(e.target.hash);if(r){e.preventDefault();const i=this._rootElement||window,o=r.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:o,behavior:"smooth"});return}i.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),e)}_observerCallback(e){const r=p=>this._targetLinks.get(`#${p.target.id}`),i=p=>{this._previousScrollData.visibleEntryTop=p.target.offsetTop,this._process(r(p))},o=(this._rootElement||document.documentElement).scrollTop,l=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const p of e){if(!p.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(p));continue}const n=p.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(l&&n){if(i(p),!o)return;continue}!l&&!n&&i(p)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=we.find(To,this._config.target);for(const r of e){if(!r.hash||Nr(r))continue;const i=we.findOne(decodeURI(r.hash),this._element);Hi(i)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(gi),this._activateParents(e),ce.trigger(this._element,J0,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(Q0)){we.findOne(sy,e.closest(ny)).classList.add(gi);return}for(const r of we.parents(e,ey))for(const i of we.prev(r,iy))i.classList.add(gi)}_clearActiveClass(e){e.classList.remove(gi);const r=we.find(`${To}.${gi}`,e);for(const i of r)i.classList.remove(gi)}static jQueryInterface(e){return this.each(function(){const r=Ns.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}ce.on(window,X0,()=>{for(const t of we.find(Z0))Ns.getOrCreateInstance(t)});Ut(Ns);const cy="tab",ly="bs.tab",ii=`.${ly}`,hy=`hide${ii}`,uy=`hidden${ii}`,fy=`show${ii}`,dy=`shown${ii}`,py=`click${ii}`,_y=`keydown${ii}`,gy=`load${ii}`,my="ArrowLeft",jl="ArrowRight",vy="ArrowUp",Ul="ArrowDown",Ao="Home",Wl="End",Qr="active",zl="fade",ko="show",yy="dropdown",Sy=".dropdown-toggle",by=".dropdown-menu",Ro=":not(.dropdown-toggle)",Cy='.list-group, .nav, [role="tablist"]',Ey=".nav-item, .list-group-item",wy=`.nav-link${Ro}, .list-group-item${Ro}, [role="tab"]${Ro}`,xf='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',xo=`${wy}, ${xf}`,Ty=`.${Qr}[data-bs-toggle="tab"], .${Qr}[data-bs-toggle="pill"], .${Qr}[data-bs-toggle="list"]`;class Di extends Jt{constructor(e){super(e),this._parent=this._element.closest(Cy),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ce.on(this._element,_y,r=>this._keydown(r)))}static get NAME(){return cy}show(){const e=this._element;if(this._elemIsActive(e))return;const r=this._getActiveElem(),i=r?ce.trigger(r,hy,{relatedTarget:e}):null;ce.trigger(e,fy,{relatedTarget:r}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(r,e),this._activate(e,r))}_activate(e,r){if(!e)return;e.classList.add(Qr),this._activate(we.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(ko);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),ce.trigger(e,dy,{relatedTarget:r})};this._queueCallback(i,e,e.classList.contains(zl))}_deactivate(e,r){if(!e)return;e.classList.remove(Qr),e.blur(),this._deactivate(we.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(ko);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),ce.trigger(e,uy,{relatedTarget:r})};this._queueCallback(i,e,e.classList.contains(zl))}_keydown(e){if(![my,jl,vy,Ul,Ao,Wl].includes(e.key))return;e.stopPropagation(),e.preventDefault();const r=this._getChildren().filter(o=>!Nr(o));let i;if([Ao,Wl].includes(e.key))i=r[e.key===Ao?0:r.length-1];else{const o=[jl,Ul].includes(e.key);i=tc(r,e.target,o,!0)}i&&(i.focus({preventScroll:!0}),Di.getOrCreateInstance(i).show())}_getChildren(){return we.find(xo,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,r){this._setAttributeIfNotExists(e,"role","tablist");for(const i of r)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const r=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",r),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),r||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const r=we.getElementFromSelector(e);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,r){const i=this._getOuterElement(e);if(!i.classList.contains(yy))return;const o=(l,p)=>{const n=we.findOne(l,i);n&&n.classList.toggle(p,r)};o(Sy,Qr),o(by,ko),i.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(e,r,i){e.hasAttribute(r)||e.setAttribute(r,i)}_elemIsActive(e){return e.classList.contains(Qr)}_getInnerElement(e){return e.matches(xo)?e:we.findOne(xo,e)}_getOuterElement(e){return e.closest(Ey)||e}static jQueryInterface(e){return this.each(function(){const r=Di.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}ce.on(document,py,xf,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Nr(this)&&Di.getOrCreateInstance(this).show()});ce.on(window,gy,()=>{for(const t of we.find(Ty))Di.getOrCreateInstance(t)});Ut(Di);const Ay="toast",ky="bs.toast",jr=`.${ky}`,Ry=`mouseover${jr}`,xy=`mouseout${jr}`,Dy=`focusin${jr}`,Ly=`focusout${jr}`,Py=`hide${jr}`,Oy=`hidden${jr}`,My=`show${jr}`,Iy=`shown${jr}`,By="fade",Vl="hide",Yn="show",Jn="showing",Ny={animation:"boolean",autohide:"boolean",delay:"number"},Hy={animation:!0,autohide:!0,delay:5e3};class Hs extends Jt{constructor(e,r){super(e,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Hy}static get DefaultType(){return Ny}static get NAME(){return Ay}show(){if(ce.trigger(this._element,My).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(By);const r=()=>{this._element.classList.remove(Jn),ce.trigger(this._element,Iy),this._maybeScheduleHide()};this._element.classList.remove(Vl),bn(this._element),this._element.classList.add(Yn,Jn),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||ce.trigger(this._element,Py).defaultPrevented)return;const r=()=>{this._element.classList.add(Vl),this._element.classList.remove(Jn,Yn),ce.trigger(this._element,Oy)};this._element.classList.add(Jn),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Yn),super.dispose()}isShown(){return this._element.classList.contains(Yn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,r){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){ce.on(this._element,Ry,e=>this._onInteraction(e,!0)),ce.on(this._element,xy,e=>this._onInteraction(e,!1)),ce.on(this._element,Dy,e=>this._onInteraction(e,!0)),ce.on(this._element,Ly,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const r=Hs.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}Ms(Hs);Ut(Hs);var Df={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(t){(function(e,r){t.exports=e.document?r(e,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return r(i)}})(typeof window<"u"?window:Hd,function(e,r){var i=[],o=Object.getPrototypeOf,l=i.slice,p=i.flat?function(a){return i.flat.call(a)}:function(a){return i.concat.apply([],a)},n=i.push,s=i.indexOf,c={},f=c.toString,m=c.hasOwnProperty,y=m.toString,C=y.call(Object),b={},S=function(d){return typeof d=="function"&&typeof d.nodeType!="number"&&typeof d.item!="function"},u=function(d){return d!=null&&d===d.window},_=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function g(a,d,w){w=w||_;var k,D,L=w.createElement("script");if(L.text=a,d)for(k in v)D=d[k]||d.getAttribute&&d.getAttribute(k),D&&L.setAttribute(k,D);w.head.appendChild(L).parentNode.removeChild(L)}function E(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?c[f.call(a)]||"object":typeof a}var T="3.7.0",R=/HTML$/i,h=function(a,d){return new h.fn.init(a,d)};h.fn=h.prototype={jquery:T,constructor:h,length:0,toArray:function(){return l.call(this)},get:function(a){return a==null?l.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var d=h.merge(this.constructor(),a);return d.prevObject=this,d},each:function(a){return h.each(this,a)},map:function(a){return this.pushStack(h.map(this,function(d,w){return a.call(d,w,d)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(h.grep(this,function(a,d){return(d+1)%2}))},odd:function(){return this.pushStack(h.grep(this,function(a,d){return d%2}))},eq:function(a){var d=this.length,w=+a+(a<0?d:0);return this.pushStack(w>=0&&w<d?[this[w]]:[])},end:function(){return this.prevObject||this.constructor()},push:n,sort:i.sort,splice:i.splice},h.extend=h.fn.extend=function(){var a,d,w,k,D,L,P=arguments[0]||{},U=1,$=arguments.length,G=!1;for(typeof P=="boolean"&&(G=P,P=arguments[U]||{},U++),typeof P!="object"&&!S(P)&&(P={}),U===$&&(P=this,U--);U<$;U++)if((a=arguments[U])!=null)for(d in a)k=a[d],!(d==="__proto__"||P===k)&&(G&&k&&(h.isPlainObject(k)||(D=Array.isArray(k)))?(w=P[d],D&&!Array.isArray(w)?L=[]:!D&&!h.isPlainObject(w)?L={}:L=w,D=!1,P[d]=h.extend(G,L,k)):k!==void 0&&(P[d]=k));return P},h.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var d,w;return!a||f.call(a)!=="[object Object]"?!1:(d=o(a),d?(w=m.call(d,"constructor")&&d.constructor,typeof w=="function"&&y.call(w)===C):!0)},isEmptyObject:function(a){var d;for(d in a)return!1;return!0},globalEval:function(a,d,w){g(a,{nonce:d&&d.nonce},w)},each:function(a,d){var w,k=0;if(A(a))for(w=a.length;k<w&&d.call(a[k],k,a[k])!==!1;k++);else for(k in a)if(d.call(a[k],k,a[k])===!1)break;return a},text:function(a){var d,w="",k=0,D=a.nodeType;if(D){if(D===1||D===9||D===11)return a.textContent;if(D===3||D===4)return a.nodeValue}else for(;d=a[k++];)w+=h.text(d);return w},makeArray:function(a,d){var w=d||[];return a!=null&&(A(Object(a))?h.merge(w,typeof a=="string"?[a]:a):n.call(w,a)),w},inArray:function(a,d,w){return d==null?-1:s.call(d,a,w)},isXMLDoc:function(a){var d=a&&a.namespaceURI,w=a&&(a.ownerDocument||a).documentElement;return!R.test(d||w&&w.nodeName||"HTML")},merge:function(a,d){for(var w=+d.length,k=0,D=a.length;k<w;k++)a[D++]=d[k];return a.length=D,a},grep:function(a,d,w){for(var k,D=[],L=0,P=a.length,U=!w;L<P;L++)k=!d(a[L],L),k!==U&&D.push(a[L]);return D},map:function(a,d,w){var k,D,L=0,P=[];if(A(a))for(k=a.length;L<k;L++)D=d(a[L],L,w),D!=null&&P.push(D);else for(L in a)D=d(a[L],L,w),D!=null&&P.push(D);return p(P)},guid:1,support:b}),typeof Symbol=="function"&&(h.fn[Symbol.iterator]=i[Symbol.iterator]),h.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,d){c["[object "+d+"]"]=d.toLowerCase()});function A(a){var d=!!a&&"length"in a&&a.length,w=E(a);return S(a)||u(a)?!1:w==="array"||d===0||typeof d=="number"&&d>0&&d-1 in a}function x(a,d){return a.nodeName&&a.nodeName.toLowerCase()===d.toLowerCase()}var O=i.pop,H=i.sort,N=i.splice,B="[\\x20\\t\\r\\n\\f]",ee=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g");h.contains=function(a,d){var w=d&&d.parentNode;return a===w||!!(w&&w.nodeType===1&&(a.contains?a.contains(w):a.compareDocumentPosition&&a.compareDocumentPosition(w)&16))};var ue=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function se(a,d){return d?a==="\0"?"":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a}h.escapeSelector=function(a){return(a+"").replace(ue,se)};var M=_,F=n;(function(){var a,d,w,k,D,L=F,P,U,$,G,Z,ne=h.expando,X=0,le=0,Re=In(),Ne=In(),De=In(),et=In(),Ze=function(I,V){return I===V&&(D=!0),0},Zt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",er="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Be="\\["+B+"*("+er+")(?:"+B+"*([*^$|!~]?=)"+B+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+er+"))|)"+B+"*\\]",Kr=":("+er+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Be+")*)|.*)\\)|)",He=new RegExp(B+"+","g"),Ge=new RegExp("^"+B+"*,"+B+"*"),Gi=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),eo=new RegExp(B+"|>"),tr=new RegExp(Kr),Yi=new RegExp("^"+er+"$"),rr={ID:new RegExp("^#("+er+")"),CLASS:new RegExp("^\\.("+er+")"),TAG:new RegExp("^("+er+"|[*])"),ATTR:new RegExp("^"+Be),PSEUDO:new RegExp("^"+Kr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+Zt+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},xr=/^(?:input|select|textarea|button)$/i,Dr=/^h\d$/i,It=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,to=/[+~]/,pr=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),_r=function(I,V){var J="0x"+I.slice(1)-65536;return V||(J<0?String.fromCharCode(J+65536):String.fromCharCode(J>>10|55296,J&1023|56320))},xd=function(){Lr()},Dd=Hn(function(I){return I.disabled===!0&&x(I,"fieldset")},{dir:"parentNode",next:"legend"});function Ld(){try{return P.activeElement}catch{}}try{L.apply(i=l.call(M.childNodes),M.childNodes),i[M.childNodes.length].nodeType}catch{L={apply:function(V,J){F.apply(V,l.call(J))},call:function(V){F.apply(V,l.call(arguments,1))}}}function We(I,V,J,Q){var ie,fe,ve,Ce,ye,Me,ke,xe=V&&V.ownerDocument,Ie=V?V.nodeType:9;if(J=J||[],typeof I!="string"||!I||Ie!==1&&Ie!==9&&Ie!==11)return J;if(!Q&&(Lr(V),V=V||P,$)){if(Ie!==11&&(ye=It.exec(I)))if(ie=ye[1]){if(Ie===9)if(ve=V.getElementById(ie)){if(ve.id===ie)return L.call(J,ve),J}else return J;else if(xe&&(ve=xe.getElementById(ie))&&We.contains(V,ve)&&ve.id===ie)return L.call(J,ve),J}else{if(ye[2])return L.apply(J,V.getElementsByTagName(I)),J;if((ie=ye[3])&&V.getElementsByClassName)return L.apply(J,V.getElementsByClassName(ie)),J}if(!et[I+" "]&&(!G||!G.test(I))){if(ke=I,xe=V,Ie===1&&(eo.test(I)||Gi.test(I))){for(xe=to.test(I)&&ro(V.parentNode)||V,(xe!=V||!b.scope)&&((Ce=V.getAttribute("id"))?Ce=h.escapeSelector(Ce):V.setAttribute("id",Ce=ne)),Me=Bn(I),fe=Me.length;fe--;)Me[fe]=(Ce?"#"+Ce:":scope")+" "+Nn(Me[fe]);ke=Me.join(",")}try{return L.apply(J,xe.querySelectorAll(ke)),J}catch{et(I,!0)}finally{Ce===ne&&V.removeAttribute("id")}}}return Dc(I.replace(ee,"$1"),V,J,Q)}function In(){var I=[];function V(J,Q){return I.push(J+" ")>d.cacheLength&&delete V[I.shift()],V[J+" "]=Q}return V}function qt(I){return I[ne]=!0,I}function fi(I){var V=P.createElement("fieldset");try{return!!I(V)}catch{return!1}finally{V.parentNode&&V.parentNode.removeChild(V),V=null}}function Pd(I){return function(V){return x(V,"input")&&V.type===I}}function Od(I){return function(V){return(x(V,"input")||x(V,"button"))&&V.type===I}}function Rc(I){return function(V){return"form"in V?V.parentNode&&V.disabled===!1?"label"in V?"label"in V.parentNode?V.parentNode.disabled===I:V.disabled===I:V.isDisabled===I||V.isDisabled!==!I&&Dd(V)===I:V.disabled===I:"label"in V?V.disabled===I:!1}}function Gr(I){return qt(function(V){return V=+V,qt(function(J,Q){for(var ie,fe=I([],J.length,V),ve=fe.length;ve--;)J[ie=fe[ve]]&&(J[ie]=!(Q[ie]=J[ie]))})})}function ro(I){return I&&typeof I.getElementsByTagName<"u"&&I}function Lr(I){var V,J=I?I.ownerDocument||I:M;return J==P||J.nodeType!==9||!J.documentElement||(P=J,U=P.documentElement,$=!h.isXMLDoc(P),Z=U.matches||U.webkitMatchesSelector||U.msMatchesSelector,M!=P&&(V=P.defaultView)&&V.top!==V&&V.addEventListener("unload",xd),b.getById=fi(function(Q){return U.appendChild(Q).id=h.expando,!P.getElementsByName||!P.getElementsByName(h.expando).length}),b.disconnectedMatch=fi(function(Q){return Z.call(Q,"*")}),b.scope=fi(function(){return P.querySelectorAll(":scope")}),b.cssHas=fi(function(){try{return P.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),b.getById?(d.filter.ID=function(Q){var ie=Q.replace(pr,_r);return function(fe){return fe.getAttribute("id")===ie}},d.find.ID=function(Q,ie){if(typeof ie.getElementById<"u"&&$){var fe=ie.getElementById(Q);return fe?[fe]:[]}}):(d.filter.ID=function(Q){var ie=Q.replace(pr,_r);return function(fe){var ve=typeof fe.getAttributeNode<"u"&&fe.getAttributeNode("id");return ve&&ve.value===ie}},d.find.ID=function(Q,ie){if(typeof ie.getElementById<"u"&&$){var fe,ve,Ce,ye=ie.getElementById(Q);if(ye){if(fe=ye.getAttributeNode("id"),fe&&fe.value===Q)return[ye];for(Ce=ie.getElementsByName(Q),ve=0;ye=Ce[ve++];)if(fe=ye.getAttributeNode("id"),fe&&fe.value===Q)return[ye]}return[]}}),d.find.TAG=function(Q,ie){return typeof ie.getElementsByTagName<"u"?ie.getElementsByTagName(Q):ie.querySelectorAll(Q)},d.find.CLASS=function(Q,ie){if(typeof ie.getElementsByClassName<"u"&&$)return ie.getElementsByClassName(Q)},G=[],fi(function(Q){var ie;U.appendChild(Q).innerHTML="<a id='"+ne+"' href='' disabled='disabled'></a><select id='"+ne+"-\r\\' disabled='disabled'><option selected=''></option></select>",Q.querySelectorAll("[selected]").length||G.push("\\["+B+"*(?:value|"+Zt+")"),Q.querySelectorAll("[id~="+ne+"-]").length||G.push("~="),Q.querySelectorAll("a#"+ne+"+*").length||G.push(".#.+[+~]"),Q.querySelectorAll(":checked").length||G.push(":checked"),ie=P.createElement("input"),ie.setAttribute("type","hidden"),Q.appendChild(ie).setAttribute("name","D"),U.appendChild(Q).disabled=!0,Q.querySelectorAll(":disabled").length!==2&&G.push(":enabled",":disabled"),ie=P.createElement("input"),ie.setAttribute("name",""),Q.appendChild(ie),Q.querySelectorAll("[name='']").length||G.push("\\["+B+"*name"+B+"*="+B+`*(?:''|"")`)}),b.cssHas||G.push(":has"),G=G.length&&new RegExp(G.join("|")),Ze=function(Q,ie){if(Q===ie)return D=!0,0;var fe=!Q.compareDocumentPosition-!ie.compareDocumentPosition;return fe||(fe=(Q.ownerDocument||Q)==(ie.ownerDocument||ie)?Q.compareDocumentPosition(ie):1,fe&1||!b.sortDetached&&ie.compareDocumentPosition(Q)===fe?Q===P||Q.ownerDocument==M&&We.contains(M,Q)?-1:ie===P||ie.ownerDocument==M&&We.contains(M,ie)?1:k?s.call(k,Q)-s.call(k,ie):0:fe&4?-1:1)}),P}We.matches=function(I,V){return We(I,null,null,V)},We.matchesSelector=function(I,V){if(Lr(I),$&&!et[V+" "]&&(!G||!G.test(V)))try{var J=Z.call(I,V);if(J||b.disconnectedMatch||I.document&&I.document.nodeType!==11)return J}catch{et(V,!0)}return We(V,P,null,[I]).length>0},We.contains=function(I,V){return(I.ownerDocument||I)!=P&&Lr(I),h.contains(I,V)},We.attr=function(I,V){(I.ownerDocument||I)!=P&&Lr(I);var J=d.attrHandle[V.toLowerCase()],Q=J&&m.call(d.attrHandle,V.toLowerCase())?J(I,V,!$):void 0;return Q!==void 0?Q:I.getAttribute(V)},We.error=function(I){throw new Error("Syntax error, unrecognized expression: "+I)},h.uniqueSort=function(I){var V,J=[],Q=0,ie=0;if(D=!b.sortStable,k=!b.sortStable&&l.call(I,0),H.call(I,Ze),D){for(;V=I[ie++];)V===I[ie]&&(Q=J.push(ie));for(;Q--;)N.call(I,J[Q],1)}return k=null,I},h.fn.uniqueSort=function(){return this.pushStack(h.uniqueSort(l.apply(this)))},d=h.expr={cacheLength:50,createPseudo:qt,match:rr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(I){return I[1]=I[1].replace(pr,_r),I[3]=(I[3]||I[4]||I[5]||"").replace(pr,_r),I[2]==="~="&&(I[3]=" "+I[3]+" "),I.slice(0,4)},CHILD:function(I){return I[1]=I[1].toLowerCase(),I[1].slice(0,3)==="nth"?(I[3]||We.error(I[0]),I[4]=+(I[4]?I[5]+(I[6]||1):2*(I[3]==="even"||I[3]==="odd")),I[5]=+(I[7]+I[8]||I[3]==="odd")):I[3]&&We.error(I[0]),I},PSEUDO:function(I){var V,J=!I[6]&&I[2];return rr.CHILD.test(I[0])?null:(I[3]?I[2]=I[4]||I[5]||"":J&&tr.test(J)&&(V=Bn(J,!0))&&(V=J.indexOf(")",J.length-V)-J.length)&&(I[0]=I[0].slice(0,V),I[2]=J.slice(0,V)),I.slice(0,3))}},filter:{TAG:function(I){var V=I.replace(pr,_r).toLowerCase();return I==="*"?function(){return!0}:function(J){return x(J,V)}},CLASS:function(I){var V=Re[I+" "];return V||(V=new RegExp("(^|"+B+")"+I+"("+B+"|$)"))&&Re(I,function(J){return V.test(typeof J.className=="string"&&J.className||typeof J.getAttribute<"u"&&J.getAttribute("class")||"")})},ATTR:function(I,V,J){return function(Q){var ie=We.attr(Q,I);return ie==null?V==="!=":V?(ie+="",V==="="?ie===J:V==="!="?ie!==J:V==="^="?J&&ie.indexOf(J)===0:V==="*="?J&&ie.indexOf(J)>-1:V==="$="?J&&ie.slice(-J.length)===J:V==="~="?(" "+ie.replace(He," ")+" ").indexOf(J)>-1:V==="|="?ie===J||ie.slice(0,J.length+1)===J+"-":!1):!0}},CHILD:function(I,V,J,Q,ie){var fe=I.slice(0,3)!=="nth",ve=I.slice(-4)!=="last",Ce=V==="of-type";return Q===1&&ie===0?function(ye){return!!ye.parentNode}:function(ye,Me,ke){var xe,Ie,Te,Ve,yt,ot=fe!==ve?"nextSibling":"previousSibling",Bt=ye.parentNode,ir=Ce&&ye.nodeName.toLowerCase(),di=!ke&&!Ce,ft=!1;if(Bt){if(fe){for(;ot;){for(Te=ye;Te=Te[ot];)if(Ce?x(Te,ir):Te.nodeType===1)return!1;yt=ot=I==="only"&&!yt&&"nextSibling"}return!0}if(yt=[ve?Bt.firstChild:Bt.lastChild],ve&&di){for(Ie=Bt[ne]||(Bt[ne]={}),xe=Ie[I]||[],Ve=xe[0]===X&&xe[1],ft=Ve&&xe[2],Te=Ve&&Bt.childNodes[Ve];Te=++Ve&&Te&&Te[ot]||(ft=Ve=0)||yt.pop();)if(Te.nodeType===1&&++ft&&Te===ye){Ie[I]=[X,Ve,ft];break}}else if(di&&(Ie=ye[ne]||(ye[ne]={}),xe=Ie[I]||[],Ve=xe[0]===X&&xe[1],ft=Ve),ft===!1)for(;(Te=++Ve&&Te&&Te[ot]||(ft=Ve=0)||yt.pop())&&!((Ce?x(Te,ir):Te.nodeType===1)&&++ft&&(di&&(Ie=Te[ne]||(Te[ne]={}),Ie[I]=[X,ft]),Te===ye)););return ft-=ie,ft===Q||ft%Q===0&&ft/Q>=0}}},PSEUDO:function(I,V){var J,Q=d.pseudos[I]||d.setFilters[I.toLowerCase()]||We.error("unsupported pseudo: "+I);return Q[ne]?Q(V):Q.length>1?(J=[I,I,"",V],d.setFilters.hasOwnProperty(I.toLowerCase())?qt(function(ie,fe){for(var ve,Ce=Q(ie,V),ye=Ce.length;ye--;)ve=s.call(ie,Ce[ye]),ie[ve]=!(fe[ve]=Ce[ye])}):function(ie){return Q(ie,0,J)}):Q}},pseudos:{not:qt(function(I){var V=[],J=[],Q=oo(I.replace(ee,"$1"));return Q[ne]?qt(function(ie,fe,ve,Ce){for(var ye,Me=Q(ie,null,Ce,[]),ke=ie.length;ke--;)(ye=Me[ke])&&(ie[ke]=!(fe[ke]=ye))}):function(ie,fe,ve){return V[0]=ie,Q(V,null,ve,J),V[0]=null,!J.pop()}}),has:qt(function(I){return function(V){return We(I,V).length>0}}),contains:qt(function(I){return I=I.replace(pr,_r),function(V){return(V.textContent||h.text(V)).indexOf(I)>-1}}),lang:qt(function(I){return Yi.test(I||"")||We.error("unsupported lang: "+I),I=I.replace(pr,_r).toLowerCase(),function(V){var J;do if(J=$?V.lang:V.getAttribute("xml:lang")||V.getAttribute("lang"))return J=J.toLowerCase(),J===I||J.indexOf(I+"-")===0;while((V=V.parentNode)&&V.nodeType===1);return!1}}),target:function(I){var V=e.location&&e.location.hash;return V&&V.slice(1)===I.id},root:function(I){return I===U},focus:function(I){return I===Ld()&&P.hasFocus()&&!!(I.type||I.href||~I.tabIndex)},enabled:Rc(!1),disabled:Rc(!0),checked:function(I){return x(I,"input")&&!!I.checked||x(I,"option")&&!!I.selected},selected:function(I){return I.parentNode&&I.parentNode.selectedIndex,I.selected===!0},empty:function(I){for(I=I.firstChild;I;I=I.nextSibling)if(I.nodeType<6)return!1;return!0},parent:function(I){return!d.pseudos.empty(I)},header:function(I){return Dr.test(I.nodeName)},input:function(I){return xr.test(I.nodeName)},button:function(I){return x(I,"input")&&I.type==="button"||x(I,"button")},text:function(I){var V;return x(I,"input")&&I.type==="text"&&((V=I.getAttribute("type"))==null||V.toLowerCase()==="text")},first:Gr(function(){return[0]}),last:Gr(function(I,V){return[V-1]}),eq:Gr(function(I,V,J){return[J<0?J+V:J]}),even:Gr(function(I,V){for(var J=0;J<V;J+=2)I.push(J);return I}),odd:Gr(function(I,V){for(var J=1;J<V;J+=2)I.push(J);return I}),lt:Gr(function(I,V,J){var Q;for(J<0?Q=J+V:J>V?Q=V:Q=J;--Q>=0;)I.push(Q);return I}),gt:Gr(function(I,V,J){for(var Q=J<0?J+V:J;++Q<V;)I.push(Q);return I})}},d.pseudos.nth=d.pseudos.eq;for(a in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[a]=Pd(a);for(a in{submit:!0,reset:!0})d.pseudos[a]=Od(a);function xc(){}xc.prototype=d.filters=d.pseudos,d.setFilters=new xc;function Bn(I,V){var J,Q,ie,fe,ve,Ce,ye,Me=Ne[I+" "];if(Me)return V?0:Me.slice(0);for(ve=I,Ce=[],ye=d.preFilter;ve;){(!J||(Q=Ge.exec(ve)))&&(Q&&(ve=ve.slice(Q[0].length)||ve),Ce.push(ie=[])),J=!1,(Q=Gi.exec(ve))&&(J=Q.shift(),ie.push({value:J,type:Q[0].replace(ee," ")}),ve=ve.slice(J.length));for(fe in d.filter)(Q=rr[fe].exec(ve))&&(!ye[fe]||(Q=ye[fe](Q)))&&(J=Q.shift(),ie.push({value:J,type:fe,matches:Q}),ve=ve.slice(J.length));if(!J)break}return V?ve.length:ve?We.error(I):Ne(I,Ce).slice(0)}function Nn(I){for(var V=0,J=I.length,Q="";V<J;V++)Q+=I[V].value;return Q}function Hn(I,V,J){var Q=V.dir,ie=V.next,fe=ie||Q,ve=J&&fe==="parentNode",Ce=le++;return V.first?function(ye,Me,ke){for(;ye=ye[Q];)if(ye.nodeType===1||ve)return I(ye,Me,ke);return!1}:function(ye,Me,ke){var xe,Ie,Te=[X,Ce];if(ke){for(;ye=ye[Q];)if((ye.nodeType===1||ve)&&I(ye,Me,ke))return!0}else for(;ye=ye[Q];)if(ye.nodeType===1||ve)if(Ie=ye[ne]||(ye[ne]={}),ie&&x(ye,ie))ye=ye[Q]||ye;else{if((xe=Ie[fe])&&xe[0]===X&&xe[1]===Ce)return Te[2]=xe[2];if(Ie[fe]=Te,Te[2]=I(ye,Me,ke))return!0}return!1}}function io(I){return I.length>1?function(V,J,Q){for(var ie=I.length;ie--;)if(!I[ie](V,J,Q))return!1;return!0}:I[0]}function Md(I,V,J){for(var Q=0,ie=V.length;Q<ie;Q++)We(I,V[Q],J);return J}function $n(I,V,J,Q,ie){for(var fe,ve=[],Ce=0,ye=I.length,Me=V!=null;Ce<ye;Ce++)(fe=I[Ce])&&(!J||J(fe,Q,ie))&&(ve.push(fe),Me&&V.push(Ce));return ve}function no(I,V,J,Q,ie,fe){return Q&&!Q[ne]&&(Q=no(Q)),ie&&!ie[ne]&&(ie=no(ie,fe)),qt(function(ve,Ce,ye,Me){var ke,xe,Ie,Te,Ve=[],yt=[],ot=Ce.length,Bt=ve||Md(V||"*",ye.nodeType?[ye]:ye,[]),ir=I&&(ve||!V)?$n(Bt,Ve,I,ye,Me):Bt;if(J?(Te=ie||(ve?I:ot||Q)?[]:Ce,J(ir,Te,ye,Me)):Te=ir,Q)for(ke=$n(Te,yt),Q(ke,[],ye,Me),xe=ke.length;xe--;)(Ie=ke[xe])&&(Te[yt[xe]]=!(ir[yt[xe]]=Ie));if(ve){if(ie||I){if(ie){for(ke=[],xe=Te.length;xe--;)(Ie=Te[xe])&&ke.push(ir[xe]=Ie);ie(null,Te=[],ke,Me)}for(xe=Te.length;xe--;)(Ie=Te[xe])&&(ke=ie?s.call(ve,Ie):Ve[xe])>-1&&(ve[ke]=!(Ce[ke]=Ie))}}else Te=$n(Te===Ce?Te.splice(ot,Te.length):Te),ie?ie(null,Ce,Te,Me):L.apply(Ce,Te)})}function so(I){for(var V,J,Q,ie=I.length,fe=d.relative[I[0].type],ve=fe||d.relative[" "],Ce=fe?1:0,ye=Hn(function(xe){return xe===V},ve,!0),Me=Hn(function(xe){return s.call(V,xe)>-1},ve,!0),ke=[function(xe,Ie,Te){var Ve=!fe&&(Te||Ie!=w)||((V=Ie).nodeType?ye(xe,Ie,Te):Me(xe,Ie,Te));return V=null,Ve}];Ce<ie;Ce++)if(J=d.relative[I[Ce].type])ke=[Hn(io(ke),J)];else{if(J=d.filter[I[Ce].type].apply(null,I[Ce].matches),J[ne]){for(Q=++Ce;Q<ie&&!d.relative[I[Q].type];Q++);return no(Ce>1&&io(ke),Ce>1&&Nn(I.slice(0,Ce-1).concat({value:I[Ce-2].type===" "?"*":""})).replace(ee,"$1"),J,Ce<Q&&so(I.slice(Ce,Q)),Q<ie&&so(I=I.slice(Q)),Q<ie&&Nn(I))}ke.push(J)}return io(ke)}function Id(I,V){var J=V.length>0,Q=I.length>0,ie=function(fe,ve,Ce,ye,Me){var ke,xe,Ie,Te=0,Ve="0",yt=fe&&[],ot=[],Bt=w,ir=fe||Q&&d.find.TAG("*",Me),di=X+=Bt==null?1:Math.random()||.1,ft=ir.length;for(Me&&(w=ve==P||ve||Me);Ve!==ft&&(ke=ir[Ve])!=null;Ve++){if(Q&&ke){for(xe=0,!ve&&ke.ownerDocument!=P&&(Lr(ke),Ce=!$);Ie=I[xe++];)if(Ie(ke,ve||P,Ce)){L.call(ye,ke);break}Me&&(X=di)}J&&((ke=!Ie&&ke)&&Te--,fe&&yt.push(ke))}if(Te+=Ve,J&&Ve!==Te){for(xe=0;Ie=V[xe++];)Ie(yt,ot,ve,Ce);if(fe){if(Te>0)for(;Ve--;)yt[Ve]||ot[Ve]||(ot[Ve]=O.call(ye));ot=$n(ot)}L.apply(ye,ot),Me&&!fe&&ot.length>0&&Te+V.length>1&&h.uniqueSort(ye)}return Me&&(X=di,w=Bt),yt};return J?qt(ie):ie}function oo(I,V){var J,Q=[],ie=[],fe=De[I+" "];if(!fe){for(V||(V=Bn(I)),J=V.length;J--;)fe=so(V[J]),fe[ne]?Q.push(fe):ie.push(fe);fe=De(I,Id(ie,Q)),fe.selector=I}return fe}function Dc(I,V,J,Q){var ie,fe,ve,Ce,ye,Me=typeof I=="function"&&I,ke=!Q&&Bn(I=Me.selector||I);if(J=J||[],ke.length===1){if(fe=ke[0]=ke[0].slice(0),fe.length>2&&(ve=fe[0]).type==="ID"&&V.nodeType===9&&$&&d.relative[fe[1].type]){if(V=(d.find.ID(ve.matches[0].replace(pr,_r),V)||[])[0],V)Me&&(V=V.parentNode);else return J;I=I.slice(fe.shift().value.length)}for(ie=rr.needsContext.test(I)?0:fe.length;ie--&&(ve=fe[ie],!d.relative[Ce=ve.type]);)if((ye=d.find[Ce])&&(Q=ye(ve.matches[0].replace(pr,_r),to.test(fe[0].type)&&ro(V.parentNode)||V))){if(fe.splice(ie,1),I=Q.length&&Nn(fe),!I)return L.apply(J,Q),J;break}}return(Me||oo(I,ke))(Q,V,!$,J,!V||to.test(I)&&ro(V.parentNode)||V),J}b.sortStable=ne.split("").sort(Ze).join("")===ne,Lr(),b.sortDetached=fi(function(I){return I.compareDocumentPosition(P.createElement("fieldset"))&1}),h.find=We,h.expr[":"]=h.expr.pseudos,h.unique=h.uniqueSort,We.compile=oo,We.select=Dc,We.setDocument=Lr,We.escape=h.escapeSelector,We.getText=h.text,We.isXML=h.isXMLDoc,We.selectors=h.expr,We.support=h.support,We.uniqueSort=h.uniqueSort})();var j=function(a,d,w){for(var k=[],D=w!==void 0;(a=a[d])&&a.nodeType!==9;)if(a.nodeType===1){if(D&&h(a).is(w))break;k.push(a)}return k},q=function(a,d){for(var w=[];a;a=a.nextSibling)a.nodeType===1&&a!==d&&w.push(a);return w},te=h.expr.match.needsContext,ge=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function me(a,d,w){return S(d)?h.grep(a,function(k,D){return!!d.call(k,D,k)!==w}):d.nodeType?h.grep(a,function(k){return k===d!==w}):typeof d!="string"?h.grep(a,function(k){return s.call(d,k)>-1!==w}):h.filter(d,a,w)}h.filter=function(a,d,w){var k=d[0];return w&&(a=":not("+a+")"),d.length===1&&k.nodeType===1?h.find.matchesSelector(k,a)?[k]:[]:h.find.matches(a,h.grep(d,function(D){return D.nodeType===1}))},h.fn.extend({find:function(a){var d,w,k=this.length,D=this;if(typeof a!="string")return this.pushStack(h(a).filter(function(){for(d=0;d<k;d++)if(h.contains(D[d],this))return!0}));for(w=this.pushStack([]),d=0;d<k;d++)h.find(a,D[d],w);return k>1?h.uniqueSort(w):w},filter:function(a){return this.pushStack(me(this,a||[],!1))},not:function(a){return this.pushStack(me(this,a||[],!0))},is:function(a){return!!me(this,typeof a=="string"&&te.test(a)?h(a):a||[],!1).length}});var oe,pe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,z=h.fn.init=function(a,d,w){var k,D;if(!a)return this;if(w=w||oe,typeof a=="string")if(a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?k=[null,a,null]:k=pe.exec(a),k&&(k[1]||!d))if(k[1]){if(d=d instanceof h?d[0]:d,h.merge(this,h.parseHTML(k[1],d&&d.nodeType?d.ownerDocument||d:_,!0)),ge.test(k[1])&&h.isPlainObject(d))for(k in d)S(this[k])?this[k](d[k]):this.attr(k,d[k]);return this}else return D=_.getElementById(k[2]),D&&(this[0]=D,this.length=1),this;else return!d||d.jquery?(d||w).find(a):this.constructor(d).find(a);else{if(a.nodeType)return this[0]=a,this.length=1,this;if(S(a))return w.ready!==void 0?w.ready(a):a(h)}return h.makeArray(a,this)};z.prototype=h.fn,oe=h(_);var W=/^(?:parents|prev(?:Until|All))/,Y={children:!0,contents:!0,next:!0,prev:!0};h.fn.extend({has:function(a){var d=h(a,this),w=d.length;return this.filter(function(){for(var k=0;k<w;k++)if(h.contains(this,d[k]))return!0})},closest:function(a,d){var w,k=0,D=this.length,L=[],P=typeof a!="string"&&h(a);if(!te.test(a)){for(;k<D;k++)for(w=this[k];w&&w!==d;w=w.parentNode)if(w.nodeType<11&&(P?P.index(w)>-1:w.nodeType===1&&h.find.matchesSelector(w,a))){L.push(w);break}}return this.pushStack(L.length>1?h.uniqueSort(L):L)},index:function(a){return a?typeof a=="string"?s.call(h(a),this[0]):s.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,d){return this.pushStack(h.uniqueSort(h.merge(this.get(),h(a,d))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function re(a,d){for(;(a=a[d])&&a.nodeType!==1;);return a}h.each({parent:function(a){var d=a.parentNode;return d&&d.nodeType!==11?d:null},parents:function(a){return j(a,"parentNode")},parentsUntil:function(a,d,w){return j(a,"parentNode",w)},next:function(a){return re(a,"nextSibling")},prev:function(a){return re(a,"previousSibling")},nextAll:function(a){return j(a,"nextSibling")},prevAll:function(a){return j(a,"previousSibling")},nextUntil:function(a,d,w){return j(a,"nextSibling",w)},prevUntil:function(a,d,w){return j(a,"previousSibling",w)},siblings:function(a){return q((a.parentNode||{}).firstChild,a)},children:function(a){return q(a.firstChild)},contents:function(a){return a.contentDocument!=null&&o(a.contentDocument)?a.contentDocument:(x(a,"template")&&(a=a.content||a),h.merge([],a.childNodes))}},function(a,d){h.fn[a]=function(w,k){var D=h.map(this,d,w);return a.slice(-5)!=="Until"&&(k=w),k&&typeof k=="string"&&(D=h.filter(k,D)),this.length>1&&(Y[a]||h.uniqueSort(D),W.test(a)&&D.reverse()),this.pushStack(D)}});var ae=/[^\x20\t\r\n\f]+/g;function Pe(a){var d={};return h.each(a.match(ae)||[],function(w,k){d[k]=!0}),d}h.Callbacks=function(a){a=typeof a=="string"?Pe(a):h.extend({},a);var d,w,k,D,L=[],P=[],U=-1,$=function(){for(D=D||a.once,k=d=!0;P.length;U=-1)for(w=P.shift();++U<L.length;)L[U].apply(w[0],w[1])===!1&&a.stopOnFalse&&(U=L.length,w=!1);a.memory||(w=!1),d=!1,D&&(w?L=[]:L="")},G={add:function(){return L&&(w&&!d&&(U=L.length-1,P.push(w)),function Z(ne){h.each(ne,function(X,le){S(le)?(!a.unique||!G.has(le))&&L.push(le):le&&le.length&&E(le)!=="string"&&Z(le)})}(arguments),w&&!d&&$()),this},remove:function(){return h.each(arguments,function(Z,ne){for(var X;(X=h.inArray(ne,L,X))>-1;)L.splice(X,1),X<=U&&U--}),this},has:function(Z){return Z?h.inArray(Z,L)>-1:L.length>0},empty:function(){return L&&(L=[]),this},disable:function(){return D=P=[],L=w="",this},disabled:function(){return!L},lock:function(){return D=P=[],!w&&!d&&(L=w=""),this},locked:function(){return!!D},fireWith:function(Z,ne){return D||(ne=ne||[],ne=[Z,ne.slice?ne.slice():ne],P.push(ne),d||$()),this},fire:function(){return G.fireWith(this,arguments),this},fired:function(){return!!k}};return G};function de(a){return a}function Fe(a){throw a}function Ue(a,d,w,k){var D;try{a&&S(D=a.promise)?D.call(a).done(d).fail(w):a&&S(D=a.then)?D.call(a,d,w):d.apply(void 0,[a].slice(k))}catch(L){w.apply(void 0,[L])}}h.extend({Deferred:function(a){var d=[["notify","progress",h.Callbacks("memory"),h.Callbacks("memory"),2],["resolve","done",h.Callbacks("once memory"),h.Callbacks("once memory"),0,"resolved"],["reject","fail",h.Callbacks("once memory"),h.Callbacks("once memory"),1,"rejected"]],w="pending",k={state:function(){return w},always:function(){return D.done(arguments).fail(arguments),this},catch:function(L){return k.then(null,L)},pipe:function(){var L=arguments;return h.Deferred(function(P){h.each(d,function(U,$){var G=S(L[$[4]])&&L[$[4]];D[$[1]](function(){var Z=G&&G.apply(this,arguments);Z&&S(Z.promise)?Z.promise().progress(P.notify).done(P.resolve).fail(P.reject):P[$[0]+"With"](this,G?[Z]:arguments)})}),L=null}).promise()},then:function(L,P,U){var $=0;function G(Z,ne,X,le){return function(){var Re=this,Ne=arguments,De=function(){var Ze,Zt;if(!(Z<$)){if(Ze=X.apply(Re,Ne),Ze===ne.promise())throw new TypeError("Thenable self-resolution");Zt=Ze&&(typeof Ze=="object"||typeof Ze=="function")&&Ze.then,S(Zt)?le?Zt.call(Ze,G($,ne,de,le),G($,ne,Fe,le)):($++,Zt.call(Ze,G($,ne,de,le),G($,ne,Fe,le),G($,ne,de,ne.notifyWith))):(X!==de&&(Re=void 0,Ne=[Ze]),(le||ne.resolveWith)(Re,Ne))}},et=le?De:function(){try{De()}catch(Ze){h.Deferred.exceptionHook&&h.Deferred.exceptionHook(Ze,et.error),Z+1>=$&&(X!==Fe&&(Re=void 0,Ne=[Ze]),ne.rejectWith(Re,Ne))}};Z?et():(h.Deferred.getErrorHook?et.error=h.Deferred.getErrorHook():h.Deferred.getStackHook&&(et.error=h.Deferred.getStackHook()),e.setTimeout(et))}}return h.Deferred(function(Z){d[0][3].add(G(0,Z,S(U)?U:de,Z.notifyWith)),d[1][3].add(G(0,Z,S(L)?L:de)),d[2][3].add(G(0,Z,S(P)?P:Fe))}).promise()},promise:function(L){return L!=null?h.extend(L,k):k}},D={};return h.each(d,function(L,P){var U=P[2],$=P[5];k[P[1]]=U.add,$&&U.add(function(){w=$},d[3-L][2].disable,d[3-L][3].disable,d[0][2].lock,d[0][3].lock),U.add(P[3].fire),D[P[0]]=function(){return D[P[0]+"With"](this===D?void 0:this,arguments),this},D[P[0]+"With"]=U.fireWith}),k.promise(D),a&&a.call(D,D),D},when:function(a){var d=arguments.length,w=d,k=Array(w),D=l.call(arguments),L=h.Deferred(),P=function(U){return function($){k[U]=this,D[U]=arguments.length>1?l.call(arguments):$,--d||L.resolveWith(k,D)}};if(d<=1&&(Ue(a,L.done(P(w)).resolve,L.reject,!d),L.state()==="pending"||S(D[w]&&D[w].then)))return L.then();for(;w--;)Ue(D[w],P(w),L.reject);return L.promise()}});var ze=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;h.Deferred.exceptionHook=function(a,d){e.console&&e.console.warn&&a&&ze.test(a.name)&&e.console.warn("jQuery.Deferred exception: "+a.message,a.stack,d)},h.readyException=function(a){e.setTimeout(function(){throw a})};var Oe=h.Deferred();h.fn.ready=function(a){return Oe.then(a).catch(function(d){h.readyException(d)}),this},h.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--h.readyWait:h.isReady)||(h.isReady=!0,!(a!==!0&&--h.readyWait>0)&&Oe.resolveWith(_,[h]))}}),h.ready.then=Oe.then;function Dt(){_.removeEventListener("DOMContentLoaded",Dt),e.removeEventListener("load",Dt),h.ready()}_.readyState==="complete"||_.readyState!=="loading"&&!_.documentElement.doScroll?e.setTimeout(h.ready):(_.addEventListener("DOMContentLoaded",Dt),e.addEventListener("load",Dt));var mt=function(a,d,w,k,D,L,P){var U=0,$=a.length,G=w==null;if(E(w)==="object"){D=!0;for(U in w)mt(a,d,U,w[U],!0,L,P)}else if(k!==void 0&&(D=!0,S(k)||(P=!0),G&&(P?(d.call(a,k),d=null):(G=d,d=function(Z,ne,X){return G.call(h(Z),X)})),d))for(;U<$;U++)d(a[U],w,P?k:k.call(a[U],U,d(a[U],w)));return D?a:G?d.call(a):$?d(a[0],w):L},Fi=/^-ms-/,Et=/-([a-z])/g;function Lt(a,d){return d.toUpperCase()}function Xe(a){return a.replace(Fi,"ms-").replace(Et,Lt)}var lt=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType};function Pt(){this.expando=h.expando+Pt.uid++}Pt.uid=1,Pt.prototype={cache:function(a){var d=a[this.expando];return d||(d={},lt(a)&&(a.nodeType?a[this.expando]=d:Object.defineProperty(a,this.expando,{value:d,configurable:!0}))),d},set:function(a,d,w){var k,D=this.cache(a);if(typeof d=="string")D[Xe(d)]=w;else for(k in d)D[Xe(k)]=d[k];return D},get:function(a,d){return d===void 0?this.cache(a):a[this.expando]&&a[this.expando][Xe(d)]},access:function(a,d,w){return d===void 0||d&&typeof d=="string"&&w===void 0?this.get(a,d):(this.set(a,d,w),w!==void 0?w:d)},remove:function(a,d){var w,k=a[this.expando];if(k!==void 0){if(d!==void 0)for(Array.isArray(d)?d=d.map(Xe):(d=Xe(d),d=d in k?[d]:d.match(ae)||[]),w=d.length;w--;)delete k[d[w]];(d===void 0||h.isEmptyObject(k))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var d=a[this.expando];return d!==void 0&&!h.isEmptyObject(d)}};var be=new Pt,Qe=new Pt,Er=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Wr=/[A-Z]/g;function ni(a){return a==="true"?!0:a==="false"?!1:a==="null"?null:a===+a+""?+a:Er.test(a)?JSON.parse(a):a}function zr(a,d,w){var k;if(w===void 0&&a.nodeType===1)if(k="data-"+d.replace(Wr,"-$&").toLowerCase(),w=a.getAttribute(k),typeof w=="string"){try{w=ni(w)}catch{}Qe.set(a,d,w)}else w=void 0;return w}h.extend({hasData:function(a){return Qe.hasData(a)||be.hasData(a)},data:function(a,d,w){return Qe.access(a,d,w)},removeData:function(a,d){Qe.remove(a,d)},_data:function(a,d,w){return be.access(a,d,w)},_removeData:function(a,d){be.remove(a,d)}}),h.fn.extend({data:function(a,d){var w,k,D,L=this[0],P=L&&L.attributes;if(a===void 0){if(this.length&&(D=Qe.get(L),L.nodeType===1&&!be.get(L,"hasDataAttrs"))){for(w=P.length;w--;)P[w]&&(k=P[w].name,k.indexOf("data-")===0&&(k=Xe(k.slice(5)),zr(L,k,D[k])));be.set(L,"hasDataAttrs",!0)}return D}return typeof a=="object"?this.each(function(){Qe.set(this,a)}):mt(this,function(U){var $;if(L&&U===void 0)return $=Qe.get(L,a),$!==void 0||($=zr(L,a),$!==void 0)?$:void 0;this.each(function(){Qe.set(this,a,U)})},null,d,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Qe.remove(this,a)})}}),h.extend({queue:function(a,d,w){var k;if(a)return d=(d||"fx")+"queue",k=be.get(a,d),w&&(!k||Array.isArray(w)?k=be.access(a,d,h.makeArray(w)):k.push(w)),k||[]},dequeue:function(a,d){d=d||"fx";var w=h.queue(a,d),k=w.length,D=w.shift(),L=h._queueHooks(a,d),P=function(){h.dequeue(a,d)};D==="inprogress"&&(D=w.shift(),k--),D&&(d==="fx"&&w.unshift("inprogress"),delete L.stop,D.call(a,P,L)),!k&&L&&L.empty.fire()},_queueHooks:function(a,d){var w=d+"queueHooks";return be.get(a,w)||be.access(a,w,{empty:h.Callbacks("once memory").add(function(){be.remove(a,[d+"queue",w])})})}}),h.fn.extend({queue:function(a,d){var w=2;return typeof a!="string"&&(d=a,a="fx",w--),arguments.length<w?h.queue(this[0],a):d===void 0?this:this.each(function(){var k=h.queue(this,a,d);h._queueHooks(this,a),a==="fx"&&k[0]!=="inprogress"&&h.dequeue(this,a)})},dequeue:function(a){return this.each(function(){h.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){var w,k=1,D=h.Deferred(),L=this,P=this.length,U=function(){--k||D.resolveWith(L,[L])};for(typeof a!="string"&&(d=a,a=void 0),a=a||"fx";P--;)w=be.get(L[P],a+"queueHooks"),w&&w.empty&&(k++,w.empty.add(U));return U(),D.promise(d)}});var Ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Mt=new RegExp("^(?:([+-])=|)("+Ot+")([a-z%]*)$","i"),wt=["Top","Right","Bottom","Left"],Wt=_.documentElement,wr=function(a){return h.contains(a.ownerDocument,a)},fr={composed:!0};Wt.getRootNode&&(wr=function(a){return h.contains(a.ownerDocument,a)||a.getRootNode(fr)===a.ownerDocument});var si=function(a,d){return a=d||a,a.style.display==="none"||a.style.display===""&&wr(a)&&h.css(a,"display")==="none"};function kn(a,d,w,k){var D,L,P=20,U=k?function(){return k.cur()}:function(){return h.css(a,d,"")},$=U(),G=w&&w[3]||(h.cssNumber[d]?"":"px"),Z=a.nodeType&&(h.cssNumber[d]||G!=="px"&&+$)&&Mt.exec(h.css(a,d));if(Z&&Z[3]!==G){for($=$/2,G=G||Z[3],Z=+$||1;P--;)h.style(a,d,Z+G),(1-L)*(1-(L=U()/$||.5))<=0&&(P=0),Z=Z/L;Z=Z*2,h.style(a,d,Z+G),w=w||[]}return w&&(Z=+Z||+$||0,D=w[1]?Z+(w[1]+1)*w[2]:+w[2],k&&(k.unit=G,k.start=Z,k.end=D)),D}var Ye={};function Tr(a){var d,w=a.ownerDocument,k=a.nodeName,D=Ye[k];return D||(d=w.body.appendChild(w.createElement(k)),D=h.css(d,"display"),d.parentNode.removeChild(d),D==="none"&&(D="block"),Ye[k]=D,D)}function Ar(a,d){for(var w,k,D=[],L=0,P=a.length;L<P;L++)k=a[L],k.style&&(w=k.style.display,d?(w==="none"&&(D[L]=be.get(k,"display")||null,D[L]||(k.style.display="")),k.style.display===""&&si(k)&&(D[L]=Tr(k))):w!=="none"&&(D[L]="none",be.set(k,"display",w)));for(L=0;L<P;L++)D[L]!=null&&(a[L].style.display=D[L]);return a}h.fn.extend({show:function(){return Ar(this,!0)},hide:function(){return Ar(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){si(this)?h(this).show():h(this).hide()})}});var kr=/^(?:checkbox|radio)$/i,oi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ji=/^$|^module$|\/(?:java|ecma)script/i;(function(){var a=_.createDocumentFragment(),d=a.appendChild(_.createElement("div")),w=_.createElement("input");w.setAttribute("type","radio"),w.setAttribute("checked","checked"),w.setAttribute("name","t"),d.appendChild(w),b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",b.option=!!d.lastChild})();var ht={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ht.tbody=ht.tfoot=ht.colgroup=ht.caption=ht.thead,ht.th=ht.td,b.option||(ht.optgroup=ht.option=[1,"<select multiple='multiple'>","</select>"]);function nt(a,d){var w;return typeof a.getElementsByTagName<"u"?w=a.getElementsByTagName(d||"*"):typeof a.querySelectorAll<"u"?w=a.querySelectorAll(d||"*"):w=[],d===void 0||d&&x(a,d)?h.merge([a],w):w}function Rr(a,d){for(var w=0,k=a.length;w<k;w++)be.set(a[w],"globalEval",!d||be.get(d[w],"globalEval"))}var Ui=/<|&#?\w+;/;function Rn(a,d,w,k,D){for(var L,P,U,$,G,Z,ne=d.createDocumentFragment(),X=[],le=0,Re=a.length;le<Re;le++)if(L=a[le],L||L===0)if(E(L)==="object")h.merge(X,L.nodeType?[L]:L);else if(!Ui.test(L))X.push(d.createTextNode(L));else{for(P=P||ne.appendChild(d.createElement("div")),U=(oi.exec(L)||["",""])[1].toLowerCase(),$=ht[U]||ht._default,P.innerHTML=$[1]+h.htmlPrefilter(L)+$[2],Z=$[0];Z--;)P=P.lastChild;h.merge(X,P.childNodes),P=ne.firstChild,P.textContent=""}for(ne.textContent="",le=0;L=X[le++];){if(k&&h.inArray(L,k)>-1){D&&D.push(L);continue}if(G=wr(L),P=nt(ne.appendChild(L),"script"),G&&Rr(P),w)for(Z=0;L=P[Z++];)ji.test(L.type||"")&&w.push(L)}return ne}var Xt=/^([^.]*)(?:\.(.+)|)/;function Qt(){return!0}function dr(){return!1}function ai(a,d,w,k,D,L){var P,U;if(typeof d=="object"){typeof w!="string"&&(k=k||w,w=void 0);for(U in d)ai(a,U,w,k,d[U],L);return a}if(k==null&&D==null?(D=w,k=w=void 0):D==null&&(typeof w=="string"?(D=k,k=void 0):(D=k,k=w,w=void 0)),D===!1)D=dr;else if(!D)return a;return L===1&&(P=D,D=function($){return h().off($),P.apply(this,arguments)},D.guid=P.guid||(P.guid=h.guid++)),a.each(function(){h.event.add(this,d,D,k,w)})}h.event={global:{},add:function(a,d,w,k,D){var L,P,U,$,G,Z,ne,X,le,Re,Ne,De=be.get(a);if(lt(a))for(w.handler&&(L=w,w=L.handler,D=L.selector),D&&h.find.matchesSelector(Wt,D),w.guid||(w.guid=h.guid++),($=De.events)||($=De.events=Object.create(null)),(P=De.handle)||(P=De.handle=function(et){return typeof h<"u"&&h.event.triggered!==et.type?h.event.dispatch.apply(a,arguments):void 0}),d=(d||"").match(ae)||[""],G=d.length;G--;)U=Xt.exec(d[G])||[],le=Ne=U[1],Re=(U[2]||"").split(".").sort(),le&&(ne=h.event.special[le]||{},le=(D?ne.delegateType:ne.bindType)||le,ne=h.event.special[le]||{},Z=h.extend({type:le,origType:Ne,data:k,handler:w,guid:w.guid,selector:D,needsContext:D&&h.expr.match.needsContext.test(D),namespace:Re.join(".")},L),(X=$[le])||(X=$[le]=[],X.delegateCount=0,(!ne.setup||ne.setup.call(a,k,Re,P)===!1)&&a.addEventListener&&a.addEventListener(le,P)),ne.add&&(ne.add.call(a,Z),Z.handler.guid||(Z.handler.guid=w.guid)),D?X.splice(X.delegateCount++,0,Z):X.push(Z),h.event.global[le]=!0)},remove:function(a,d,w,k,D){var L,P,U,$,G,Z,ne,X,le,Re,Ne,De=be.hasData(a)&&be.get(a);if(!(!De||!($=De.events))){for(d=(d||"").match(ae)||[""],G=d.length;G--;){if(U=Xt.exec(d[G])||[],le=Ne=U[1],Re=(U[2]||"").split(".").sort(),!le){for(le in $)h.event.remove(a,le+d[G],w,k,!0);continue}for(ne=h.event.special[le]||{},le=(k?ne.delegateType:ne.bindType)||le,X=$[le]||[],U=U[2]&&new RegExp("(^|\\.)"+Re.join("\\.(?:.*\\.|)")+"(\\.|$)"),P=L=X.length;L--;)Z=X[L],(D||Ne===Z.origType)&&(!w||w.guid===Z.guid)&&(!U||U.test(Z.namespace))&&(!k||k===Z.selector||k==="**"&&Z.selector)&&(X.splice(L,1),Z.selector&&X.delegateCount--,ne.remove&&ne.remove.call(a,Z));P&&!X.length&&((!ne.teardown||ne.teardown.call(a,Re,De.handle)===!1)&&h.removeEvent(a,le,De.handle),delete $[le])}h.isEmptyObject($)&&be.remove(a,"handle events")}},dispatch:function(a){var d,w,k,D,L,P,U=new Array(arguments.length),$=h.event.fix(a),G=(be.get(this,"events")||Object.create(null))[$.type]||[],Z=h.event.special[$.type]||{};for(U[0]=$,d=1;d<arguments.length;d++)U[d]=arguments[d];if($.delegateTarget=this,!(Z.preDispatch&&Z.preDispatch.call(this,$)===!1)){for(P=h.event.handlers.call(this,$,G),d=0;(D=P[d++])&&!$.isPropagationStopped();)for($.currentTarget=D.elem,w=0;(L=D.handlers[w++])&&!$.isImmediatePropagationStopped();)(!$.rnamespace||L.namespace===!1||$.rnamespace.test(L.namespace))&&($.handleObj=L,$.data=L.data,k=((h.event.special[L.origType]||{}).handle||L.handler).apply(D.elem,U),k!==void 0&&($.result=k)===!1&&($.preventDefault(),$.stopPropagation()));return Z.postDispatch&&Z.postDispatch.call(this,$),$.result}},handlers:function(a,d){var w,k,D,L,P,U=[],$=d.delegateCount,G=a.target;if($&&G.nodeType&&!(a.type==="click"&&a.button>=1)){for(;G!==this;G=G.parentNode||this)if(G.nodeType===1&&!(a.type==="click"&&G.disabled===!0)){for(L=[],P={},w=0;w<$;w++)k=d[w],D=k.selector+" ",P[D]===void 0&&(P[D]=k.needsContext?h(D,this).index(G)>-1:h.find(D,this,null,[G]).length),P[D]&&L.push(k);L.length&&U.push({elem:G,handlers:L})}}return G=this,$<d.length&&U.push({elem:G,handlers:d.slice($)}),U},addProp:function(a,d){Object.defineProperty(h.Event.prototype,a,{enumerable:!0,configurable:!0,get:S(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(w){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:w})}})},fix:function(a){return a[h.expando]?a:new h.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var d=this||a;return kr.test(d.type)&&d.click&&x(d,"input")&&ci(d,"click",!0),!1},trigger:function(a){var d=this||a;return kr.test(d.type)&&d.click&&x(d,"input")&&ci(d,"click"),!0},_default:function(a){var d=a.target;return kr.test(d.type)&&d.click&&x(d,"input")&&be.get(d,"click")||x(d,"a")}},beforeunload:{postDispatch:function(a){a.result!==void 0&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};function ci(a,d,w){if(!w){be.get(a,d)===void 0&&h.event.add(a,d,Qt);return}be.set(a,d,!1),h.event.add(a,d,{namespace:!1,handler:function(k){var D,L=be.get(this,d);if(k.isTrigger&1&&this[d]){if(L)(h.event.special[d]||{}).delegateType&&k.stopPropagation();else if(L=l.call(arguments),be.set(this,d,L),this[d](),D=be.get(this,d),be.set(this,d,!1),L!==D)return k.stopImmediatePropagation(),k.preventDefault(),D}else L&&(be.set(this,d,h.event.trigger(L[0],L.slice(1),this)),k.stopPropagation(),k.isImmediatePropagationStopped=Qt)}})}h.removeEvent=function(a,d,w){a.removeEventListener&&a.removeEventListener(d,w)},h.Event=function(a,d){if(!(this instanceof h.Event))return new h.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===void 0&&a.returnValue===!1?Qt:dr,this.target=a.target&&a.target.nodeType===3?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,d&&h.extend(this,d),this.timeStamp=a&&a.timeStamp||Date.now(),this[h.expando]=!0},h.Event.prototype={constructor:h.Event,isDefaultPrevented:dr,isPropagationStopped:dr,isImmediatePropagationStopped:dr,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Qt,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Qt,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Qt,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},h.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},h.event.addProp),h.each({focus:"focusin",blur:"focusout"},function(a,d){function w(k){if(_.documentMode){var D=be.get(this,"handle"),L=h.event.fix(k);L.type=k.type==="focusin"?"focus":"blur",L.isSimulated=!0,D(k),L.target===L.currentTarget&&D(L)}else h.event.simulate(d,k.target,h.event.fix(k))}h.event.special[a]={setup:function(){var k;if(ci(this,a,!0),_.documentMode)k=be.get(this,d),k||this.addEventListener(d,w),be.set(this,d,(k||0)+1);else return!1},trigger:function(){return ci(this,a),!0},teardown:function(){var k;if(_.documentMode)k=be.get(this,d)-1,k?be.set(this,d,k):(this.removeEventListener(d,w),be.remove(this,d));else return!1},_default:function(k){return be.get(k.target,a)},delegateType:d},h.event.special[d]={setup:function(){var k=this.ownerDocument||this.document||this,D=_.documentMode?this:k,L=be.get(D,d);L||(_.documentMode?this.addEventListener(d,w):k.addEventListener(a,w,!0)),be.set(D,d,(L||0)+1)},teardown:function(){var k=this.ownerDocument||this.document||this,D=_.documentMode?this:k,L=be.get(D,d)-1;L?be.set(D,d,L):(_.documentMode?this.removeEventListener(d,w):k.removeEventListener(a,w,!0),be.remove(D,d))}}}),h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,d){h.event.special[a]={delegateType:d,bindType:d,handle:function(w){var k,D=this,L=w.relatedTarget,P=w.handleObj;return(!L||L!==D&&!h.contains(D,L))&&(w.type=P.origType,k=P.handler.apply(this,arguments),w.type=d),k}}}),h.fn.extend({on:function(a,d,w,k){return ai(this,a,d,w,k)},one:function(a,d,w,k){return ai(this,a,d,w,k,1)},off:function(a,d,w){var k,D;if(a&&a.preventDefault&&a.handleObj)return k=a.handleObj,h(a.delegateTarget).off(k.namespace?k.origType+"."+k.namespace:k.origType,k.selector,k.handler),this;if(typeof a=="object"){for(D in a)this.off(D,d,a[D]);return this}return(d===!1||typeof d=="function")&&(w=d,d=void 0),w===!1&&(w=dr),this.each(function(){h.event.remove(this,a,w,d)})}});var li=/<script|<style|<link/i,zt=/checked\s*(?:[^=]|=\s*.checked.)/i,xn=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Wi(a,d){return x(a,"table")&&x(d.nodeType!==11?d:d.firstChild,"tr")&&h(a).children("tbody")[0]||a}function Dn(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function Ln(a){return(a.type||"").slice(0,5)==="true/"?a.type=a.type.slice(5):a.removeAttribute("type"),a}function Pn(a,d){var w,k,D,L,P,U,$;if(d.nodeType===1){if(be.hasData(a)&&(L=be.get(a),$=L.events,$)){be.remove(d,"handle events");for(D in $)for(w=0,k=$[D].length;w<k;w++)h.event.add(d,D,$[D][w])}Qe.hasData(a)&&(P=Qe.access(a),U=h.extend({},P),Qe.set(d,U))}}function Ee(a,d){var w=d.nodeName.toLowerCase();w==="input"&&kr.test(a.type)?d.checked=a.checked:(w==="input"||w==="textarea")&&(d.defaultValue=a.defaultValue)}function K(a,d,w,k){d=p(d);var D,L,P,U,$,G,Z=0,ne=a.length,X=ne-1,le=d[0],Re=S(le);if(Re||ne>1&&typeof le=="string"&&!b.checkClone&&zt.test(le))return a.each(function(Ne){var De=a.eq(Ne);Re&&(d[0]=le.call(this,Ne,De.html())),K(De,d,w,k)});if(ne&&(D=Rn(d,a[0].ownerDocument,!1,a,k),L=D.firstChild,D.childNodes.length===1&&(D=L),L||k)){for(P=h.map(nt(D,"script"),Dn),U=P.length;Z<ne;Z++)$=D,Z!==X&&($=h.clone($,!0,!0),U&&h.merge(P,nt($,"script"))),w.call(a[Z],$,Z);if(U)for(G=P[P.length-1].ownerDocument,h.map(P,Ln),Z=0;Z<U;Z++)$=P[Z],ji.test($.type||"")&&!be.access($,"globalEval")&&h.contains(G,$)&&($.src&&($.type||"").toLowerCase()!=="module"?h._evalUrl&&!$.noModule&&h._evalUrl($.src,{nonce:$.nonce||$.getAttribute("nonce")},G):g($.textContent.replace(xn,""),$,G))}return a}function he(a,d,w){for(var k,D=d?h.filter(d,a):a,L=0;(k=D[L])!=null;L++)!w&&k.nodeType===1&&h.cleanData(nt(k)),k.parentNode&&(w&&wr(k)&&Rr(nt(k,"script")),k.parentNode.removeChild(k));return a}h.extend({htmlPrefilter:function(a){return a},clone:function(a,d,w){var k,D,L,P,U=a.cloneNode(!0),$=wr(a);if(!b.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!h.isXMLDoc(a))for(P=nt(U),L=nt(a),k=0,D=L.length;k<D;k++)Ee(L[k],P[k]);if(d)if(w)for(L=L||nt(a),P=P||nt(U),k=0,D=L.length;k<D;k++)Pn(L[k],P[k]);else Pn(a,U);return P=nt(U,"script"),P.length>0&&Rr(P,!$&&nt(a,"script")),U},cleanData:function(a){for(var d,w,k,D=h.event.special,L=0;(w=a[L])!==void 0;L++)if(lt(w)){if(d=w[be.expando]){if(d.events)for(k in d.events)D[k]?h.event.remove(w,k):h.removeEvent(w,k,d.handle);w[be.expando]=void 0}w[Qe.expando]&&(w[Qe.expando]=void 0)}}}),h.fn.extend({detach:function(a){return he(this,a,!0)},remove:function(a){return he(this,a)},text:function(a){return mt(this,function(d){return d===void 0?h.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=d)})},null,a,arguments.length)},append:function(){return K(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Wi(this,a);d.appendChild(a)}})},prepend:function(){return K(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Wi(this,a);d.insertBefore(a,d.firstChild)}})},before:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,d=0;(a=this[d])!=null;d++)a.nodeType===1&&(h.cleanData(nt(a,!1)),a.textContent="");return this},clone:function(a,d){return a=a??!1,d=d??a,this.map(function(){return h.clone(this,a,d)})},html:function(a){return mt(this,function(d){var w=this[0]||{},k=0,D=this.length;if(d===void 0&&w.nodeType===1)return w.innerHTML;if(typeof d=="string"&&!li.test(d)&&!ht[(oi.exec(d)||["",""])[1].toLowerCase()]){d=h.htmlPrefilter(d);try{for(;k<D;k++)w=this[k]||{},w.nodeType===1&&(h.cleanData(nt(w,!1)),w.innerHTML=d);w=0}catch{}}w&&this.empty().append(d)},null,a,arguments.length)},replaceWith:function(){var a=[];return K(this,arguments,function(d){var w=this.parentNode;h.inArray(this,a)<0&&(h.cleanData(nt(this)),w&&w.replaceChild(d,this))},a)}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){h.fn[a]=function(w){for(var k,D=[],L=h(w),P=L.length-1,U=0;U<=P;U++)k=U===P?this:this.clone(!0),h(L[U])[d](k),n.apply(D,k.get());return this.pushStack(D)}});var _e=new RegExp("^("+Ot+")(?!px)[a-z%]+$","i"),$e=/^--/,Ke=function(a){var d=a.ownerDocument.defaultView;return(!d||!d.opener)&&(d=e),d.getComputedStyle(a)},ut=function(a,d,w){var k,D,L={};for(D in d)L[D]=a.style[D],a.style[D]=d[D];k=w.call(a);for(D in d)a.style[D]=L[D];return k},qe=new RegExp(wt.join("|"),"i");(function(){function a(){if(G){$.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",G.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Wt.appendChild($).appendChild(G);var Z=e.getComputedStyle(G);w=Z.top!=="1%",U=d(Z.marginLeft)===12,G.style.right="60%",L=d(Z.right)===36,k=d(Z.width)===36,G.style.position="absolute",D=d(G.offsetWidth/3)===12,Wt.removeChild($),G=null}}function d(Z){return Math.round(parseFloat(Z))}var w,k,D,L,P,U,$=_.createElement("div"),G=_.createElement("div");G.style&&(G.style.backgroundClip="content-box",G.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=G.style.backgroundClip==="content-box",h.extend(b,{boxSizingReliable:function(){return a(),k},pixelBoxStyles:function(){return a(),L},pixelPosition:function(){return a(),w},reliableMarginLeft:function(){return a(),U},scrollboxSize:function(){return a(),D},reliableTrDimensions:function(){var Z,ne,X,le;return P==null&&(Z=_.createElement("table"),ne=_.createElement("tr"),X=_.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ne.style.cssText="border:1px solid",ne.style.height="1px",X.style.height="9px",X.style.display="block",Wt.appendChild(Z).appendChild(ne).appendChild(X),le=e.getComputedStyle(ne),P=parseInt(le.height,10)+parseInt(le.borderTopWidth,10)+parseInt(le.borderBottomWidth,10)===ne.offsetHeight,Wt.removeChild(Z)),P}}))})();function st(a,d,w){var k,D,L,P,U=$e.test(d),$=a.style;return w=w||Ke(a),w&&(P=w.getPropertyValue(d)||w[d],U&&P&&(P=P.replace(ee,"$1")||void 0),P===""&&!wr(a)&&(P=h.style(a,d)),!b.pixelBoxStyles()&&_e.test(P)&&qe.test(d)&&(k=$.width,D=$.minWidth,L=$.maxWidth,$.minWidth=$.maxWidth=$.width=P,P=w.width,$.width=k,$.minWidth=D,$.maxWidth=L)),P!==void 0?P+"":P}function hi(a,d){return{get:function(){if(a()){delete this.get;return}return(this.get=d).apply(this,arguments)}}}var zi=["Webkit","Moz","ms"],Ws=_.createElement("div").style,fc={};function id(a){for(var d=a[0].toUpperCase()+a.slice(1),w=zi.length;w--;)if(a=zi[w]+d,a in Ws)return a}function zs(a){var d=h.cssProps[a]||fc[a];return d||(a in Ws?a:fc[a]=id(a)||a)}var nd=/^(none|table(?!-c[ea]).+)/,sd={position:"absolute",visibility:"hidden",display:"block"},dc={letterSpacing:"0",fontWeight:"400"};function pc(a,d,w){var k=Mt.exec(d);return k?Math.max(0,k[2]-(w||0))+(k[3]||"px"):d}function Vs(a,d,w,k,D,L){var P=d==="width"?1:0,U=0,$=0,G=0;if(w===(k?"border":"content"))return 0;for(;P<4;P+=2)w==="margin"&&(G+=h.css(a,w+wt[P],!0,D)),k?(w==="content"&&($-=h.css(a,"padding"+wt[P],!0,D)),w!=="margin"&&($-=h.css(a,"border"+wt[P]+"Width",!0,D))):($+=h.css(a,"padding"+wt[P],!0,D),w!=="padding"?$+=h.css(a,"border"+wt[P]+"Width",!0,D):U+=h.css(a,"border"+wt[P]+"Width",!0,D));return!k&&L>=0&&($+=Math.max(0,Math.ceil(a["offset"+d[0].toUpperCase()+d.slice(1)]-L-$-U-.5))||0),$+G}function _c(a,d,w){var k=Ke(a),D=!b.boxSizingReliable()||w,L=D&&h.css(a,"boxSizing",!1,k)==="border-box",P=L,U=st(a,d,k),$="offset"+d[0].toUpperCase()+d.slice(1);if(_e.test(U)){if(!w)return U;U="auto"}return(!b.boxSizingReliable()&&L||!b.reliableTrDimensions()&&x(a,"tr")||U==="auto"||!parseFloat(U)&&h.css(a,"display",!1,k)==="inline")&&a.getClientRects().length&&(L=h.css(a,"boxSizing",!1,k)==="border-box",P=$ in a,P&&(U=a[$])),U=parseFloat(U)||0,U+Vs(a,d,w||(L?"border":"content"),P,k,U)+"px"}h.extend({cssHooks:{opacity:{get:function(a,d){if(d){var w=st(a,"opacity");return w===""?"1":w}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(a,d,w,k){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var D,L,P,U=Xe(d),$=$e.test(d),G=a.style;if($||(d=zs(U)),P=h.cssHooks[d]||h.cssHooks[U],w!==void 0){if(L=typeof w,L==="string"&&(D=Mt.exec(w))&&D[1]&&(w=kn(a,d,D),L="number"),w==null||w!==w)return;L==="number"&&!$&&(w+=D&&D[3]||(h.cssNumber[U]?"":"px")),!b.clearCloneStyle&&w===""&&d.indexOf("background")===0&&(G[d]="inherit"),(!P||!("set"in P)||(w=P.set(a,w,k))!==void 0)&&($?G.setProperty(d,w):G[d]=w)}else return P&&"get"in P&&(D=P.get(a,!1,k))!==void 0?D:G[d]}},css:function(a,d,w,k){var D,L,P,U=Xe(d),$=$e.test(d);return $||(d=zs(U)),P=h.cssHooks[d]||h.cssHooks[U],P&&"get"in P&&(D=P.get(a,!0,w)),D===void 0&&(D=st(a,d,k)),D==="normal"&&d in dc&&(D=dc[d]),w===""||w?(L=parseFloat(D),w===!0||isFinite(L)?L||0:D):D}}),h.each(["height","width"],function(a,d){h.cssHooks[d]={get:function(w,k,D){if(k)return nd.test(h.css(w,"display"))&&(!w.getClientRects().length||!w.getBoundingClientRect().width)?ut(w,sd,function(){return _c(w,d,D)}):_c(w,d,D)},set:function(w,k,D){var L,P=Ke(w),U=!b.scrollboxSize()&&P.position==="absolute",$=U||D,G=$&&h.css(w,"boxSizing",!1,P)==="border-box",Z=D?Vs(w,d,D,G,P):0;return G&&U&&(Z-=Math.ceil(w["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(P[d])-Vs(w,d,"border",!1,P)-.5)),Z&&(L=Mt.exec(k))&&(L[3]||"px")!=="px"&&(w.style[d]=k,k=h.css(w,d)),pc(w,k,Z)}}}),h.cssHooks.marginLeft=hi(b.reliableMarginLeft,function(a,d){if(d)return(parseFloat(st(a,"marginLeft"))||a.getBoundingClientRect().left-ut(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),h.each({margin:"",padding:"",border:"Width"},function(a,d){h.cssHooks[a+d]={expand:function(w){for(var k=0,D={},L=typeof w=="string"?w.split(" "):[w];k<4;k++)D[a+wt[k]+d]=L[k]||L[k-2]||L[0];return D}},a!=="margin"&&(h.cssHooks[a+d].set=pc)}),h.fn.extend({css:function(a,d){return mt(this,function(w,k,D){var L,P,U={},$=0;if(Array.isArray(k)){for(L=Ke(w),P=k.length;$<P;$++)U[k[$]]=h.css(w,k[$],!1,L);return U}return D!==void 0?h.style(w,k,D):h.css(w,k)},a,d,arguments.length>1)}});function vt(a,d,w,k,D){return new vt.prototype.init(a,d,w,k,D)}h.Tween=vt,vt.prototype={constructor:vt,init:function(a,d,w,k,D,L){this.elem=a,this.prop=w,this.easing=D||h.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=k,this.unit=L||(h.cssNumber[w]?"":"px")},cur:function(){var a=vt.propHooks[this.prop];return a&&a.get?a.get(this):vt.propHooks._default.get(this)},run:function(a){var d,w=vt.propHooks[this.prop];return this.options.duration?this.pos=d=h.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=d=a,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),w&&w.set?w.set(this):vt.propHooks._default.set(this),this}},vt.prototype.init.prototype=vt.prototype,vt.propHooks={_default:{get:function(a){var d;return a.elem.nodeType!==1||a.elem[a.prop]!=null&&a.elem.style[a.prop]==null?a.elem[a.prop]:(d=h.css(a.elem,a.prop,""),!d||d==="auto"?0:d)},set:function(a){h.fx.step[a.prop]?h.fx.step[a.prop](a):a.elem.nodeType===1&&(h.cssHooks[a.prop]||a.elem.style[zs(a.prop)]!=null)?h.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},vt.propHooks.scrollTop=vt.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},h.easing={linear:function(a){return a},swing:function(a){return .5-Math.cos(a*Math.PI)/2},_default:"swing"},h.fx=vt.prototype.init,h.fx.step={};var ui,On,od=/^(?:toggle|show|hide)$/,ad=/queueHooks$/;function qs(){On&&(_.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(qs):e.setTimeout(qs,h.fx.interval),h.fx.tick())}function gc(){return e.setTimeout(function(){ui=void 0}),ui=Date.now()}function Mn(a,d){var w,k=0,D={height:a};for(d=d?1:0;k<4;k+=2-d)w=wt[k],D["margin"+w]=D["padding"+w]=a;return d&&(D.opacity=D.width=a),D}function mc(a,d,w){for(var k,D=(Vt.tweeners[d]||[]).concat(Vt.tweeners["*"]),L=0,P=D.length;L<P;L++)if(k=D[L].call(w,d,a))return k}function cd(a,d,w){var k,D,L,P,U,$,G,Z,ne="width"in d||"height"in d,X=this,le={},Re=a.style,Ne=a.nodeType&&si(a),De=be.get(a,"fxshow");w.queue||(P=h._queueHooks(a,"fx"),P.unqueued==null&&(P.unqueued=0,U=P.empty.fire,P.empty.fire=function(){P.unqueued||U()}),P.unqueued++,X.always(function(){X.always(function(){P.unqueued--,h.queue(a,"fx").length||P.empty.fire()})}));for(k in d)if(D=d[k],od.test(D)){if(delete d[k],L=L||D==="toggle",D===(Ne?"hide":"show"))if(D==="show"&&De&&De[k]!==void 0)Ne=!0;else continue;le[k]=De&&De[k]||h.style(a,k)}if($=!h.isEmptyObject(d),!(!$&&h.isEmptyObject(le))){ne&&a.nodeType===1&&(w.overflow=[Re.overflow,Re.overflowX,Re.overflowY],G=De&&De.display,G==null&&(G=be.get(a,"display")),Z=h.css(a,"display"),Z==="none"&&(G?Z=G:(Ar([a],!0),G=a.style.display||G,Z=h.css(a,"display"),Ar([a]))),(Z==="inline"||Z==="inline-block"&&G!=null)&&h.css(a,"float")==="none"&&($||(X.done(function(){Re.display=G}),G==null&&(Z=Re.display,G=Z==="none"?"":Z)),Re.display="inline-block")),w.overflow&&(Re.overflow="hidden",X.always(function(){Re.overflow=w.overflow[0],Re.overflowX=w.overflow[1],Re.overflowY=w.overflow[2]})),$=!1;for(k in le)$||(De?"hidden"in De&&(Ne=De.hidden):De=be.access(a,"fxshow",{display:G}),L&&(De.hidden=!Ne),Ne&&Ar([a],!0),X.done(function(){Ne||Ar([a]),be.remove(a,"fxshow");for(k in le)h.style(a,k,le[k])})),$=mc(Ne?De[k]:0,k,X),k in De||(De[k]=$.start,Ne&&($.end=$.start,$.start=0))}}function ld(a,d){var w,k,D,L,P;for(w in a)if(k=Xe(w),D=d[k],L=a[w],Array.isArray(L)&&(D=L[1],L=a[w]=L[0]),w!==k&&(a[k]=L,delete a[w]),P=h.cssHooks[k],P&&"expand"in P){L=P.expand(L),delete a[k];for(w in L)w in a||(a[w]=L[w],d[w]=D)}else d[k]=D}function Vt(a,d,w){var k,D,L=0,P=Vt.prefilters.length,U=h.Deferred().always(function(){delete $.elem}),$=function(){if(D)return!1;for(var ne=ui||gc(),X=Math.max(0,G.startTime+G.duration-ne),le=X/G.duration||0,Re=1-le,Ne=0,De=G.tweens.length;Ne<De;Ne++)G.tweens[Ne].run(Re);return U.notifyWith(a,[G,Re,X]),Re<1&&De?X:(De||U.notifyWith(a,[G,1,0]),U.resolveWith(a,[G]),!1)},G=U.promise({elem:a,props:h.extend({},d),opts:h.extend(!0,{specialEasing:{},easing:h.easing._default},w),originalProperties:d,originalOptions:w,startTime:ui||gc(),duration:w.duration,tweens:[],createTween:function(ne,X){var le=h.Tween(a,G.opts,ne,X,G.opts.specialEasing[ne]||G.opts.easing);return G.tweens.push(le),le},stop:function(ne){var X=0,le=ne?G.tweens.length:0;if(D)return this;for(D=!0;X<le;X++)G.tweens[X].run(1);return ne?(U.notifyWith(a,[G,1,0]),U.resolveWith(a,[G,ne])):U.rejectWith(a,[G,ne]),this}}),Z=G.props;for(ld(Z,G.opts.specialEasing);L<P;L++)if(k=Vt.prefilters[L].call(G,a,Z,G.opts),k)return S(k.stop)&&(h._queueHooks(G.elem,G.opts.queue).stop=k.stop.bind(k)),k;return h.map(Z,mc,G),S(G.opts.start)&&G.opts.start.call(a,G),G.progress(G.opts.progress).done(G.opts.done,G.opts.complete).fail(G.opts.fail).always(G.opts.always),h.fx.timer(h.extend($,{elem:a,anim:G,queue:G.opts.queue})),G}h.Animation=h.extend(Vt,{tweeners:{"*":[function(a,d){var w=this.createTween(a,d);return kn(w.elem,a,Mt.exec(d),w),w}]},tweener:function(a,d){S(a)?(d=a,a=["*"]):a=a.match(ae);for(var w,k=0,D=a.length;k<D;k++)w=a[k],Vt.tweeners[w]=Vt.tweeners[w]||[],Vt.tweeners[w].unshift(d)},prefilters:[cd],prefilter:function(a,d){d?Vt.prefilters.unshift(a):Vt.prefilters.push(a)}}),h.speed=function(a,d,w){var k=a&&typeof a=="object"?h.extend({},a):{complete:w||!w&&d||S(a)&&a,duration:a,easing:w&&d||d&&!S(d)&&d};return h.fx.off?k.duration=0:typeof k.duration!="number"&&(k.duration in h.fx.speeds?k.duration=h.fx.speeds[k.duration]:k.duration=h.fx.speeds._default),(k.queue==null||k.queue===!0)&&(k.queue="fx"),k.old=k.complete,k.complete=function(){S(k.old)&&k.old.call(this),k.queue&&h.dequeue(this,k.queue)},k},h.fn.extend({fadeTo:function(a,d,w,k){return this.filter(si).css("opacity",0).show().end().animate({opacity:d},a,w,k)},animate:function(a,d,w,k){var D=h.isEmptyObject(a),L=h.speed(d,w,k),P=function(){var U=Vt(this,h.extend({},a),L);(D||be.get(this,"finish"))&&U.stop(!0)};return P.finish=P,D||L.queue===!1?this.each(P):this.queue(L.queue,P)},stop:function(a,d,w){var k=function(D){var L=D.stop;delete D.stop,L(w)};return typeof a!="string"&&(w=d,d=a,a=void 0),d&&this.queue(a||"fx",[]),this.each(function(){var D=!0,L=a!=null&&a+"queueHooks",P=h.timers,U=be.get(this);if(L)U[L]&&U[L].stop&&k(U[L]);else for(L in U)U[L]&&U[L].stop&&ad.test(L)&&k(U[L]);for(L=P.length;L--;)P[L].elem===this&&(a==null||P[L].queue===a)&&(P[L].anim.stop(w),D=!1,P.splice(L,1));(D||!w)&&h.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var d,w=be.get(this),k=w[a+"queue"],D=w[a+"queueHooks"],L=h.timers,P=k?k.length:0;for(w.finish=!0,h.queue(this,a,[]),D&&D.stop&&D.stop.call(this,!0),d=L.length;d--;)L[d].elem===this&&L[d].queue===a&&(L[d].anim.stop(!0),L.splice(d,1));for(d=0;d<P;d++)k[d]&&k[d].finish&&k[d].finish.call(this);delete w.finish})}}),h.each(["toggle","show","hide"],function(a,d){var w=h.fn[d];h.fn[d]=function(k,D,L){return k==null||typeof k=="boolean"?w.apply(this,arguments):this.animate(Mn(d,!0),k,D,L)}}),h.each({slideDown:Mn("show"),slideUp:Mn("hide"),slideToggle:Mn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,d){h.fn[a]=function(w,k,D){return this.animate(d,w,k,D)}}),h.timers=[],h.fx.tick=function(){var a,d=0,w=h.timers;for(ui=Date.now();d<w.length;d++)a=w[d],!a()&&w[d]===a&&w.splice(d--,1);w.length||h.fx.stop(),ui=void 0},h.fx.timer=function(a){h.timers.push(a),h.fx.start()},h.fx.interval=13,h.fx.start=function(){On||(On=!0,qs())},h.fx.stop=function(){On=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(a,d){return a=h.fx&&h.fx.speeds[a]||a,d=d||"fx",this.queue(d,function(w,k){var D=e.setTimeout(w,a);k.stop=function(){e.clearTimeout(D)}})},function(){var a=_.createElement("input"),d=_.createElement("select"),w=d.appendChild(_.createElement("option"));a.type="checkbox",b.checkOn=a.value!=="",b.optSelected=w.selected,a=_.createElement("input"),a.value="t",a.type="radio",b.radioValue=a.value==="t"}();var vc,Vi=h.expr.attrHandle;h.fn.extend({attr:function(a,d){return mt(this,h.attr,a,d,arguments.length>1)},removeAttr:function(a){return this.each(function(){h.removeAttr(this,a)})}}),h.extend({attr:function(a,d,w){var k,D,L=a.nodeType;if(!(L===3||L===8||L===2)){if(typeof a.getAttribute>"u")return h.prop(a,d,w);if((L!==1||!h.isXMLDoc(a))&&(D=h.attrHooks[d.toLowerCase()]||(h.expr.match.bool.test(d)?vc:void 0)),w!==void 0){if(w===null){h.removeAttr(a,d);return}return D&&"set"in D&&(k=D.set(a,w,d))!==void 0?k:(a.setAttribute(d,w+""),w)}return D&&"get"in D&&(k=D.get(a,d))!==null?k:(k=h.find.attr(a,d),k??void 0)}},attrHooks:{type:{set:function(a,d){if(!b.radioValue&&d==="radio"&&x(a,"input")){var w=a.value;return a.setAttribute("type",d),w&&(a.value=w),d}}}},removeAttr:function(a,d){var w,k=0,D=d&&d.match(ae);if(D&&a.nodeType===1)for(;w=D[k++];)a.removeAttribute(w)}}),vc={set:function(a,d,w){return d===!1?h.removeAttr(a,w):a.setAttribute(w,w),w}},h.each(h.expr.match.bool.source.match(/\w+/g),function(a,d){var w=Vi[d]||h.find.attr;Vi[d]=function(k,D,L){var P,U,$=D.toLowerCase();return L||(U=Vi[$],Vi[$]=P,P=w(k,D,L)!=null?$:null,Vi[$]=U),P}});var hd=/^(?:input|select|textarea|button)$/i,ud=/^(?:a|area)$/i;h.fn.extend({prop:function(a,d){return mt(this,h.prop,a,d,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[h.propFix[a]||a]})}}),h.extend({prop:function(a,d,w){var k,D,L=a.nodeType;if(!(L===3||L===8||L===2))return(L!==1||!h.isXMLDoc(a))&&(d=h.propFix[d]||d,D=h.propHooks[d]),w!==void 0?D&&"set"in D&&(k=D.set(a,w,d))!==void 0?k:a[d]=w:D&&"get"in D&&(k=D.get(a,d))!==null?k:a[d]},propHooks:{tabIndex:{get:function(a){var d=h.find.attr(a,"tabindex");return d?parseInt(d,10):hd.test(a.nodeName)||ud.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(h.propHooks.selected={get:function(a){var d=a.parentNode;return d&&d.parentNode&&d.parentNode.selectedIndex,null},set:function(a){var d=a.parentNode;d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex)}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this});function Vr(a){var d=a.match(ae)||[];return d.join(" ")}function qr(a){return a.getAttribute&&a.getAttribute("class")||""}function Ks(a){return Array.isArray(a)?a:typeof a=="string"?a.match(ae)||[]:[]}h.fn.extend({addClass:function(a){var d,w,k,D,L,P;return S(a)?this.each(function(U){h(this).addClass(a.call(this,U,qr(this)))}):(d=Ks(a),d.length?this.each(function(){if(k=qr(this),w=this.nodeType===1&&" "+Vr(k)+" ",w){for(L=0;L<d.length;L++)D=d[L],w.indexOf(" "+D+" ")<0&&(w+=D+" ");P=Vr(w),k!==P&&this.setAttribute("class",P)}}):this)},removeClass:function(a){var d,w,k,D,L,P;return S(a)?this.each(function(U){h(this).removeClass(a.call(this,U,qr(this)))}):arguments.length?(d=Ks(a),d.length?this.each(function(){if(k=qr(this),w=this.nodeType===1&&" "+Vr(k)+" ",w){for(L=0;L<d.length;L++)for(D=d[L];w.indexOf(" "+D+" ")>-1;)w=w.replace(" "+D+" "," ");P=Vr(w),k!==P&&this.setAttribute("class",P)}}):this):this.attr("class","")},toggleClass:function(a,d){var w,k,D,L,P=typeof a,U=P==="string"||Array.isArray(a);return S(a)?this.each(function($){h(this).toggleClass(a.call(this,$,qr(this),d),d)}):typeof d=="boolean"&&U?d?this.addClass(a):this.removeClass(a):(w=Ks(a),this.each(function(){if(U)for(L=h(this),D=0;D<w.length;D++)k=w[D],L.hasClass(k)?L.removeClass(k):L.addClass(k);else(a===void 0||P==="boolean")&&(k=qr(this),k&&be.set(this,"__className__",k),this.setAttribute&&this.setAttribute("class",k||a===!1?"":be.get(this,"__className__")||""))}))},hasClass:function(a){var d,w,k=0;for(d=" "+a+" ";w=this[k++];)if(w.nodeType===1&&(" "+Vr(qr(w))+" ").indexOf(d)>-1)return!0;return!1}});var fd=/\r/g;h.fn.extend({val:function(a){var d,w,k,D=this[0];return arguments.length?(k=S(a),this.each(function(L){var P;this.nodeType===1&&(k?P=a.call(this,L,h(this).val()):P=a,P==null?P="":typeof P=="number"?P+="":Array.isArray(P)&&(P=h.map(P,function(U){return U==null?"":U+""})),d=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],(!d||!("set"in d)||d.set(this,P,"value")===void 0)&&(this.value=P))})):D?(d=h.valHooks[D.type]||h.valHooks[D.nodeName.toLowerCase()],d&&"get"in d&&(w=d.get(D,"value"))!==void 0?w:(w=D.value,typeof w=="string"?w.replace(fd,""):w??"")):void 0}}),h.extend({valHooks:{option:{get:function(a){var d=h.find.attr(a,"value");return d??Vr(h.text(a))}},select:{get:function(a){var d,w,k,D=a.options,L=a.selectedIndex,P=a.type==="select-one",U=P?null:[],$=P?L+1:D.length;for(L<0?k=$:k=P?L:0;k<$;k++)if(w=D[k],(w.selected||k===L)&&!w.disabled&&(!w.parentNode.disabled||!x(w.parentNode,"optgroup"))){if(d=h(w).val(),P)return d;U.push(d)}return U},set:function(a,d){for(var w,k,D=a.options,L=h.makeArray(d),P=D.length;P--;)k=D[P],(k.selected=h.inArray(h.valHooks.option.get(k),L)>-1)&&(w=!0);return w||(a.selectedIndex=-1),L}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(a,d){if(Array.isArray(d))return a.checked=h.inArray(h(a).val(),d)>-1}},b.checkOn||(h.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})});var qi=e.location,yc={guid:Date.now()},Gs=/\?/;h.parseXML=function(a){var d,w;if(!a||typeof a!="string")return null;try{d=new e.DOMParser().parseFromString(a,"text/xml")}catch{}return w=d&&d.getElementsByTagName("parsererror")[0],(!d||w)&&h.error("Invalid XML: "+(w?h.map(w.childNodes,function(k){return k.textContent}).join(`
`):a)),d};var Sc=/^(?:focusinfocus|focusoutblur)$/,bc=function(a){a.stopPropagation()};h.extend(h.event,{trigger:function(a,d,w,k){var D,L,P,U,$,G,Z,ne,X=[w||_],le=m.call(a,"type")?a.type:a,Re=m.call(a,"namespace")?a.namespace.split("."):[];if(L=ne=P=w=w||_,!(w.nodeType===3||w.nodeType===8)&&!Sc.test(le+h.event.triggered)&&(le.indexOf(".")>-1&&(Re=le.split("."),le=Re.shift(),Re.sort()),$=le.indexOf(":")<0&&"on"+le,a=a[h.expando]?a:new h.Event(le,typeof a=="object"&&a),a.isTrigger=k?2:3,a.namespace=Re.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+Re.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=w),d=d==null?[a]:h.makeArray(d,[a]),Z=h.event.special[le]||{},!(!k&&Z.trigger&&Z.trigger.apply(w,d)===!1))){if(!k&&!Z.noBubble&&!u(w)){for(U=Z.delegateType||le,Sc.test(U+le)||(L=L.parentNode);L;L=L.parentNode)X.push(L),P=L;P===(w.ownerDocument||_)&&X.push(P.defaultView||P.parentWindow||e)}for(D=0;(L=X[D++])&&!a.isPropagationStopped();)ne=L,a.type=D>1?U:Z.bindType||le,G=(be.get(L,"events")||Object.create(null))[a.type]&&be.get(L,"handle"),G&&G.apply(L,d),G=$&&L[$],G&&G.apply&&lt(L)&&(a.result=G.apply(L,d),a.result===!1&&a.preventDefault());return a.type=le,!k&&!a.isDefaultPrevented()&&(!Z._default||Z._default.apply(X.pop(),d)===!1)&&lt(w)&&$&&S(w[le])&&!u(w)&&(P=w[$],P&&(w[$]=null),h.event.triggered=le,a.isPropagationStopped()&&ne.addEventListener(le,bc),w[le](),a.isPropagationStopped()&&ne.removeEventListener(le,bc),h.event.triggered=void 0,P&&(w[$]=P)),a.result}},simulate:function(a,d,w){var k=h.extend(new h.Event,w,{type:a,isSimulated:!0});h.event.trigger(k,null,d)}}),h.fn.extend({trigger:function(a,d){return this.each(function(){h.event.trigger(a,d,this)})},triggerHandler:function(a,d){var w=this[0];if(w)return h.event.trigger(a,d,w,!0)}});var dd=/\[\]$/,Cc=/\r?\n/g,pd=/^(?:submit|button|image|reset|file)$/i,_d=/^(?:input|select|textarea|keygen)/i;function Ys(a,d,w,k){var D;if(Array.isArray(d))h.each(d,function(L,P){w||dd.test(a)?k(a,P):Ys(a+"["+(typeof P=="object"&&P!=null?L:"")+"]",P,w,k)});else if(!w&&E(d)==="object")for(D in d)Ys(a+"["+D+"]",d[D],w,k);else k(a,d)}h.param=function(a,d){var w,k=[],D=function(L,P){var U=S(P)?P():P;k[k.length]=encodeURIComponent(L)+"="+encodeURIComponent(U??"")};if(a==null)return"";if(Array.isArray(a)||a.jquery&&!h.isPlainObject(a))h.each(a,function(){D(this.name,this.value)});else for(w in a)Ys(w,a[w],d,D);return k.join("&")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=h.prop(this,"elements");return a?h.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!h(this).is(":disabled")&&_d.test(this.nodeName)&&!pd.test(a)&&(this.checked||!kr.test(a))}).map(function(a,d){var w=h(this).val();return w==null?null:Array.isArray(w)?h.map(w,function(k){return{name:d.name,value:k.replace(Cc,`\r
`)}}):{name:d.name,value:w.replace(Cc,`\r
`)}}).get()}});var gd=/%20/g,md=/#.*$/,vd=/([?&])_=[^&]*/,yd=/^(.*?):[ \t]*([^\r\n]*)$/mg,Sd=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,bd=/^(?:GET|HEAD)$/,Cd=/^\/\//,Ec={},Js={},wc="*/".concat("*"),Xs=_.createElement("a");Xs.href=qi.href;function Tc(a){return function(d,w){typeof d!="string"&&(w=d,d="*");var k,D=0,L=d.toLowerCase().match(ae)||[];if(S(w))for(;k=L[D++];)k[0]==="+"?(k=k.slice(1)||"*",(a[k]=a[k]||[]).unshift(w)):(a[k]=a[k]||[]).push(w)}}function Ac(a,d,w,k){var D={},L=a===Js;function P(U){var $;return D[U]=!0,h.each(a[U]||[],function(G,Z){var ne=Z(d,w,k);if(typeof ne=="string"&&!L&&!D[ne])return d.dataTypes.unshift(ne),P(ne),!1;if(L)return!($=ne)}),$}return P(d.dataTypes[0])||!D["*"]&&P("*")}function Qs(a,d){var w,k,D=h.ajaxSettings.flatOptions||{};for(w in d)d[w]!==void 0&&((D[w]?a:k||(k={}))[w]=d[w]);return k&&h.extend(!0,a,k),a}function Ed(a,d,w){for(var k,D,L,P,U=a.contents,$=a.dataTypes;$[0]==="*";)$.shift(),k===void 0&&(k=a.mimeType||d.getResponseHeader("Content-Type"));if(k){for(D in U)if(U[D]&&U[D].test(k)){$.unshift(D);break}}if($[0]in w)L=$[0];else{for(D in w){if(!$[0]||a.converters[D+" "+$[0]]){L=D;break}P||(P=D)}L=L||P}if(L)return L!==$[0]&&$.unshift(L),w[L]}function wd(a,d,w,k){var D,L,P,U,$,G={},Z=a.dataTypes.slice();if(Z[1])for(P in a.converters)G[P.toLowerCase()]=a.converters[P];for(L=Z.shift();L;)if(a.responseFields[L]&&(w[a.responseFields[L]]=d),!$&&k&&a.dataFilter&&(d=a.dataFilter(d,a.dataType)),$=L,L=Z.shift(),L){if(L==="*")L=$;else if($!=="*"&&$!==L){if(P=G[$+" "+L]||G["* "+L],!P){for(D in G)if(U=D.split(" "),U[1]===L&&(P=G[$+" "+U[0]]||G["* "+U[0]],P)){P===!0?P=G[D]:G[D]!==!0&&(L=U[0],Z.unshift(U[1]));break}}if(P!==!0)if(P&&a.throws)d=P(d);else try{d=P(d)}catch(ne){return{state:"parsererror",error:P?ne:"No conversion from "+$+" to "+L}}}}return{state:"success",data:d}}h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qi.href,type:"GET",isLocal:Sd.test(qi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,d){return d?Qs(Qs(a,h.ajaxSettings),d):Qs(h.ajaxSettings,a)},ajaxPrefilter:Tc(Ec),ajaxTransport:Tc(Js),ajax:function(a,d){typeof a=="object"&&(d=a,a=void 0),d=d||{};var w,k,D,L,P,U,$,G,Z,ne,X=h.ajaxSetup({},d),le=X.context||X,Re=X.context&&(le.nodeType||le.jquery)?h(le):h.event,Ne=h.Deferred(),De=h.Callbacks("once memory"),et=X.statusCode||{},Ze={},Zt={},er="canceled",Be={readyState:0,getResponseHeader:function(He){var Ge;if($){if(!L)for(L={};Ge=yd.exec(D);)L[Ge[1].toLowerCase()+" "]=(L[Ge[1].toLowerCase()+" "]||[]).concat(Ge[2]);Ge=L[He.toLowerCase()+" "]}return Ge==null?null:Ge.join(", ")},getAllResponseHeaders:function(){return $?D:null},setRequestHeader:function(He,Ge){return $==null&&(He=Zt[He.toLowerCase()]=Zt[He.toLowerCase()]||He,Ze[He]=Ge),this},overrideMimeType:function(He){return $==null&&(X.mimeType=He),this},statusCode:function(He){var Ge;if(He)if($)Be.always(He[Be.status]);else for(Ge in He)et[Ge]=[et[Ge],He[Ge]];return this},abort:function(He){var Ge=He||er;return w&&w.abort(Ge),Kr(0,Ge),this}};if(Ne.promise(Be),X.url=((a||X.url||qi.href)+"").replace(Cd,qi.protocol+"//"),X.type=d.method||d.type||X.method||X.type,X.dataTypes=(X.dataType||"*").toLowerCase().match(ae)||[""],X.crossDomain==null){U=_.createElement("a");try{U.href=X.url,U.href=U.href,X.crossDomain=Xs.protocol+"//"+Xs.host!=U.protocol+"//"+U.host}catch{X.crossDomain=!0}}if(X.data&&X.processData&&typeof X.data!="string"&&(X.data=h.param(X.data,X.traditional)),Ac(Ec,X,d,Be),$)return Be;G=h.event&&X.global,G&&h.active++===0&&h.event.trigger("ajaxStart"),X.type=X.type.toUpperCase(),X.hasContent=!bd.test(X.type),k=X.url.replace(md,""),X.hasContent?X.data&&X.processData&&(X.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(X.data=X.data.replace(gd,"+")):(ne=X.url.slice(k.length),X.data&&(X.processData||typeof X.data=="string")&&(k+=(Gs.test(k)?"&":"?")+X.data,delete X.data),X.cache===!1&&(k=k.replace(vd,"$1"),ne=(Gs.test(k)?"&":"?")+"_="+yc.guid+++ne),X.url=k+ne),X.ifModified&&(h.lastModified[k]&&Be.setRequestHeader("If-Modified-Since",h.lastModified[k]),h.etag[k]&&Be.setRequestHeader("If-None-Match",h.etag[k])),(X.data&&X.hasContent&&X.contentType!==!1||d.contentType)&&Be.setRequestHeader("Content-Type",X.contentType),Be.setRequestHeader("Accept",X.dataTypes[0]&&X.accepts[X.dataTypes[0]]?X.accepts[X.dataTypes[0]]+(X.dataTypes[0]!=="*"?", "+wc+"; q=0.01":""):X.accepts["*"]);for(Z in X.headers)Be.setRequestHeader(Z,X.headers[Z]);if(X.beforeSend&&(X.beforeSend.call(le,Be,X)===!1||$))return Be.abort();if(er="abort",De.add(X.complete),Be.done(X.success),Be.fail(X.error),w=Ac(Js,X,d,Be),!w)Kr(-1,"No Transport");else{if(Be.readyState=1,G&&Re.trigger("ajaxSend",[Be,X]),$)return Be;X.async&&X.timeout>0&&(P=e.setTimeout(function(){Be.abort("timeout")},X.timeout));try{$=!1,w.send(Ze,Kr)}catch(He){if($)throw He;Kr(-1,He)}}function Kr(He,Ge,Gi,eo){var tr,Yi,rr,xr,Dr,It=Ge;$||($=!0,P&&e.clearTimeout(P),w=void 0,D=eo||"",Be.readyState=He>0?4:0,tr=He>=200&&He<300||He===304,Gi&&(xr=Ed(X,Be,Gi)),!tr&&h.inArray("script",X.dataTypes)>-1&&h.inArray("json",X.dataTypes)<0&&(X.converters["text script"]=function(){}),xr=wd(X,xr,Be,tr),tr?(X.ifModified&&(Dr=Be.getResponseHeader("Last-Modified"),Dr&&(h.lastModified[k]=Dr),Dr=Be.getResponseHeader("etag"),Dr&&(h.etag[k]=Dr)),He===204||X.type==="HEAD"?It="nocontent":He===304?It="notmodified":(It=xr.state,Yi=xr.data,rr=xr.error,tr=!rr)):(rr=It,(He||!It)&&(It="error",He<0&&(He=0))),Be.status=He,Be.statusText=(Ge||It)+"",tr?Ne.resolveWith(le,[Yi,It,Be]):Ne.rejectWith(le,[Be,It,rr]),Be.statusCode(et),et=void 0,G&&Re.trigger(tr?"ajaxSuccess":"ajaxError",[Be,X,tr?Yi:rr]),De.fireWith(le,[Be,It]),G&&(Re.trigger("ajaxComplete",[Be,X]),--h.active||h.event.trigger("ajaxStop")))}return Be},getJSON:function(a,d,w){return h.get(a,d,w,"json")},getScript:function(a,d){return h.get(a,void 0,d,"script")}}),h.each(["get","post"],function(a,d){h[d]=function(w,k,D,L){return S(k)&&(L=L||D,D=k,k=void 0),h.ajax(h.extend({url:w,type:d,dataType:L,data:k,success:D},h.isPlainObject(w)&&w))}}),h.ajaxPrefilter(function(a){var d;for(d in a.headers)d.toLowerCase()==="content-type"&&(a.contentType=a.headers[d]||"")}),h._evalUrl=function(a,d,w){return h.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(k){h.globalEval(k,d,w)}})},h.fn.extend({wrapAll:function(a){var d;return this[0]&&(S(a)&&(a=a.call(this[0])),d=h(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var w=this;w.firstElementChild;)w=w.firstElementChild;return w}).append(this)),this},wrapInner:function(a){return S(a)?this.each(function(d){h(this).wrapInner(a.call(this,d))}):this.each(function(){var d=h(this),w=d.contents();w.length?w.wrapAll(a):d.append(a)})},wrap:function(a){var d=S(a);return this.each(function(w){h(this).wrapAll(d?a.call(this,w):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){h(this).replaceWith(this.childNodes)}),this}}),h.expr.pseudos.hidden=function(a){return!h.expr.pseudos.visible(a)},h.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},h.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Td={0:200,1223:204},Ki=h.ajaxSettings.xhr();b.cors=!!Ki&&"withCredentials"in Ki,b.ajax=Ki=!!Ki,h.ajaxTransport(function(a){var d,w;if(b.cors||Ki&&!a.crossDomain)return{send:function(k,D){var L,P=a.xhr();if(P.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(L in a.xhrFields)P[L]=a.xhrFields[L];a.mimeType&&P.overrideMimeType&&P.overrideMimeType(a.mimeType),!a.crossDomain&&!k["X-Requested-With"]&&(k["X-Requested-With"]="XMLHttpRequest");for(L in k)P.setRequestHeader(L,k[L]);d=function(U){return function(){d&&(d=w=P.onload=P.onerror=P.onabort=P.ontimeout=P.onreadystatechange=null,U==="abort"?P.abort():U==="error"?typeof P.status!="number"?D(0,"error"):D(P.status,P.statusText):D(Td[P.status]||P.status,P.statusText,(P.responseType||"text")!=="text"||typeof P.responseText!="string"?{binary:P.response}:{text:P.responseText},P.getAllResponseHeaders()))}},P.onload=d(),w=P.onerror=P.ontimeout=d("error"),P.onabort!==void 0?P.onabort=w:P.onreadystatechange=function(){P.readyState===4&&e.setTimeout(function(){d&&w()})},d=d("abort");try{P.send(a.hasContent&&a.data||null)}catch(U){if(d)throw U}},abort:function(){d&&d()}}}),h.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return h.globalEval(a),a}}}),h.ajaxPrefilter("script",function(a){a.cache===void 0&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),h.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var d,w;return{send:function(k,D){d=h("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",w=function(L){d.remove(),w=null,L&&D(L.type==="error"?404:200,L.type)}),_.head.appendChild(d[0])},abort:function(){w&&w()}}}});var kc=[],Zs=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=kc.pop()||h.expando+"_"+yc.guid++;return this[a]=!0,a}}),h.ajaxPrefilter("json jsonp",function(a,d,w){var k,D,L,P=a.jsonp!==!1&&(Zs.test(a.url)?"url":typeof a.data=="string"&&(a.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Zs.test(a.data)&&"data");if(P||a.dataTypes[0]==="jsonp")return k=a.jsonpCallback=S(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,P?a[P]=a[P].replace(Zs,"$1"+k):a.jsonp!==!1&&(a.url+=(Gs.test(a.url)?"&":"?")+a.jsonp+"="+k),a.converters["script json"]=function(){return L||h.error(k+" was not called"),L[0]},a.dataTypes[0]="json",D=e[k],e[k]=function(){L=arguments},w.always(function(){D===void 0?h(e).removeProp(k):e[k]=D,a[k]&&(a.jsonpCallback=d.jsonpCallback,kc.push(k)),L&&S(D)&&D(L[0]),L=D=void 0}),"script"}),b.createHTMLDocument=function(){var a=_.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",a.childNodes.length===2}(),h.parseHTML=function(a,d,w){if(typeof a!="string")return[];typeof d=="boolean"&&(w=d,d=!1);var k,D,L;return d||(b.createHTMLDocument?(d=_.implementation.createHTMLDocument(""),k=d.createElement("base"),k.href=_.location.href,d.head.appendChild(k)):d=_),D=ge.exec(a),L=!w&&[],D?[d.createElement(D[1])]:(D=Rn([a],d,L),L&&L.length&&h(L).remove(),h.merge([],D.childNodes))},h.fn.load=function(a,d,w){var k,D,L,P=this,U=a.indexOf(" ");return U>-1&&(k=Vr(a.slice(U)),a=a.slice(0,U)),S(d)?(w=d,d=void 0):d&&typeof d=="object"&&(D="POST"),P.length>0&&h.ajax({url:a,type:D||"GET",dataType:"html",data:d}).done(function($){L=arguments,P.html(k?h("<div>").append(h.parseHTML($)).find(k):$)}).always(w&&function($,G){P.each(function(){w.apply(this,L||[$.responseText,G,$])})}),this},h.expr.pseudos.animated=function(a){return h.grep(h.timers,function(d){return a===d.elem}).length},h.offset={setOffset:function(a,d,w){var k,D,L,P,U,$,G,Z=h.css(a,"position"),ne=h(a),X={};Z==="static"&&(a.style.position="relative"),U=ne.offset(),L=h.css(a,"top"),$=h.css(a,"left"),G=(Z==="absolute"||Z==="fixed")&&(L+$).indexOf("auto")>-1,G?(k=ne.position(),P=k.top,D=k.left):(P=parseFloat(L)||0,D=parseFloat($)||0),S(d)&&(d=d.call(a,w,h.extend({},U))),d.top!=null&&(X.top=d.top-U.top+P),d.left!=null&&(X.left=d.left-U.left+D),"using"in d?d.using.call(a,X):ne.css(X)}},h.fn.extend({offset:function(a){if(arguments.length)return a===void 0?this:this.each(function(D){h.offset.setOffset(this,a,D)});var d,w,k=this[0];if(k)return k.getClientRects().length?(d=k.getBoundingClientRect(),w=k.ownerDocument.defaultView,{top:d.top+w.pageYOffset,left:d.left+w.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,d,w,k=this[0],D={top:0,left:0};if(h.css(k,"position")==="fixed")d=k.getBoundingClientRect();else{for(d=this.offset(),w=k.ownerDocument,a=k.offsetParent||w.documentElement;a&&(a===w.body||a===w.documentElement)&&h.css(a,"position")==="static";)a=a.parentNode;a&&a!==k&&a.nodeType===1&&(D=h(a).offset(),D.top+=h.css(a,"borderTopWidth",!0),D.left+=h.css(a,"borderLeftWidth",!0))}return{top:d.top-D.top-h.css(k,"marginTop",!0),left:d.left-D.left-h.css(k,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&h.css(a,"position")==="static";)a=a.offsetParent;return a||Wt})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var w=d==="pageYOffset";h.fn[a]=function(k){return mt(this,function(D,L,P){var U;if(u(D)?U=D:D.nodeType===9&&(U=D.defaultView),P===void 0)return U?U[d]:D[L];U?U.scrollTo(w?U.pageXOffset:P,w?P:U.pageYOffset):D[L]=P},a,k,arguments.length)}}),h.each(["top","left"],function(a,d){h.cssHooks[d]=hi(b.pixelPosition,function(w,k){if(k)return k=st(w,d),_e.test(k)?h(w).position()[d]+"px":k})}),h.each({Height:"height",Width:"width"},function(a,d){h.each({padding:"inner"+a,content:d,"":"outer"+a},function(w,k){h.fn[k]=function(D,L){var P=arguments.length&&(w||typeof D!="boolean"),U=w||(D===!0||L===!0?"margin":"border");return mt(this,function($,G,Z){var ne;return u($)?k.indexOf("outer")===0?$["inner"+a]:$.document.documentElement["client"+a]:$.nodeType===9?(ne=$.documentElement,Math.max($.body["scroll"+a],ne["scroll"+a],$.body["offset"+a],ne["offset"+a],ne["client"+a])):Z===void 0?h.css($,G,U):h.style($,G,Z,U)},d,P?D:void 0,P)}})}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,d){h.fn[d]=function(w){return this.on(d,w)}}),h.fn.extend({bind:function(a,d,w){return this.on(a,null,d,w)},unbind:function(a,d){return this.off(a,null,d)},delegate:function(a,d,w,k){return this.on(d,a,w,k)},undelegate:function(a,d,w){return arguments.length===1?this.off(a,"**"):this.off(d,a||"**",w)},hover:function(a,d){return this.mouseenter(a).mouseleave(d||a)}}),h.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,d){h.fn[d]=function(w,k){return arguments.length>0?this.on(d,null,w,k):this.trigger(d)}});var Ad=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;h.proxy=function(a,d){var w,k,D;if(typeof d=="string"&&(w=a[d],d=a,a=w),!!S(a))return k=l.call(arguments,2),D=function(){return a.apply(d||this,k.concat(l.call(arguments)))},D.guid=a.guid=a.guid||h.guid++,D},h.holdReady=function(a){a?h.readyWait++:h.ready(!0)},h.isArray=Array.isArray,h.parseJSON=JSON.parse,h.nodeName=x,h.isFunction=S,h.isWindow=u,h.camelCase=Xe,h.type=E,h.now=Date.now,h.isNumeric=function(a){var d=h.type(a);return(d==="number"||d==="string")&&!isNaN(a-parseFloat(a))},h.trim=function(a){return a==null?"":(a+"").replace(Ad,"$1")};var kd=e.jQuery,Rd=e.$;return h.noConflict=function(a){return e.$===h&&(e.$=Rd),a&&e.jQuery===h&&(e.jQuery=kd),h},typeof r>"u"&&(e.jQuery=e.$=h),h})})(Df);var $y=Df.exports;const tn=Ts($y);function Fy(t,e){let r=document.querySelector(t);var i;tn(`${e}`).on("click",function(){navigator.clipboard.writeText(r.value).then(()=>{lr.getInstance(e).setContent({".tooltip-inner":"Copied!"}),tn(`${e}.btn-primary`).hide(),tn(`${e}.btn-success`).show(),i&&clearTimeout(i),i=setTimeout(()=>{tn(`${e}.btn-primary`).show(),tn(`${e}.btn-success`).hide(),lr.getInstance(e).setContent({".tooltip-inner":"Copy to clipboard"})},2e3)},function(o){console.error("Async: Could not copy text: ",o)})})}var Lf={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(self,function(){return(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{constructor(){}activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const l=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(l._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,l=o._renderService.dimensions;if(l.css.cell.width===0||l.css.cell.height===0)return;const p=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(n.getPropertyValue("height")),c=Math.max(0,parseInt(n.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),m=s-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),y=c-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-p;return{cols:Math.max(2,Math.floor(y/l.css.cell.width)),rows:Math.max(1,Math.floor(m/l.css.cell.height))}}}})(),r})()})})(Lf);var jy=Lf.exports,Pf={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(self,()=>(()=>{var r={345:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=s=>(this._listeners.push(s),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===s)return void this._listeners.splice(c,1)}}})),this._event}fire(s,c){const f=[];for(let m=0;m<this._listeners.length;m++)f.push(this._listeners[m]);for(let m=0;m<f.length;m++)f[m].call(void 0,s,c)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},n.forwardEvent=function(s,c){return s(f=>c.fire(f))}},859:(p,n)=>{function s(c){for(const f of c)f.dispose();c.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},n.toDisposable=function(c){return{dispose:c}},n.disposeArray=s,n.getDisposeArrayDisposable=function(c){return{dispose:()=>s(c)}}}},i={};function o(p){var n=i[p];if(n!==void 0)return n.exports;var s=i[p]={exports:{}};return r[p](s,s.exports,o),s.exports}var l={};return(()=>{var p=l;Object.defineProperty(p,"__esModule",{value:!0}),p.SearchAddon=void 0;const n=o(345),s=o(859),c=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class f extends s.Disposable{constructor(y){var C;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new n.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(C=y==null?void 0:y.highlightLimit)!==null&&C!==void 0?C:1e3}activate(y){this._terminal=y,this._onDataDisposable=this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this._onResizeDisposable=this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,s.toDisposable)(()=>{var C,b;this.clearDecorations(),(C=this._onDataDisposable)===null||C===void 0||C.dispose(),(b=this._onResizeDisposable)===null||b===void 0||b.dispose()}))}_updateMatches(){var y;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((y=this._lastSearchOptions)===null||y===void 0)&&y.decorations)&&(this._highlightTimeout=setTimeout(()=>{const C=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(C,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(y){this.clearActiveDecoration(),(0,s.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),y||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){var y;(y=this._selectedDecoration)===null||y===void 0||y.dispose(),this._selectedDecoration=void 0}findNext(y,C){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=C,C!=null&&C.decorations&&(this._cachedSearchTerm!==void 0&&y===this._cachedSearchTerm||this._highlightAllMatches(y,C));const b=this._findNextAndSelect(y,C);return this._fireResults(C),this._cachedSearchTerm=y,b}_highlightAllMatches(y,C){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!y||y.length===0)return void this.clearDecorations();C=C||{},this.clearDecorations(!0);const b=[];let S,u=this._find(y,0,0,C);for(;u&&((S==null?void 0:S.row)!==u.row||(S==null?void 0:S.col)!==u.col)&&!(b.length>=this._highlightLimit);)S=u,b.push(S),u=this._find(y,S.col+S.term.length>=this._terminal.cols?S.row+1:S.row,S.col+S.term.length>=this._terminal.cols?0:S.col+1,C);for(const _ of b){const v=this._createResultDecoration(_,C.decorations);v&&(this._highlightedLines.add(v.marker.line),this._highlightDecorations.push({decoration:v,match:_,dispose(){v.dispose()}}))}}_find(y,C,b,S){var u;if(!this._terminal||!y||y.length===0)return(u=this._terminal)===null||u===void 0||u.clearSelection(),void this.clearDecorations();if(b>this._terminal.cols)throw new Error(`Invalid col: ${b} to search in terminal of ${this._terminal.cols} cols`);let _;this._initLinesCache();const v={startRow:C,startCol:b};if(_=this._findInLine(y,v,S),!_)for(let g=C+1;g<this._terminal.buffer.active.baseY+this._terminal.rows&&(v.startRow=g,v.startCol=0,_=this._findInLine(y,v,S),!_);g++);return _}_findNextAndSelect(y,C){var b;if(!this._terminal||!y||y.length===0)return(b=this._terminal)===null||b===void 0||b.clearSelection(),this.clearDecorations(),!1;const S=this._terminal.getSelectionPosition();this._terminal.clearSelection();let u=0,_=0;S&&(this._cachedSearchTerm===y?(u=S.end.x,_=S.end.y):(u=S.start.x,_=S.start.y)),this._initLinesCache();const v={startRow:_,startCol:u};let g=this._findInLine(y,v,C);if(!g)for(let E=_+1;E<this._terminal.buffer.active.baseY+this._terminal.rows&&(v.startRow=E,v.startCol=0,g=this._findInLine(y,v,C),!g);E++);if(!g&&_!==0)for(let E=0;E<_&&(v.startRow=E,v.startCol=0,g=this._findInLine(y,v,C),!g);E++);return!g&&S&&(v.startRow=S.start.y,v.startCol=0,g=this._findInLine(y,v,C)),this._selectResult(g,C==null?void 0:C.decorations,C==null?void 0:C.noScroll)}findPrevious(y,C){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=C,C!=null&&C.decorations&&(this._cachedSearchTerm!==void 0&&y===this._cachedSearchTerm||this._highlightAllMatches(y,C));const b=this._findPreviousAndSelect(y,C);return this._fireResults(C),this._cachedSearchTerm=y,b}_fireResults(y){if(y!=null&&y.decorations){let C=-1;if(this._selectedDecoration){const b=this._selectedDecoration.match;for(let S=0;S<this._highlightDecorations.length;S++){const u=this._highlightDecorations[S].match;if(u.row===b.row&&u.col===b.col&&u.size===b.size){C=S;break}}}this._onDidChangeResults.fire({resultIndex:C,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(y,C){var b;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!y||y.length===0)return(b=this._terminal)===null||b===void 0||b.clearSelection(),this.clearDecorations(),!1;const S=this._terminal.getSelectionPosition();this._terminal.clearSelection();let u=this._terminal.buffer.active.baseY+this._terminal.rows-1,_=this._terminal.cols;const v=!0;this._initLinesCache();const g={startRow:u,startCol:_};let E;if(S&&(g.startRow=u=S.start.y,g.startCol=_=S.start.x,this._cachedSearchTerm!==y&&(E=this._findInLine(y,g,C,!1),E||(g.startRow=u=S.end.y,g.startCol=_=S.end.x))),E||(E=this._findInLine(y,g,C,v)),!E){g.startCol=Math.max(g.startCol,this._terminal.cols);for(let T=u-1;T>=0&&(g.startRow=T,E=this._findInLine(y,g,C,v),!E);T--);}if(!E&&u!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let T=this._terminal.buffer.active.baseY+this._terminal.rows-1;T>=u&&(g.startRow=T,E=this._findInLine(y,g,C,v),!E);T--);return this._selectResult(E,C==null?void 0:C.decorations,C==null?void 0:C.noScroll)}_initLinesCache(){const y=this._terminal;this._linesCache||(this._linesCache=new Array(y.buffer.active.length),this._cursorMoveListener=y.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=y.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(y,C,b){return(y===0||c.includes(C[y-1]))&&(y+b.length===C.length||c.includes(C[y+b.length]))}_findInLine(y,C,b={},S=!1){var u;const _=this._terminal,v=C.startRow,g=C.startCol,E=_.buffer.active.getLine(v);if(E!=null&&E.isWrapped)return S?void(C.startCol+=_.cols):(C.startRow--,C.startCol+=_.cols,this._findInLine(y,C,b));let T=(u=this._linesCache)===null||u===void 0?void 0:u[v];T||(T=this._translateBufferLineToStringWithWrap(v,!0),this._linesCache&&(this._linesCache[v]=T));const[R,h]=T,A=this._bufferColsToStringOffset(v,g),x=b.caseSensitive?y:y.toLowerCase(),O=b.caseSensitive?R:R.toLowerCase();let H=-1;if(b.regex){const N=RegExp(x,"g");let B;if(S)for(;B=N.exec(O.slice(0,A));)H=N.lastIndex-B[0].length,y=B[0],N.lastIndex-=y.length-1;else B=N.exec(O.slice(A)),B&&B[0].length>0&&(H=A+(N.lastIndex-B[0].length),y=B[0])}else S?A-x.length>=0&&(H=O.lastIndexOf(x,A-x.length)):H=O.indexOf(x,A);if(H>=0){if(b.wholeWord&&!this._isWholeWord(H,O,y))return;let N=0;for(;N<h.length-1&&H>=h[N+1];)N++;let B=N;for(;B<h.length-1&&H+y.length>=h[B+1];)B++;const ee=H-h[N],ue=H+y.length-h[B],se=this._stringLengthToBufferSize(v+N,ee);return{term:y,col:se,row:v+N,size:this._stringLengthToBufferSize(v+B,ue)-se+_.cols*(B-N)}}}_stringLengthToBufferSize(y,C){const b=this._terminal.buffer.active.getLine(y);if(!b)return 0;for(let S=0;S<C;S++){const u=b.getCell(S);if(!u)break;const _=u.getChars();_.length>1&&(C-=_.length-1);const v=b.getCell(S+1);v&&v.getWidth()===0&&C++}return C}_bufferColsToStringOffset(y,C){const b=this._terminal;let S=y,u=0,_=b.buffer.active.getLine(S);for(;C>0&&_;){for(let v=0;v<C&&v<b.cols;v++){const g=_.getCell(v);if(!g)break;g.getWidth()&&(u+=g.getCode()===0?1:g.getChars().length)}if(S++,_=b.buffer.active.getLine(S),_&&!_.isWrapped)break;C-=b.cols}return u}_translateBufferLineToStringWithWrap(y,C){var b;const S=this._terminal,u=[],_=[0];let v=S.buffer.active.getLine(y);for(;v;){const g=S.buffer.active.getLine(y+1),E=!!g&&g.isWrapped;let T=v.translateToString(!E&&C);if(E&&g){const R=v.getCell(v.length-1);R&&R.getCode()===0&&R.getWidth()===1&&((b=g.getCell(0))===null||b===void 0?void 0:b.getWidth())===2&&(T=T.slice(0,-1))}if(u.push(T),!E)break;_.push(_[_.length-1]+T.length),y++,v=g}return[u.join(""),_]}_selectResult(y,C,b){const S=this._terminal;if(this.clearActiveDecoration(),!y)return S.clearSelection(),!1;if(S.select(y.col,y.row,y.size),C){const u=S.registerMarker(-S.buffer.active.baseY-S.buffer.active.cursorY+y.row);if(u){const _=S.registerDecoration({marker:u,x:y.col,width:y.size,backgroundColor:C.activeMatchBackground,layer:"top",overviewRulerOptions:{color:C.activeMatchColorOverviewRuler}});if(_){const v=[];v.push(u),v.push(_.onRender(g=>this._applyStyles(g,C.activeMatchBorder,!0))),v.push(_.onDispose(()=>(0,s.disposeArray)(v))),this._selectedDecoration={decoration:_,match:y,dispose(){_.dispose()}}}}}if(!b&&(y.row>=S.buffer.active.viewportY+S.rows||y.row<S.buffer.active.viewportY)){let u=y.row-S.buffer.active.viewportY;u-=Math.floor(S.rows/2),S.scrollLines(u)}return!0}_applyStyles(y,C,b){y.classList.contains("xterm-find-result-decoration")||(y.classList.add("xterm-find-result-decoration"),C&&(y.style.outline=`1px solid ${C}`)),b&&y.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(y,C){const b=this._terminal,S=b.registerMarker(-b.buffer.active.baseY-b.buffer.active.cursorY+y.row);if(!S)return;const u=b.registerDecoration({marker:S,x:y.col,width:y.size,backgroundColor:C.matchBackground,overviewRulerOptions:this._highlightedLines.has(S.line)?void 0:{color:C.matchOverviewRuler,position:"center"}});if(u){const _=[];_.push(S),_.push(u.onRender(v=>this._applyStyles(v,C.matchBorder,!1))),_.push(u.onDispose(()=>(0,s.disposeArray)(_)))}return u}}p.SearchAddon=f})(),l})())})(Pf);var Uy=Pf.exports,Of={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(self,()=>(()=>{var r={4567:function(p,n,s){var c=this&&this.__decorate||function(g,E,T,R){var h,A=arguments.length,x=A<3?E:R===null?R=Object.getOwnPropertyDescriptor(E,T):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,E,T,R);else for(var O=g.length-1;O>=0;O--)(h=g[O])&&(x=(A<3?h(x):A>3?h(E,T,x):h(E,T))||x);return A>3&&x&&Object.defineProperty(E,T,x),x},f=this&&this.__param||function(g,E){return function(T,R){E(T,R,g)}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccessibilityManager=void 0;const m=s(9042),y=s(6114),C=s(9924),b=s(844),S=s(5596),u=s(4725),_=s(3656);let v=class extends b.Disposable{constructor(g,E){super(),this._terminal=g,this._renderService=E,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let T=0;T<this._terminal.rows;T++)this._rowElements[T]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[T]);if(this._topBoundaryFocusListener=T=>this._handleBoundaryFocus(T,0),this._bottomBoundaryFocusListener=T=>this._handleBoundaryFocus(T,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._announceCharacters.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._liveRegionDebouncer),this.register(this._terminal.onResize(T=>this._handleResize(T.rows))),this.register(this._terminal.onRender(T=>this._refreshRows(T.start,T.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(T=>this._handleChar(T))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(T=>this._handleTab(T))),this.register(this._terminal.onKey(T=>this._handleKey(T.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new S.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,b.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(g){for(let E=0;E<g;E++)this._handleChar(" ")}_handleChar(g){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==g&&(this._charsToAnnounce+=g):this._charsToAnnounce+=g,g===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=m.tooMuchOutput)),y.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,y.isMac&&this._liveRegion.remove()}_handleKey(g){this._clearLiveRegion(),/\p{Control}/u.test(g)||this._charsToConsume.push(g)}_refreshRows(g,E){this._liveRegionDebouncer.refresh(g,E,this._terminal.rows)}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(g,E){const T=g.target,R=this._rowElements[E===0?1:this._rowElements.length-2];if(T.getAttribute("aria-posinset")===(E===0?"1":`${this._terminal.buffer.lines.length}`)||g.relatedTarget!==R)return;let h,A;if(E===0?(h=T,A=this._rowElements.pop(),this._rowContainer.removeChild(A)):(h=this._rowElements.shift(),A=T,this._rowContainer.removeChild(h)),h.removeEventListener("focus",this._topBoundaryFocusListener),A.removeEventListener("focus",this._bottomBoundaryFocusListener),E===0){const x=this._createAccessibilityTreeNode();this._rowElements.unshift(x),this._rowContainer.insertAdjacentElement("afterbegin",x)}else{const x=this._createAccessibilityTreeNode();this._rowElements.push(x),this._rowContainer.appendChild(x)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(E===0?-1:1),this._rowElements[E===0?1:this._rowElements.length-2].focus(),g.preventDefault(),g.stopImmediatePropagation()}_handleResize(g){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let E=this._rowContainer.children.length;E<this._terminal.rows;E++)this._rowElements[E]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[E]);for(;this._rowElements.length>g;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const g=document.createElement("div");return g.setAttribute("role","listitem"),g.tabIndex=-1,this._refreshRowDimensions(g),g}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let g=0;g<this._terminal.rows;g++)this._refreshRowDimensions(this._rowElements[g])}}_refreshRowDimensions(g){g.style.height=`${this._renderService.dimensions.css.cell.height}px`}};v=c([f(1,u.IRenderService)],v),n.AccessibilityManager=v},3614:(p,n)=>{function s(y){return y.replace(/\r?\n/g,"\r")}function c(y,C){return C?"\x1B[200~"+y+"\x1B[201~":y}function f(y,C,b){y=c(y=s(y),b.decPrivateModes.bracketedPasteMode),b.triggerDataEvent(y,!0),C.value=""}function m(y,C,b){const S=b.getBoundingClientRect(),u=y.clientX-S.left-10,_=y.clientY-S.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${u}px`,C.style.top=`${_}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(n,"__esModule",{value:!0}),n.rightClickHandler=n.moveTextAreaUnderMouseCursor=n.paste=n.handlePasteEvent=n.copyHandler=n.bracketTextForPaste=n.prepareTextForTerminal=void 0,n.prepareTextForTerminal=s,n.bracketTextForPaste=c,n.copyHandler=function(y,C){y.clipboardData&&y.clipboardData.setData("text/plain",C.selectionText),y.preventDefault()},n.handlePasteEvent=function(y,C,b){y.stopPropagation(),y.clipboardData&&f(y.clipboardData.getData("text/plain"),C,b)},n.paste=f,n.moveTextAreaUnderMouseCursor=m,n.rightClickHandler=function(y,C,b,S,u){m(y,C,b),u&&S.rightClickSelect(y),C.value=S.selectionText,C.select()}},7239:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorContrastCache=void 0;const c=s(1505);n.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(f,m,y){this._css.set(f,m,y)}getCss(f,m){return this._css.get(f,m)}setColor(f,m,y){this._color.set(f,m,y)}getColor(f,m){return this._color.get(f,m)}clear(){this._color.clear(),this._css.clear()}}},3656:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(s,c,f,m){s.addEventListener(c,f,m);let y=!1;return{dispose:()=>{y||(y=!0,s.removeEventListener(c,f,m))}}}},6465:function(p,n,s){var c=this&&this.__decorate||function(u,_,v,g){var E,T=arguments.length,R=T<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,v):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,_,v,g);else for(var h=u.length-1;h>=0;h--)(E=u[h])&&(R=(T<3?E(R):T>3?E(_,v,R):E(_,v))||R);return T>3&&R&&Object.defineProperty(_,v,R),R},f=this&&this.__param||function(u,_){return function(v,g){_(v,g,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Linkifier2=void 0;const m=s(2585),y=s(8460),C=s(844),b=s(3656);let S=class extends C.Disposable{constructor(u){super(),this._bufferService=u,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new y.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new y.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}get currentLink(){return this._currentLink}registerLinkProvider(u){return this._linkProviders.push(u),{dispose:()=>{const _=this._linkProviders.indexOf(u);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(u,_,v){this._element=u,this._mouseService=_,this._renderService=v,this.register((0,b.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,b.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,b.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,b.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(u){if(this._lastMouseEvent=u,!this._element||!this._mouseService)return;const _=this._positionFromMouseEvent(u,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;const v=u.composedPath();for(let g=0;g<v.length;g++){const E=v[g];if(E.classList.contains("xterm"))break;if(E.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(u){if(this._activeLine!==u.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(u,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,u)||(this._clearCurrentLink(),this._askForLink(u,!0))}_askForLink(u,_){var v,g;this._activeProviderReplies&&_||((v=this._activeProviderReplies)===null||v===void 0||v.forEach(T=>{T==null||T.forEach(R=>{R.link.dispose&&R.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=u.y);let E=!1;for(const[T,R]of this._linkProviders.entries())_?!((g=this._activeProviderReplies)===null||g===void 0)&&g.get(T)&&(E=this._checkLinkProviderResult(T,u,E)):R.provideLinks(u.y,h=>{var A,x;if(this._isMouseOut)return;const O=h==null?void 0:h.map(H=>({link:H}));(A=this._activeProviderReplies)===null||A===void 0||A.set(T,O),E=this._checkLinkProviderResult(T,u,E),((x=this._activeProviderReplies)===null||x===void 0?void 0:x.size)===this._linkProviders.length&&this._removeIntersectingLinks(u.y,this._activeProviderReplies)})}_removeIntersectingLinks(u,_){const v=new Set;for(let g=0;g<_.size;g++){const E=_.get(g);if(E)for(let T=0;T<E.length;T++){const R=E[T],h=R.link.range.start.y<u?0:R.link.range.start.x,A=R.link.range.end.y>u?this._bufferService.cols:R.link.range.end.x;for(let x=h;x<=A;x++){if(v.has(x)){E.splice(T--,1);break}v.add(x)}}}}_checkLinkProviderResult(u,_,v){var g;if(!this._activeProviderReplies)return v;const E=this._activeProviderReplies.get(u);let T=!1;for(let R=0;R<u;R++)this._activeProviderReplies.has(R)&&!this._activeProviderReplies.get(R)||(T=!0);if(!T&&E){const R=E.find(h=>this._linkAtPosition(h.link,_));R&&(v=!0,this._handleNewLink(R))}if(this._activeProviderReplies.size===this._linkProviders.length&&!v)for(let R=0;R<this._activeProviderReplies.size;R++){const h=(g=this._activeProviderReplies.get(R))===null||g===void 0?void 0:g.find(A=>this._linkAtPosition(A.link,_));if(h){v=!0,this._handleNewLink(h);break}}return v}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(u){if(!this._element||!this._mouseService||!this._currentLink)return;const _=this._positionFromMouseEvent(u,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(u,this._currentLink.link.text)}_clearCurrentLink(u,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!u||!_||this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(u){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(u.link,_)&&(this._currentLink=u,this._currentLink.state={decorations:{underline:u.link.decorations===void 0||u.link.decorations.underline,pointerCursor:u.link.decorations===void 0||u.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,u.link,this._lastMouseEvent),u.link.decorations={},Object.defineProperties(u.link.decorations,{pointerCursor:{get:()=>{var v,g;return(g=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||g===void 0?void 0:g.decorations.pointerCursor},set:v=>{var g,E;!((g=this._currentLink)===null||g===void 0)&&g.state&&this._currentLink.state.decorations.pointerCursor!==v&&(this._currentLink.state.decorations.pointerCursor=v,this._currentLink.state.isHovered&&((E=this._element)===null||E===void 0||E.classList.toggle("xterm-cursor-pointer",v)))}},underline:{get:()=>{var v,g;return(g=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||g===void 0?void 0:g.decorations.underline},set:v=>{var g,E,T;!((g=this._currentLink)===null||g===void 0)&&g.state&&((T=(E=this._currentLink)===null||E===void 0?void 0:E.state)===null||T===void 0?void 0:T.decorations.underline)!==v&&(this._currentLink.state.decorations.underline=v,this._currentLink.state.isHovered&&this._fireUnderlineEvent(u.link,v))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(v=>{if(!this._currentLink)return;const g=v.start===0?0:v.start+1+this._bufferService.buffer.ydisp,E=this._bufferService.buffer.ydisp+1+v.end;if(this._currentLink.link.range.start.y>=g&&this._currentLink.link.range.end.y<=E&&(this._clearCurrentLink(g,E),this._lastMouseEvent&&this._element)){const T=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);T&&this._askForLink(T,!1)}})))}_linkHover(u,_,v){var g;!((g=this._currentLink)===null||g===void 0)&&g.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&u.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(v,_.text)}_fireUnderlineEvent(u,_){const v=u.range,g=this._bufferService.buffer.ydisp,E=this._createLinkUnderlineEvent(v.start.x-1,v.start.y-g-1,v.end.x,v.end.y-g-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(E)}_linkLeave(u,_,v){var g;!((g=this._currentLink)===null||g===void 0)&&g.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&u.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(v,_.text)}_linkAtPosition(u,_){const v=u.range.start.y*this._bufferService.cols+u.range.start.x,g=u.range.end.y*this._bufferService.cols+u.range.end.x,E=_.y*this._bufferService.cols+_.x;return v<=E&&E<=g}_positionFromMouseEvent(u,_,v){const g=v.getCoords(u,_,this._bufferService.cols,this._bufferService.rows);if(g)return{x:g[0],y:g[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(u,_,v,g,E){return{x1:u,y1:_,x2:v,y2:g,cols:this._bufferService.cols,fg:E}}};S=c([f(0,m.IBufferService)],S),n.Linkifier2=S},9042:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tooMuchOutput=n.promptLabel=void 0,n.promptLabel="Terminal input",n.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(p,n,s){var c=this&&this.__decorate||function(S,u,_,v){var g,E=arguments.length,T=E<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,u,_,v);else for(var R=S.length-1;R>=0;R--)(g=S[R])&&(T=(E<3?g(T):E>3?g(u,_,T):g(u,_))||T);return E>3&&T&&Object.defineProperty(u,_,T),T},f=this&&this.__param||function(S,u){return function(_,v){u(_,v,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkProvider=void 0;const m=s(511),y=s(2585);let C=class{constructor(S,u,_){this._bufferService=S,this._optionsService=u,this._oscLinkService=_}provideLinks(S,u){var _;const v=this._bufferService.buffer.lines.get(S-1);if(!v)return void u(void 0);const g=[],E=this._optionsService.rawOptions.linkHandler,T=new m.CellData,R=v.getTrimmedLength();let h=-1,A=-1,x=!1;for(let O=0;O<R;O++)if(A!==-1||v.hasContent(O)){if(v.loadCell(O,T),T.hasExtendedAttrs()&&T.extended.urlId){if(A===-1){A=O,h=T.extended.urlId;continue}x=T.extended.urlId!==h}else A!==-1&&(x=!0);if(x||A!==-1&&O===R-1){const H=(_=this._oscLinkService.getLinkData(h))===null||_===void 0?void 0:_.uri;if(H){const N={start:{x:A+1,y:S},end:{x:O+(x||O!==R-1?0:1),y:S}};let B=!1;if(!(E!=null&&E.allowNonHttpProtocols))try{const ee=new URL(H);["http:","https:"].includes(ee.protocol)||(B=!0)}catch{B=!0}B||g.push({text:H,range:N,activate:(ee,ue)=>E?E.activate(ee,ue,N):b(0,ue),hover:(ee,ue)=>{var se;return(se=E==null?void 0:E.hover)===null||se===void 0?void 0:se.call(E,ee,ue,N)},leave:(ee,ue)=>{var se;return(se=E==null?void 0:E.leave)===null||se===void 0?void 0:se.call(E,ee,ue,N)}})}x=!1,T.hasExtendedAttrs()&&T.extended.urlId?(A=O,h=T.extended.urlId):(A=-1,h=-1)}}u(g)}};function b(S,u){if(confirm(`Do you want to navigate to ${u}?

WARNING: This link could potentially be dangerous`)){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}}C=c([f(0,y.IBufferService),f(1,y.IOptionsService),f(2,y.IOscLinkService)],C),n.OscLinkProvider=C},6193:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderDebouncer=void 0,n.RenderDebouncer=class{constructor(s,c){this._parentWindow=s,this._renderCallback=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(s){return this._refreshCallbacks.push(s),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(s,c,f){this._rowCount=f,s=s!==void 0?s:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,s):s,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const s=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(s,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const s of this._refreshCallbacks)s(0);this._refreshCallbacks=[]}}},5596:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenDprMonitor=void 0;const c=s(844);class f extends c.Disposable{constructor(y){super(),this._parentWindow=y,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,c.toDisposable)(()=>{this.clearListener()}))}setListener(y){this._listener&&this.clearListener(),this._listener=y,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)===null||y===void 0||y.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}n.ScreenDprMonitor=f},3236:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;const c=s(2950),f=s(1680),m=s(3614),y=s(2584),C=s(5435),b=s(9312),S=s(6114),u=s(3656),_=s(9042),v=s(4567),g=s(1296),E=s(7399),T=s(8460),R=s(8437),h=s(3230),A=s(4725),x=s(428),O=s(8934),H=s(6465),N=s(5114),B=s(8969),ee=s(8055),ue=s(4269),se=s(5941),M=s(3107),F=s(5744),j=s(9074),q=s(2585),te=s(3730),ge=s(844),me=s(6731),oe=typeof window<"u"?window.document:null;class pe extends B.CoreTerminal{constructor(W={}){super(W),this.browser=S,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(H.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(te.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(j.DecorationService),this._instantiationService.setService(q.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((Y,re)=>this.refresh(Y,re))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(Y=>this._reportWindowsOptions(Y))),this.register(this._inputHandler.onColor(Y=>this._handleColorEvent(Y))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(Y=>this._afterResize(Y.cols,Y.rows))),this.register((0,ge.toDisposable)(()=>{var Y,re;this._customKeyEventHandler=void 0,(re=(Y=this.element)===null||Y===void 0?void 0:Y.parentNode)===null||re===void 0||re.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(W){if(this._themeService)for(const Y of W){let re,ae="";switch(Y.index){case 256:re="foreground",ae="10";break;case 257:re="background",ae="11";break;case 258:re="cursor",ae="12";break;default:re="ansi",ae="4;"+Y.index}switch(Y.type){case 0:const Pe=ee.color.toColorRGB(re==="ansi"?this._themeService.colors.ansi[Y.index]:this._themeService.colors[re]);this.coreService.triggerDataEvent(`${y.C0.ESC}]${ae};${(0,se.toRgbString)(Pe)}${y.C1_ESCAPED.ST}`);break;case 1:if(re==="ansi")this._themeService.modifyColors(de=>de.ansi[Y.index]=ee.rgba.toColor(...Y.color));else{const de=re;this._themeService.modifyColors(Fe=>Fe[de]=ee.rgba.toColor(...Y.color))}break;case 2:this._themeService.restoreColor(Y.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(W){var Y;W?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=this._instantiationService.createInstance(v.AccessibilityManager,this)):((Y=this._accessibilityManager)===null||Y===void 0||Y.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(W){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(y.C0.ESC+"[I"),this.updateCursorStyle(W),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var W;return(W=this.textarea)===null||W===void 0?void 0:W.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const W=this.buffer.ybase+this.buffer.y,Y=this.buffer.lines.get(W);if(!Y)return;const re=Math.min(this.buffer.x,this.cols-1),ae=this._renderService.dimensions.css.cell.height,Pe=Y.getWidth(re),de=this._renderService.dimensions.css.cell.width*Pe,Fe=this.buffer.y*this._renderService.dimensions.css.cell.height,Ue=re*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ue+"px",this.textarea.style.top=Fe+"px",this.textarea.style.width=de+"px",this.textarea.style.height=ae+"px",this.textarea.style.lineHeight=ae+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",Y=>{this.hasSelection()&&(0,m.copyHandler)(Y,this._selectionService)}));const W=Y=>(0,m.handlePasteEvent)(Y,this.textarea,this.coreService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",W)),this.register((0,u.addDisposableDomListener)(this.element,"paste",W)),S.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",Y=>{Y.button===2&&(0,m.rightClickHandler)(Y,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",Y=>{(0,m.rightClickHandler)(Y,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),S.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",Y=>{Y.button===1&&(0,m.moveTextAreaUnderMouseCursor)(Y,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",W=>this._keyUp(W),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",W=>this._keyDown(W),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",W=>this._keyPress(W),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",W=>this._compositionHelper.compositionupdate(W))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",W=>this._inputEvent(W),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(W){var Y;if(!W)throw new Error("Terminal requires a parent element.");W.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=W.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),W.appendChild(this.element);const re=oe.createDocumentFragment();this._viewportElement=oe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),re.appendChild(this._viewportElement),this._viewportScrollArea=oe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=oe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=oe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),re.appendChild(this.screenElement),this.textarea=oe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),S.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(N.CoreBrowserService,this.textarea,(Y=this._document.defaultView)!==null&&Y!==void 0?Y:window),this._instantiationService.setService(A.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",ae=>this._handleTextAreaFocus(ae))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(A.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(me.ThemeService),this._instantiationService.setService(A.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(ue.CharacterJoinerService),this._instantiationService.setService(A.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(h.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(A.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ae=>this._onRender.fire(ae))),this.onResize(ae=>this._renderService.resize(ae.cols,ae.rows)),this._compositionView=oe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(re);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(O.MouseService),this._instantiationService.setService(A.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,ae=>this.scrollLines(ae,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(A.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ae=>this.scrollLines(ae.amount,ae.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ae=>this._renderService.handleSelectionChanged(ae.start,ae.end,ae.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ae=>{this.textarea.value=ae,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ae=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(M.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",ae=>this._selectionService.handleMouseDown(ae))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=this._instantiationService.createInstance(v.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ae=>this._handleScreenReaderModeOptionChange(ae))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(F.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ae=>{!this._overviewRulerRenderer&&ae&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(F.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(g.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const W=this,Y=this.element;function re(de){const Fe=W._mouseService.getMouseReportCoords(de,W.screenElement);if(!Fe)return!1;let Ue,ze;switch(de.overrideType||de.type){case"mousemove":ze=32,de.buttons===void 0?(Ue=3,de.button!==void 0&&(Ue=de.button<3?de.button:3)):Ue=1&de.buttons?0:4&de.buttons?1:2&de.buttons?2:3;break;case"mouseup":ze=0,Ue=de.button<3?de.button:3;break;case"mousedown":ze=1,Ue=de.button<3?de.button:3;break;case"wheel":if(W.viewport.getLinesScrolled(de)===0)return!1;ze=de.deltaY<0?0:1,Ue=4;break;default:return!1}return!(ze===void 0||Ue===void 0||Ue>4)&&W.coreMouseService.triggerMouseEvent({col:Fe.col,row:Fe.row,x:Fe.x,y:Fe.y,button:Ue,action:ze,ctrl:de.ctrlKey,alt:de.altKey,shift:de.shiftKey})}const ae={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Pe={mouseup:de=>(re(de),de.buttons||(this._document.removeEventListener("mouseup",ae.mouseup),ae.mousedrag&&this._document.removeEventListener("mousemove",ae.mousedrag)),this.cancel(de)),wheel:de=>(re(de),this.cancel(de,!0)),mousedrag:de=>{de.buttons&&re(de)},mousemove:de=>{de.buttons||re(de)}};this.register(this.coreMouseService.onProtocolChange(de=>{de?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(de)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&de?ae.mousemove||(Y.addEventListener("mousemove",Pe.mousemove),ae.mousemove=Pe.mousemove):(Y.removeEventListener("mousemove",ae.mousemove),ae.mousemove=null),16&de?ae.wheel||(Y.addEventListener("wheel",Pe.wheel,{passive:!1}),ae.wheel=Pe.wheel):(Y.removeEventListener("wheel",ae.wheel),ae.wheel=null),2&de?ae.mouseup||(ae.mouseup=Pe.mouseup):(this._document.removeEventListener("mouseup",ae.mouseup),ae.mouseup=null),4&de?ae.mousedrag||(ae.mousedrag=Pe.mousedrag):(this._document.removeEventListener("mousemove",ae.mousedrag),ae.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(Y,"mousedown",de=>{if(de.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(de))return re(de),ae.mouseup&&this._document.addEventListener("mouseup",ae.mouseup),ae.mousedrag&&this._document.addEventListener("mousemove",ae.mousedrag),this.cancel(de)})),this.register((0,u.addDisposableDomListener)(Y,"wheel",de=>{if(!ae.wheel){if(!this.buffer.hasScrollback){const Fe=this.viewport.getLinesScrolled(de);if(Fe===0)return;const Ue=y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(de.deltaY<0?"A":"B");let ze="";for(let Oe=0;Oe<Math.abs(Fe);Oe++)ze+=Ue;return this.coreService.triggerDataEvent(ze,!0),this.cancel(de,!0)}return this.viewport.handleWheel(de)?this.cancel(de):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(Y,"touchstart",de=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(de),this.cancel(de)},{passive:!0})),this.register((0,u.addDisposableDomListener)(Y,"touchmove",de=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(de)?void 0:this.cancel(de)},{passive:!1}))}refresh(W,Y){var re;(re=this._renderService)===null||re===void 0||re.refreshRows(W,Y)}updateCursorStyle(W){var Y;!((Y=this._selectionService)===null||Y===void 0)&&Y.shouldColumnSelect(W)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(W,Y,re=0){super.scrollLines(W,Y,re),this.refresh(0,this.rows-1)}paste(W){(0,m.paste)(W,this.textarea,this.coreService)}attachCustomKeyEventHandler(W){this._customKeyEventHandler=W}registerLinkProvider(W){return this.linkifier2.registerLinkProvider(W)}registerCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const Y=this._characterJoinerService.register(W);return this.refresh(0,this.rows-1),Y}deregisterCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(W)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(W){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+W)}registerDecoration(W){return this._decorationService.registerDecoration(W)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(W,Y,re){this._selectionService.setSelection(W,Y,re)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var W;(W=this._selectionService)===null||W===void 0||W.clearSelection()}selectAll(){var W;(W=this._selectionService)===null||W===void 0||W.selectAll()}selectLines(W,Y){var re;(re=this._selectionService)===null||re===void 0||re.selectLines(W,Y)}_keyDown(W){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;const Y=this.browser.isMac&&this.options.macOptionIsMeta&&W.altKey;if(!Y&&!this._compositionHelper.keydown(W))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;Y||W.key!=="Dead"&&W.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const re=(0,E.evaluateKeyboardEvent)(W,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(W),re.type===3||re.type===2){const ae=this.rows-1;return this.scrollLines(re.type===2?-ae:ae),this.cancel(W,!0)}return re.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,W)||(re.cancel&&this.cancel(W,!0),!re.key||!!(W.key&&!W.ctrlKey&&!W.altKey&&!W.metaKey&&W.key.length===1&&W.key.charCodeAt(0)>=65&&W.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(re.key!==y.C0.ETX&&re.key!==y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:re.key,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(re.key,!0),!this.optionsService.rawOptions.screenReaderMode||W.altKey||W.ctrlKey?this.cancel(W,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(W,Y){const re=W.isMac&&!this.options.macOptionIsMeta&&Y.altKey&&!Y.ctrlKey&&!Y.metaKey||W.isWindows&&Y.altKey&&Y.ctrlKey&&!Y.metaKey||W.isWindows&&Y.getModifierState("AltGraph");return Y.type==="keypress"?re:re&&(!Y.keyCode||Y.keyCode>47)}_keyUp(W){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1||(function(Y){return Y.keyCode===16||Y.keyCode===17||Y.keyCode===18}(W)||this.focus(),this.updateCursorStyle(W),this._keyPressHandled=!1)}_keyPress(W){let Y;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;if(this.cancel(W),W.charCode)Y=W.charCode;else if(W.which===null||W.which===void 0)Y=W.keyCode;else{if(W.which===0||W.charCode===0)return!1;Y=W.which}return!(!Y||(W.altKey||W.ctrlKey||W.metaKey)&&!this._isThirdLevelShift(this.browser,W)||(Y=String.fromCharCode(Y),this._onKey.fire({key:Y,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(Y,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(W){if(W.data&&W.inputType==="insertText"&&(!W.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const Y=W.data;return this.coreService.triggerDataEvent(Y,!0),this.cancel(W),!0}return!1}resize(W,Y){W!==this.cols||Y!==this.rows?super.resize(W,Y):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(W,Y){var re,ae;(re=this._charSizeService)===null||re===void 0||re.measure(),(ae=this.viewport)===null||ae===void 0||ae.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let W=1;W<this.rows;W++)this.buffer.lines.push(this.buffer.getBlankLine(R.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var W,Y;this.options.rows=this.rows,this.options.cols=this.cols;const re=this._customKeyEventHandler;this._setup(),super.reset(),(W=this._selectionService)===null||W===void 0||W.reset(),this._decorationService.reset(),this._customKeyEventHandler=re,this.refresh(0,this.rows-1),(Y=this.viewport)===null||Y===void 0||Y.syncScrollArea()}clearTextureAtlas(){var W;(W=this._renderService)===null||W===void 0||W.clearTextureAtlas()}_reportFocus(){var W;!((W=this.element)===null||W===void 0)&&W.classList.contains("focus")?this.coreService.triggerDataEvent(y.C0.ESC+"[I"):this.coreService.triggerDataEvent(y.C0.ESC+"[O")}_reportWindowsOptions(W){if(this._renderService)switch(W){case C.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const Y=this._renderService.dimensions.css.canvas.width.toFixed(0),re=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${y.C0.ESC}[4;${re};${Y}t`);break;case C.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ae=this._renderService.dimensions.css.cell.width.toFixed(0),Pe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${y.C0.ESC}[6;${Pe};${ae}t`)}}cancel(W,Y){if(this.options.cancelEvents||Y)return W.preventDefault(),W.stopPropagation(),!1}}n.Terminal=pe},9924:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TimeBasedDebouncer=void 0,n.TimeBasedDebouncer=class{constructor(s,c=1e3){this._renderCallback=s,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(s,c,f){this._rowCount=f,s=s!==void 0?s:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,s):s,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const m=Date.now();if(m-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=m,this._innerRefresh();else if(!this._additionalRefreshRequested){const y=m-this._lastRefreshMs,C=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const s=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(s,c)}}},1680:function(p,n,s){var c=this&&this.__decorate||function(u,_,v,g){var E,T=arguments.length,R=T<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,v):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,_,v,g);else for(var h=u.length-1;h>=0;h--)(E=u[h])&&(R=(T<3?E(R):T>3?E(_,v,R):E(_,v))||R);return T>3&&R&&Object.defineProperty(_,v,R),R},f=this&&this.__param||function(u,_){return function(v,g){_(v,g,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;const m=s(844),y=s(3656),C=s(4725),b=s(2585);let S=class extends m.Disposable{constructor(u,_,v,g,E,T,R,h,A){super(),this._scrollLines=u,this._viewportElement=_,this._scrollArea=v,this._bufferService=g,this._optionsService=E,this._charSizeService=T,this._renderService=R,this._coreBrowserService=h,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,y.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(x=>this._renderDimensions=x)),this._handleThemeChange(A.colors),this.register(A.onChangeColors(x=>this._handleThemeChange(x))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);const _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(_)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,_){const v=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&v<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const _=this._getPixelsScrolled(u);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(u,_))}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let _=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(u,_){var v;let g,E="";const T=[],R=_??this._bufferService.buffer.lines.length,h=this._bufferService.buffer.lines;for(let A=u;A<R;A++){const x=h.get(A);if(!x)continue;const O=(v=h.get(A+1))===null||v===void 0?void 0:v.isWrapped;if(E+=x.translateToString(!O),!O||A===h.length-1){const H=document.createElement("div");H.textContent=E,T.push(H),E.length>0&&(g=H),E=""}}return{bufferElements:T,cursorElement:g}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let _=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(u,_){const v=this._optionsService.rawOptions.fastScrollModifier;return v==="alt"&&_.altKey||v==="ctrl"&&_.ctrlKey||v==="shift"&&_.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const _=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(u,_))}};S=c([f(3,b.IBufferService),f(4,b.IOptionsService),f(5,C.ICharSizeService),f(6,C.IRenderService),f(7,C.ICoreBrowserService),f(8,C.IThemeService)],S),n.Viewport=S},3107:function(p,n,s){var c=this&&this.__decorate||function(u,_,v,g){var E,T=arguments.length,R=T<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,v):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,_,v,g);else for(var h=u.length-1;h>=0;h--)(E=u[h])&&(R=(T<3?E(R):T>3?E(_,v,R):E(_,v))||R);return T>3&&R&&Object.defineProperty(_,v,R),R},f=this&&this.__param||function(u,_){return function(v,g){_(v,g,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferDecorationRenderer=void 0;const m=s(3656),y=s(4725),C=s(844),b=s(2585);let S=class extends C.Disposable{constructor(u,_,v,g){super(),this._screenElement=u,this._bufferService=_,this._decorationService=v,this._renderService=g,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,m.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(E=>this._removeDecoration(E))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){var _,v;const g=document.createElement("div");g.classList.add("xterm-decoration"),g.classList.toggle("xterm-decoration-top-layer",((_=u==null?void 0:u.options)===null||_===void 0?void 0:_.layer)==="top"),g.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,g.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",g.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",g.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const E=(v=u.options.x)!==null&&v!==void 0?v:0;return E&&E>this._bufferService.cols&&(g.style.display="none"),this._refreshXPosition(u,g),g}_refreshStyle(u){const _=u.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let v=this._decorationElements.get(u);v||(v=this._createElement(u),u.element=v,this._decorationElements.set(u,v),this._container.appendChild(v)),v.style.top=_*this._renderService.dimensions.css.cell.height+"px",v.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(v)}}_refreshXPosition(u,_=u.element){var v;if(!_)return;const g=(v=u.options.x)!==null&&v!==void 0?v:0;(u.options.anchor||"left")==="right"?_.style.right=g?g*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=g?g*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){var _;(_=this._decorationElements.get(u))===null||_===void 0||_.remove(),this._decorationElements.delete(u),u.dispose()}};S=c([f(1,b.IBufferService),f(2,b.IDecorationService),f(3,y.IRenderService)],S),n.BufferDecorationRenderer=S},5871:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorZoneStore=void 0,n.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(s){if(s.options.overviewRulerOptions){for(const c of this._zones)if(c.color===s.options.overviewRulerOptions.color&&c.position===s.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,s.marker.line))return;if(this._lineAdjacentToZone(c,s.marker.line,s.options.overviewRulerOptions.position))return void this._addLineToZone(c,s.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=s.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=s.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=s.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=s.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:s.options.overviewRulerOptions.color,position:s.options.overviewRulerOptions.position,startBufferLine:s.marker.line,endBufferLine:s.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(s){this._linePadding=s}_lineIntersectsZone(s,c){return c>=s.startBufferLine&&c<=s.endBufferLine}_lineAdjacentToZone(s,c,f){return c>=s.startBufferLine-this._linePadding[f||"full"]&&c<=s.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(s,c){s.startBufferLine=Math.min(s.startBufferLine,c),s.endBufferLine=Math.max(s.endBufferLine,c)}}},5744:function(p,n,s){var c=this&&this.__decorate||function(E,T,R,h){var A,x=arguments.length,O=x<3?T:h===null?h=Object.getOwnPropertyDescriptor(T,R):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(E,T,R,h);else for(var H=E.length-1;H>=0;H--)(A=E[H])&&(O=(x<3?A(O):x>3?A(T,R,O):A(T,R))||O);return x>3&&O&&Object.defineProperty(T,R,O),O},f=this&&this.__param||function(E,T){return function(R,h){T(R,h,E)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OverviewRulerRenderer=void 0;const m=s(5871),y=s(3656),C=s(4725),b=s(844),S=s(2585),u={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0};let g=class extends b.Disposable{constructor(E,T,R,h,A,x,O){var H;super(),this._viewportElement=E,this._screenElement=T,this._bufferService=R,this._decorationService=h,this._renderService=A,this._optionsService=x,this._coreBrowseService=O,this._colorZoneStore=new m.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(H=this._viewportElement.parentElement)===null||H===void 0||H.insertBefore(this._canvas,this._viewportElement);const N=this._canvas.getContext("2d");if(!N)throw new Error("Ctx cannot be null");this._ctx=N,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,b.toDisposable)(()=>{var B;(B=this._canvas)===null||B===void 0||B.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,y.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const E=Math.floor(this._canvas.width/3),T=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=E,_.center=T,_.right=E,this._refreshDrawHeightConstants(),v.full=0,v.left=0,v.center=_.left,v.right=_.left+_.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowseService.dpr);const E=this._canvas.height/this._bufferService.buffer.lines.length,T=Math.round(Math.max(Math.min(E,12),6)*this._coreBrowseService.dpr);u.left=T,u.center=T,u.right=T}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const T of this._decorationService.decorations)this._colorZoneStore.addDecoration(T);this._ctx.lineWidth=1;const E=this._colorZoneStore.zones;for(const T of E)T.position!=="full"&&this._renderColorZone(T);for(const T of E)T.position==="full"&&this._renderColorZone(T);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(E){this._ctx.fillStyle=E.color,this._ctx.fillRect(v[E.position||"full"],Math.round((this._canvas.height-1)*(E.startBufferLine/this._bufferService.buffers.active.lines.length)-u[E.position||"full"]/2),_[E.position||"full"],Math.round((this._canvas.height-1)*((E.endBufferLine-E.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[E.position||"full"]))}_queueRefresh(E,T){this._shouldUpdateDimensions=E||this._shouldUpdateDimensions,this._shouldUpdateAnchor=T||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};g=c([f(2,S.IBufferService),f(3,S.IDecorationService),f(4,C.IRenderService),f(5,S.IOptionsService),f(6,C.ICoreBrowserService)],g),n.OverviewRulerRenderer=g},2950:function(p,n,s){var c=this&&this.__decorate||function(S,u,_,v){var g,E=arguments.length,T=E<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,u,_,v);else for(var R=S.length-1;R>=0;R--)(g=S[R])&&(T=(E<3?g(T):E>3?g(u,_,T):g(u,_))||T);return E>3&&T&&Object.defineProperty(u,_,T),T},f=this&&this.__param||function(S,u){return function(_,v){u(_,v,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositionHelper=void 0;const m=s(4725),y=s(2585),C=s(2584);let b=class{constructor(S,u,_,v,g,E){this._textarea=S,this._compositionView=u,this._bufferService=_,this._optionsService=v,this._coreService=g,this._renderService=E,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,u.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(u.start,u.end):this._textarea.value.substring(u.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;const u=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(u,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const u=this._textarea.value,_=u.replace(S,"");this._dataAlreadySent=_,u.length>S.length?this._coreService.triggerDataEvent(_,!0):u.length<S.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):u.length===S.length&&u!==S&&this._coreService.triggerDataEvent(u,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,g=u*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=g+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const E=this._compositionView.getBoundingClientRect();this._textarea.style.left=g+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(E.width,1)+"px",this._textarea.style.height=Math.max(E.height,1)+"px",this._textarea.style.lineHeight=E.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};b=c([f(2,y.IBufferService),f(3,y.IOptionsService),f(4,y.ICoreService),f(5,m.IRenderService)],b),n.CompositionHelper=b},9806:(p,n)=>{function s(c,f,m){const y=m.getBoundingClientRect(),C=c.getComputedStyle(m),b=parseInt(C.getPropertyValue("padding-left")),S=parseInt(C.getPropertyValue("padding-top"));return[f.clientX-y.left-b,f.clientY-y.top-S]}Object.defineProperty(n,"__esModule",{value:!0}),n.getCoords=n.getCoordsRelativeToElement=void 0,n.getCoordsRelativeToElement=s,n.getCoords=function(c,f,m,y,C,b,S,u,_){if(!b)return;const v=s(c,f,m);return v?(v[0]=Math.ceil((v[0]+(_?S/2:0))/S),v[1]=Math.ceil(v[1]/u),v[0]=Math.min(Math.max(v[0],1),y+(_?1:0)),v[1]=Math.min(Math.max(v[1],1),C),v):void 0}},9504:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.moveToCellSequence=void 0;const c=s(2584);function f(u,_,v,g){const E=u-m(u,v),T=_-m(_,v),R=Math.abs(E-T)-function(h,A,x){let O=0;const H=h-m(h,x),N=A-m(A,x);for(let B=0;B<Math.abs(H-N);B++){const ee=y(h,A)==="A"?-1:1,ue=x.buffer.lines.get(H+ee*B);ue!=null&&ue.isWrapped&&O++}return O}(u,_,v);return S(R,b(y(u,_),g))}function m(u,_){let v=0,g=_.buffer.lines.get(u),E=g==null?void 0:g.isWrapped;for(;E&&u>=0&&u<_.rows;)v++,g=_.buffer.lines.get(--u),E=g==null?void 0:g.isWrapped;return v}function y(u,_){return u>_?"A":"B"}function C(u,_,v,g,E,T){let R=u,h=_,A="";for(;R!==v||h!==g;)R+=E?1:-1,E&&R>T.cols-1?(A+=T.buffer.translateBufferLineToString(h,!1,u,R),R=0,u=0,h++):!E&&R<0&&(A+=T.buffer.translateBufferLineToString(h,!1,0,u+1),R=T.cols-1,u=R,h--);return A+T.buffer.translateBufferLineToString(h,!1,u,R)}function b(u,_){const v=_?"O":"[";return c.C0.ESC+v+u}function S(u,_){u=Math.floor(u);let v="";for(let g=0;g<u;g++)v+=_;return v}n.moveToCellSequence=function(u,_,v,g){const E=v.buffer.x,T=v.buffer.y;if(!v.buffer.hasScrollback)return function(A,x,O,H,N,B){return f(x,H,N,B).length===0?"":S(C(A,x,A,x-m(x,N),!1,N).length,b("D",B))}(E,T,0,_,v,g)+f(T,_,v,g)+function(A,x,O,H,N,B){let ee;ee=f(x,H,N,B).length>0?H-m(H,N):x;const ue=H,se=function(M,F,j,q,te,ge){let me;return me=f(j,q,te,ge).length>0?q-m(q,te):F,M<j&&me<=q||M>=j&&me<q?"C":"D"}(A,x,O,H,N,B);return S(C(A,ee,O,ue,se==="C",N).length,b(se,B))}(E,T,u,_,v,g);let R;if(T===_)return R=E>u?"D":"C",S(Math.abs(E-u),b(R,g));R=T>_?"D":"C";const h=Math.abs(T-_);return S(function(A,x){return x.cols-A}(T>_?u:E,v)+(h-1)*v.cols+1+((T>_?E:u)-1),b(R,g))}},1296:function(p,n,s){var c=this&&this.__decorate||function(h,A,x,O){var H,N=arguments.length,B=N<3?A:O===null?O=Object.getOwnPropertyDescriptor(A,x):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(h,A,x,O);else for(var ee=h.length-1;ee>=0;ee--)(H=h[ee])&&(B=(N<3?H(B):N>3?H(A,x,B):H(A,x))||B);return N>3&&B&&Object.defineProperty(A,x,B),B},f=this&&this.__param||function(h,A){return function(x,O){A(x,O,h)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRenderer=void 0;const m=s(3787),y=s(2223),C=s(6171),b=s(4725),S=s(8055),u=s(8460),_=s(844),v=s(2585),g="xterm-dom-renderer-owner-",E="xterm-focus";let T=1,R=class extends _.Disposable{constructor(h,A,x,O,H,N,B,ee,ue,se){super(),this._element=h,this._screenElement=A,this._viewportElement=x,this._linkifier2=O,this._charSizeService=N,this._optionsService=B,this._bufferService=ee,this._coreBrowserService=ue,this._themeService=se,this._terminalClass=T++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(M=>this._injectCss(M))),this._injectCss(this._themeService.colors),this._rowFactory=H.createInstance(m.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(M=>this._handleLinkHover(M))),this.register(this._linkifier2.onHideLinkUnderline(M=>this._handleLinkLeave(M))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))}_updateDimensions(){const h=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*h,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*h),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/h),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/h),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const x of this._rowElements)x.style.width=`${this.dimensions.css.canvas.width}px`,x.style.height=`${this.dimensions.css.cell.height}px`,x.style.lineHeight=`${this.dimensions.css.cell.height}px`,x.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const A=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(h){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .xterm-rows { color: ${h.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;A+=`${this._terminalSelector} .xterm-rows .xterm-dim { color: ${S.color.multiplyOpacity(h.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.${m.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${m.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${m.ITALIC_CLASS} { font-style: italic;}`,A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",A+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${h.cursor.css};  color: ${h.cursorAccent.css}; } 50% {  background-color: ${h.cursorAccent.css};  color: ${h.cursor.css}; }}`,A+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${m.CURSOR_CLASS}.${m.CURSOR_STYLE_BLOCK_CLASS} ,${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${m.CURSOR_CLASS}.${m.CURSOR_STYLE_BAR_CLASS} ,${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${m.CURSOR_CLASS}.${m.CURSOR_STYLE_UNDERLINE_CLASS} { outline: 1px solid ${h.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${m.CURSOR_CLASS}.${m.CURSOR_BLINK_CLASS}:not(.${m.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${m.CURSOR_CLASS}.${m.CURSOR_BLINK_CLASS}.${m.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${m.CURSOR_CLASS}.${m.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${h.cursor.css}; color: ${h.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${m.CURSOR_CLASS}.${m.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${h.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${m.CURSOR_CLASS}.${m.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${h.cursor.css} inset;}`,A+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${h.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${h.selectionInactiveBackgroundOpaque.css};}`;for(const[x,O]of h.ansi.entries())A+=`${this._terminalSelector} .xterm-fg-${x} { color: ${O.css}; }${this._terminalSelector} .xterm-fg-${x}.${m.DIM_CLASS} { color: ${S.color.multiplyOpacity(O,.5).css}; }${this._terminalSelector} .xterm-bg-${x} { background-color: ${O.css}; }`;A+=`${this._terminalSelector} .xterm-fg-${y.INVERTED_DEFAULT_COLOR} { color: ${S.color.opaque(h.background).css}; }${this._terminalSelector} .xterm-fg-${y.INVERTED_DEFAULT_COLOR}.${m.DIM_CLASS} { color: ${S.color.multiplyOpacity(S.color.opaque(h.background),.5).css}; }${this._terminalSelector} .xterm-bg-${y.INVERTED_DEFAULT_COLOR} { background-color: ${h.foreground.css}; }`,this._themeStyleElement.textContent=A}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(h,A){for(let x=this._rowElements.length;x<=A;x++){const O=document.createElement("div");this._rowContainer.appendChild(O),this._rowElements.push(O)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(h,A){this._refreshRowElements(h,A),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(E)}handleFocus(){this._rowContainer.classList.add(E)}handleSelectionChanged(h,A,x){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(h,A,x),this.renderRows(0,this._bufferService.rows-1),!h||!A)return;const O=h[1]-this._bufferService.buffer.ydisp,H=A[1]-this._bufferService.buffer.ydisp,N=Math.max(O,0),B=Math.min(H,this._bufferService.rows-1);if(N>=this._bufferService.rows||B<0)return;const ee=document.createDocumentFragment();if(x){const ue=h[0]>A[0];ee.appendChild(this._createSelectionElement(N,ue?A[0]:h[0],ue?h[0]:A[0],B-N+1))}else{const ue=O===N?h[0]:0,se=N===H?A[0]:this._bufferService.cols;ee.appendChild(this._createSelectionElement(N,ue,se));const M=B-N-1;if(ee.appendChild(this._createSelectionElement(N+1,0,this._bufferService.cols,M)),N!==B){const F=H===B?A[0]:this._bufferService.cols;ee.appendChild(this._createSelectionElement(B,0,F))}}this._selectionContainer.appendChild(ee)}_createSelectionElement(h,A,x,O=1){const H=document.createElement("div");return H.style.height=O*this.dimensions.css.cell.height+"px",H.style.top=h*this.dimensions.css.cell.height+"px",H.style.left=A*this.dimensions.css.cell.width+"px",H.style.width=this.dimensions.css.cell.width*(x-A)+"px",H}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors)}clear(){for(const h of this._rowElements)h.replaceChildren()}renderRows(h,A){const x=this._bufferService.buffer.ybase+this._bufferService.buffer.y,O=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink;for(let N=h;N<=A;N++){const B=this._rowElements[N],ee=N+this._bufferService.buffer.ydisp,ue=this._bufferService.buffer.lines.get(ee),se=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[N]&&this._cellToRowElements[N].length===this._bufferService.cols||(this._cellToRowElements[N]=new Int16Array(this._bufferService.cols)),B.replaceChildren(this._rowFactory.createRow(ue,ee,ee===x,se,O,H,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[N]))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!0)}_handleLinkLeave(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!1)}_setCellUnderline(h,A,x,O,H,N){x<0&&(h=0),O<0&&(A=0);const B=this._cellToRowElements.length-1;x=Math.max(Math.min(x,B),0),O=Math.max(Math.min(O,B),0);const ee=this._cellToRowElements[x],ue=this._cellToRowElements[O];if(!(h>=ee.length||A>=ue.length)&&(h=ee[h],A=ue[A],h!==-1&&A!==-1))for(;h!==A||x!==O;){const se=this._rowElements[x];if(!se)return;const M=se.children[h];M&&(M.style.textDecoration=N?"underline":"none"),++h>=H&&(h=0,x++)}}};R=c([f(4,v.IInstantiationService),f(5,b.ICharSizeService),f(6,v.IOptionsService),f(7,v.IBufferService),f(8,b.ICoreBrowserService),f(9,b.IThemeService)],R),n.DomRenderer=R},3787:function(p,n,s){var c=this&&this.__decorate||function(R,h,A,x){var O,H=arguments.length,N=H<3?h:x===null?x=Object.getOwnPropertyDescriptor(h,A):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(R,h,A,x);else for(var B=R.length-1;B>=0;B--)(O=R[B])&&(N=(H<3?O(N):H>3?O(h,A,N):O(h,A))||N);return H>3&&N&&Object.defineProperty(h,A,N),N},f=this&&this.__param||function(R,h){return function(A,x){h(A,x,R)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRendererRowFactory=n.CURSOR_STYLE_UNDERLINE_CLASS=n.CURSOR_STYLE_BAR_CLASS=n.CURSOR_STYLE_BLOCK_CLASS=n.CURSOR_BLINK_CLASS=n.CURSOR_CLASS=n.STRIKETHROUGH_CLASS=n.OVERLINE_CLASS=n.UNDERLINE_CLASS=n.ITALIC_CLASS=n.DIM_CLASS=n.BOLD_CLASS=void 0;const m=s(2223),y=s(643),C=s(511),b=s(2585),S=s(8055),u=s(4725),_=s(4269),v=s(6171),g=s(3734);n.BOLD_CLASS="xterm-bold",n.DIM_CLASS="xterm-dim",n.ITALIC_CLASS="xterm-italic",n.UNDERLINE_CLASS="xterm-underline",n.OVERLINE_CLASS="xterm-overline",n.STRIKETHROUGH_CLASS="xterm-strikethrough",n.CURSOR_CLASS="xterm-cursor",n.CURSOR_BLINK_CLASS="xterm-cursor-blink",n.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",n.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",n.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let E=class{constructor(R,h,A,x,O,H,N){this._document=R,this._characterJoinerService=h,this._optionsService=A,this._coreBrowserService=x,this._coreService=O,this._decorationService=H,this._themeService=N,this._workCell=new C.CellData,this._columnSelectMode=!1}handleSelectionChanged(R,h,A){this._selectionStart=R,this._selectionEnd=h,this._columnSelectMode=A}createRow(R,h,A,x,O,H,N,B,ee){const ue=this._document.createDocumentFragment(),se=this._characterJoinerService.getJoinedCharacters(h);let M=0;for(let te=Math.min(R.length,B)-1;te>=0;te--)if(R.loadCell(te,this._workCell).getCode()!==y.NULL_CELL_CODE||A&&te===O){M=te+1;break}const F=this._themeService.colors;let j=-1,q=0;for(;q<M;q++){R.loadCell(q,this._workCell);let te=this._workCell.getWidth();if(te===0){ee[q]=j;continue}let ge=!1,me=q,oe=this._workCell;if(se.length>0&&q===se[0][0]){ge=!0;const Oe=se.shift();oe=new _.JoinedCellData(this._workCell,R.translateToString(!0,Oe[0],Oe[1]),Oe[1]-Oe[0]),me=Oe[1]-1,te=oe.getWidth()}const pe=this._document.createElement("span");if(te>1&&(pe.style.width=N*te+"px"),ge&&(pe.style.display="inline",O>=q&&O<=me&&(O=q)),!this._coreService.isCursorHidden&&A&&q===O)switch(pe.classList.add(n.CURSOR_CLASS),H&&pe.classList.add(n.CURSOR_BLINK_CLASS),x){case"bar":pe.classList.add(n.CURSOR_STYLE_BAR_CLASS);break;case"underline":pe.classList.add(n.CURSOR_STYLE_UNDERLINE_CLASS);break;default:pe.classList.add(n.CURSOR_STYLE_BLOCK_CLASS)}if(oe.isBold()&&pe.classList.add(n.BOLD_CLASS),oe.isItalic()&&pe.classList.add(n.ITALIC_CLASS),oe.isDim()&&pe.classList.add(n.DIM_CLASS),oe.isInvisible()?pe.textContent=y.WHITESPACE_CELL_CHAR:pe.textContent=oe.getChars()||y.WHITESPACE_CELL_CHAR,oe.isUnderline()&&(pe.classList.add(`${n.UNDERLINE_CLASS}-${oe.extended.underlineStyle}`),pe.textContent===" "&&(pe.textContent=""),!oe.isUnderlineColorDefault()))if(oe.isUnderlineColorRGB())pe.style.textDecorationColor=`rgb(${g.AttributeData.toColorRGB(oe.getUnderlineColor()).join(",")})`;else{let Oe=oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&oe.isBold()&&Oe<8&&(Oe+=8),pe.style.textDecorationColor=F.ansi[Oe].css}oe.isOverline()&&(pe.classList.add(n.OVERLINE_CLASS),pe.textContent===" "&&(pe.textContent="")),oe.isStrikethrough()&&pe.classList.add(n.STRIKETHROUGH_CLASS);let z=oe.getFgColor(),W=oe.getFgColorMode(),Y=oe.getBgColor(),re=oe.getBgColorMode();const ae=!!oe.isInverse();if(ae){const Oe=z;z=Y,Y=Oe;const Dt=W;W=re,re=Dt}let Pe,de,Fe=!1;this._decorationService.forEachDecorationAtCell(q,h,void 0,Oe=>{Oe.options.layer!=="top"&&Fe||(Oe.backgroundColorRGB&&(re=50331648,Y=Oe.backgroundColorRGB.rgba>>8&16777215,Pe=Oe.backgroundColorRGB),Oe.foregroundColorRGB&&(W=50331648,z=Oe.foregroundColorRGB.rgba>>8&16777215,de=Oe.foregroundColorRGB),Fe=Oe.options.layer==="top")});const Ue=this._isCellInSelection(q,h);let ze;switch(Fe||F.selectionForeground&&Ue&&(W=50331648,z=F.selectionForeground.rgba>>8&16777215,de=F.selectionForeground),Ue&&(Pe=this._coreBrowserService.isFocused?F.selectionBackgroundOpaque:F.selectionInactiveBackgroundOpaque,Fe=!0),Fe&&pe.classList.add("xterm-decoration-top"),re){case 16777216:case 33554432:ze=F.ansi[Y],pe.classList.add(`xterm-bg-${Y}`);break;case 50331648:ze=S.rgba.toColor(Y>>16,Y>>8&255,255&Y),this._addStyle(pe,`background-color:#${T((Y>>>0).toString(16),"0",6)}`);break;default:ae?(ze=F.foreground,pe.classList.add(`xterm-bg-${m.INVERTED_DEFAULT_COLOR}`)):ze=F.background}switch(Pe||oe.isDim()&&(Pe=S.color.multiplyOpacity(ze,.5)),W){case 16777216:case 33554432:oe.isBold()&&z<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(z+=8),this._applyMinimumContrast(pe,ze,F.ansi[z],oe,Pe,void 0)||pe.classList.add(`xterm-fg-${z}`);break;case 50331648:const Oe=S.rgba.toColor(z>>16&255,z>>8&255,255&z);this._applyMinimumContrast(pe,ze,Oe,oe,Pe,de)||this._addStyle(pe,`color:#${T(z.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(pe,ze,F.foreground,oe,Pe,void 0)||ae&&pe.classList.add(`xterm-fg-${m.INVERTED_DEFAULT_COLOR}`)}ue.appendChild(pe),ee[q]=++j,q=me}return q<B-1&&ee.subarray(q).fill(++j),ue}_applyMinimumContrast(R,h,A,x,O,H){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.excludeFromContrastRatioDemands)(x.getCode()))return!1;let N;return O||H||(N=this._themeService.colors.contrastCache.getColor(h.rgba,A.rgba)),N===void 0&&(N=S.color.ensureContrastRatio(O||h,H||A,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((O||h).rgba,(H||A).rgba,N??null)),!!N&&(this._addStyle(R,`color:${N.css}`),!0)}_addStyle(R,h){R.setAttribute("style",`${R.getAttribute("style")||""}${h};`)}_isCellInSelection(R,h){const A=this._selectionStart,x=this._selectionEnd;return!(!A||!x)&&(this._columnSelectMode?A[0]<=x[0]?R>=A[0]&&h>=A[1]&&R<x[0]&&h<=x[1]:R<A[0]&&h>=A[1]&&R>=x[0]&&h<=x[1]:h>A[1]&&h<x[1]||A[1]===x[1]&&h===A[1]&&R>=A[0]&&R<x[0]||A[1]<x[1]&&h===x[1]&&R<x[0]||A[1]<x[1]&&h===A[1]&&R>=A[0])}};function T(R,h,A){for(;R.length<A;)R=h+R;return R}E=c([f(1,u.ICharacterJoinerService),f(2,b.IOptionsService),f(3,u.ICoreBrowserService),f(4,b.ICoreService),f(5,b.IDecorationService),f(6,u.IThemeService)],E),n.DomRendererRowFactory=E},2223:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const c=s(6114);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(p,n)=>{function s(c){return 57508<=c&&c<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},n.isPowerlineGlyph=s,n.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},n.excludeFromContrastRatioDemands=function(c){return s(c)||function(f){return 9472<=f&&f<=9631}(c)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionModel=void 0,n.SelectionModel=class{constructor(s){this._bufferService=s,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const s=this.selectionStart[0]+this.selectionStartLength;return s>this._bufferService.cols?s%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)-1]:[s%this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)]:[s,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const s=this.selectionStart[0]+this.selectionStartLength;return s>this._bufferService.cols?[s%this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)]:[Math.max(s,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const s=this.selectionStart,c=this.selectionEnd;return!(!s||!c)&&(s[1]>c[1]||s[1]===c[1]&&s[0]>c[0])}handleTrim(s){return this.selectionStart&&(this.selectionStart[1]-=s),this.selectionEnd&&(this.selectionEnd[1]-=s),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(p,n,s){var c=this&&this.__decorate||function(u,_,v,g){var E,T=arguments.length,R=T<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,v):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,_,v,g);else for(var h=u.length-1;h>=0;h--)(E=u[h])&&(R=(T<3?E(R):T>3?E(_,v,R):E(_,v))||R);return T>3&&R&&Object.defineProperty(_,v,R),R},f=this&&this.__param||function(u,_){return function(v,g){_(v,g,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharSizeService=void 0;const m=s(2585),y=s(8460),C=s(844);let b=class extends C.Disposable{constructor(u,_,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new y.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new S(u,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){const u=this._measureStrategy.measure();u.width===this.width&&u.height===this.height||(this.width=u.width,this.height=u.height,this._onCharSizeChange.fire())}};b=c([f(2,m.IOptionsService)],b),n.CharSizeService=b;class S{constructor(_,v,g){this._document=_,this._parentElement=v,this._optionsService=g,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const _=this._measureElement.getBoundingClientRect();return _.width!==0&&_.height!==0&&(this._result.width=_.width,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(p,n,s){var c=this&&this.__decorate||function(_,v,g,E){var T,R=arguments.length,h=R<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,g):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(_,v,g,E);else for(var A=_.length-1;A>=0;A--)(T=_[A])&&(h=(R<3?T(h):R>3?T(v,g,h):T(v,g))||h);return R>3&&h&&Object.defineProperty(v,g,h),h},f=this&&this.__param||function(_,v){return function(g,E){v(g,E,_)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const m=s(3734),y=s(643),C=s(511),b=s(2585);class S extends m.AttributeData{constructor(v,g,E){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=g,this._width=E}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=S;let u=class Mf{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(v){const g={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(g),g.id}deregister(v){for(let g=0;g<this._characterJoiners.length;g++)if(this._characterJoiners[g].id===v)return this._characterJoiners.splice(g,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];const g=this._bufferService.buffer.lines.get(v);if(!g||g.length===0)return[];const E=[],T=g.translateToString(!0);let R=0,h=0,A=0,x=g.getFg(0),O=g.getBg(0);for(let H=0;H<g.getTrimmedLength();H++)if(g.loadCell(H,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==x||this._workCell.bg!==O){if(H-R>1){const N=this._getJoinedRanges(T,A,h,g,R);for(let B=0;B<N.length;B++)E.push(N[B])}R=H,A=h,x=this._workCell.fg,O=this._workCell.bg}h+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-R>1){const H=this._getJoinedRanges(T,A,h,g,R);for(let N=0;N<H.length;N++)E.push(H[N])}return E}_getJoinedRanges(v,g,E,T,R){const h=v.substring(g,E);let A=[];try{A=this._characterJoiners[0].handler(h)}catch(x){console.error(x)}for(let x=1;x<this._characterJoiners.length;x++)try{const O=this._characterJoiners[x].handler(h);for(let H=0;H<O.length;H++)Mf._mergeRanges(A,O[H])}catch(O){console.error(O)}return this._stringRangesToCellRanges(A,T,R),A}_stringRangesToCellRanges(v,g,E){let T=0,R=!1,h=0,A=v[T];if(A){for(let x=E;x<this._bufferService.cols;x++){const O=g.getWidth(x),H=g.getString(x).length||y.WHITESPACE_CELL_CHAR.length;if(O!==0){if(!R&&A[0]<=h&&(A[0]=x,R=!0),A[1]<=h){if(A[1]=x,A=v[++T],!A)break;A[0]<=h?(A[0]=x,R=!0):R=!1}h+=H}}A&&(A[1]=this._bufferService.cols)}}static _mergeRanges(v,g){let E=!1;for(let T=0;T<v.length;T++){const R=v[T];if(E){if(g[1]<=R[0])return v[T-1][1]=g[1],v;if(g[1]<=R[1])return v[T-1][1]=Math.max(g[1],R[1]),v.splice(T,1),v;v.splice(T,1),T--}else{if(g[1]<=R[0])return v.splice(T,0,g),v;if(g[1]<=R[1])return R[0]=Math.min(g[0],R[0]),v;g[0]<R[1]&&(R[0]=Math.min(g[0],R[0]),E=!0)}}return E?v[v.length-1][1]=g[1]:v.push(g),v}};u=c([f(0,b.IBufferService)],u),n.CharacterJoinerService=u},5114:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreBrowserService=void 0,n.CoreBrowserService=class{constructor(s,c){this._textarea=s,this.window=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(p,n,s){var c=this&&this.__decorate||function(b,S,u,_){var v,g=arguments.length,E=g<3?S:_===null?_=Object.getOwnPropertyDescriptor(S,u):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,S,u,_);else for(var T=b.length-1;T>=0;T--)(v=b[T])&&(E=(g<3?v(E):g>3?v(S,u,E):v(S,u))||E);return g>3&&E&&Object.defineProperty(S,u,E),E},f=this&&this.__param||function(b,S){return function(u,_){S(u,_,b)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseService=void 0;const m=s(4725),y=s(9806);let C=class{constructor(b,S){this._renderService=b,this._charSizeService=S}getCoords(b,S,u,_,v){return(0,y.getCoords)(window,b,S,u,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(b,S){const u=(0,y.getCoordsRelativeToElement)(window,b,S);if(!(!this._charSizeService.hasValidSize||u[0]<0||u[1]<0||u[0]>=this._renderService.dimensions.css.canvas.width||u[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(u[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(u[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(u[0]),y:Math.floor(u[1])}}};C=c([f(0,m.IRenderService),f(1,m.ICharSizeService)],C),n.MouseService=C},3230:function(p,n,s){var c=this&&this.__decorate||function(E,T,R,h){var A,x=arguments.length,O=x<3?T:h===null?h=Object.getOwnPropertyDescriptor(T,R):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(E,T,R,h);else for(var H=E.length-1;H>=0;H--)(A=E[H])&&(O=(x<3?A(O):x>3?A(T,R,O):A(T,R))||O);return x>3&&O&&Object.defineProperty(T,R,O),O},f=this&&this.__param||function(E,T){return function(R,h){T(R,h,E)}};Object.defineProperty(n,"__esModule",{value:!0}),n.RenderService=void 0;const m=s(6193),y=s(8460),C=s(844),b=s(5596),S=s(3656),u=s(2585),_=s(4725),v=s(7226);let g=class extends C.Disposable{constructor(E,T,R,h,A,x,O,H){if(super(),this._rowCount=E,this._charSizeService=h,this._pausedResizeTask=new v.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var N;return(N=this._renderer)===null||N===void 0?void 0:N.dispose()}}),this._renderDebouncer=new m.RenderDebouncer(O.window,(N,B)=>this._renderRows(N,B)),this.register(this._renderDebouncer),this._screenDprMonitor=new b.ScreenDprMonitor(O.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>{var N;return(N=this._renderer)===null||N===void 0?void 0:N.clear()})),this.register(R.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(A.onDecorationRegistered(()=>this._fullRefresh())),this.register(A.onDecorationRemoved(()=>this._fullRefresh())),this.register(R.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(R.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register((0,S.addDisposableDomListener)(O.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(H.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in O.window){const N=new O.window.IntersectionObserver(B=>this._handleIntersectionChange(B[B.length-1]),{threshold:0});N.observe(T),this.register({dispose:()=>N.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(E){this._isPaused=E.isIntersecting===void 0?E.intersectionRatio===0:!E.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(E,T,R=!1){this._isPaused?this._needsFullRefresh=!0:(R||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(E,T,this._rowCount))}_renderRows(E,T){this._renderer&&(E=Math.min(E,this._rowCount-1),T=Math.min(T,this._rowCount-1),this._renderer.renderRows(E,T),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:E,end:T}),this._onRender.fire({start:E,end:T}),this._isNextRenderRedrawOnly=!0)}resize(E,T){this._rowCount=T,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(E){var T;(T=this._renderer)===null||T===void 0||T.dispose(),this._renderer=E,this._renderer.onRequestRedraw(R=>this.refreshRows(R.start,R.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(E){return this._renderDebouncer.addRefreshCallback(E)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var E,T;this._renderer&&((T=(E=this._renderer).clearTextureAtlas)===null||T===void 0||T.call(E),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(E,T){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(E,T)):this._renderer.handleResize(E,T),this._fullRefresh())}handleCharSizeChanged(){var E;(E=this._renderer)===null||E===void 0||E.handleCharSizeChanged()}handleBlur(){var E;(E=this._renderer)===null||E===void 0||E.handleBlur()}handleFocus(){var E;(E=this._renderer)===null||E===void 0||E.handleFocus()}handleSelectionChanged(E,T,R){var h;this._selectionState.start=E,this._selectionState.end=T,this._selectionState.columnSelectMode=R,(h=this._renderer)===null||h===void 0||h.handleSelectionChanged(E,T,R)}handleCursorMove(){var E;(E=this._renderer)===null||E===void 0||E.handleCursorMove()}clear(){var E;(E=this._renderer)===null||E===void 0||E.clear()}};g=c([f(2,u.IOptionsService),f(3,_.ICharSizeService),f(4,u.IDecorationService),f(5,u.IBufferService),f(6,_.ICoreBrowserService),f(7,_.IThemeService)],g),n.RenderService=g},9312:function(p,n,s){var c=this&&this.__decorate||function(A,x,O,H){var N,B=arguments.length,ee=B<3?x:H===null?H=Object.getOwnPropertyDescriptor(x,O):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(A,x,O,H);else for(var ue=A.length-1;ue>=0;ue--)(N=A[ue])&&(ee=(B<3?N(ee):B>3?N(x,O,ee):N(x,O))||ee);return B>3&&ee&&Object.defineProperty(x,O,ee),ee},f=this&&this.__param||function(A,x){return function(O,H){x(O,H,A)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionService=void 0;const m=s(6114),y=s(456),C=s(511),b=s(8460),S=s(4725),u=s(2585),_=s(9806),v=s(9504),g=s(844),E=s(4841),T=String.fromCharCode(160),R=new RegExp(T,"g");let h=class extends g.Disposable{constructor(A,x,O,H,N,B,ee,ue,se){super(),this._element=A,this._screenElement=x,this._linkifier=O,this._bufferService=H,this._coreService=N,this._mouseService=B,this._optionsService=ee,this._renderService=ue,this._coreBrowserService=se,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new C.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new b.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new b.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new b.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=M=>this._handleMouseMove(M),this._mouseUpListener=M=>this._handleMouseUp(M),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(M=>this._handleTrim(M)),this.register(this._bufferService.buffers.onBufferActivate(M=>this._handleBufferActivate(M))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,g.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!A||!x||A[0]===x[0]&&A[1]===x[1])}get selectionText(){const A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!A||!x)return"";const O=this._bufferService.buffer,H=[];if(this._activeSelectionMode===3){if(A[0]===x[0])return"";const N=A[0]<x[0]?A[0]:x[0],B=A[0]<x[0]?x[0]:A[0];for(let ee=A[1];ee<=x[1];ee++){const ue=O.translateBufferLineToString(ee,!0,N,B);H.push(ue)}}else{const N=A[1]===x[1]?x[0]:void 0;H.push(O.translateBufferLineToString(A[1],!0,A[0],N));for(let B=A[1]+1;B<=x[1]-1;B++){const ee=O.lines.get(B),ue=O.translateBufferLineToString(B,!0);ee!=null&&ee.isWrapped?H[H.length-1]+=ue:H.push(ue)}if(A[1]!==x[1]){const B=O.lines.get(x[1]),ee=O.translateBufferLineToString(x[1],!0,0,x[0]);B&&B.isWrapped?H[H.length-1]+=ee:H.push(ee)}}return H.map(N=>N.replace(R," ")).join(m.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(A){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),m.isLinux&&A&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(A){const x=this._getMouseBufferCoords(A),O=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!!(O&&H&&x)&&this._areCoordsInSelection(x,O,H)}isCellInSelection(A,x){const O=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!(!O||!H)&&this._areCoordsInSelection([A,x],O,H)}_areCoordsInSelection(A,x,O){return A[1]>x[1]&&A[1]<O[1]||x[1]===O[1]&&A[1]===x[1]&&A[0]>=x[0]&&A[0]<O[0]||x[1]<O[1]&&A[1]===O[1]&&A[0]<O[0]||x[1]<O[1]&&A[1]===x[1]&&A[0]>=x[0]}_selectWordAtCursor(A,x){var O,H;const N=(H=(O=this._linkifier.currentLink)===null||O===void 0?void 0:O.link)===null||H===void 0?void 0:H.range;if(N)return this._model.selectionStart=[N.start.x-1,N.start.y-1],this._model.selectionStartLength=(0,E.getRangeLength)(N,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(A);return!!B&&(this._selectWordAt(B,x),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(A,x){this._model.clearSelection(),A=Math.max(A,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,A],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()}_handleTrim(A){this._model.handleTrim(A)&&this.refresh()}_getMouseBufferCoords(A){const x=this._mouseService.getCoords(A,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x}_getMouseEventScrollAmount(A){let x=(0,_.getCoordsRelativeToElement)(this._coreBrowserService.window,A,this._screenElement)[1];const O=this._renderService.dimensions.css.canvas.height;return x>=0&&x<=O?0:(x>O&&(x-=O),x=Math.min(Math.max(x,-50),50),x/=50,x/Math.abs(x)+Math.round(14*x))}shouldForceSelection(A){return m.isMac?A.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:A.shiftKey}handleMouseDown(A){if(this._mouseDownTimeStamp=A.timeStamp,(A.button!==2||!this.hasSelection)&&A.button===0){if(!this._enabled){if(!this.shouldForceSelection(A))return;A.stopPropagation()}A.preventDefault(),this._dragScrollAmount=0,this._enabled&&A.shiftKey?this._handleIncrementalClick(A):A.detail===1?this._handleSingleClick(A):A.detail===2?this._handleDoubleClick(A):A.detail===3&&this._handleTripleClick(A),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(A){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(A))}_handleSingleClick(A){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(A)?3:0,this._model.selectionStart=this._getMouseBufferCoords(A),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(A){this._selectWordAtCursor(A,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(A){const x=this._getMouseBufferCoords(A);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))}shouldColumnSelect(A){return A.altKey&&!(m.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(A){if(A.stopImmediatePropagation(),!this._model.selectionStart)return;const x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(A),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(A),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const O=this._bufferService.buffer;if(this._model.selectionEnd[1]<O.lines.length){const H=O.lines.get(this._model.selectionEnd[1]);H&&H.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const A=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(A.ydisp+this._bufferService.rows,A.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=A.ydisp),this.refresh()}}_handleMouseUp(A){const x=A.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&A.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const O=this._mouseService.getCoords(A,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(O&&O[0]!==void 0&&O[1]!==void 0){const H=(0,v.moveToCellSequence)(O[0]-1,O[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(H,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,O=!(!A||!x||A[0]===x[0]&&A[1]===x[1]);O?A&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&A[0]===this._oldSelectionStart[0]&&A[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(A,x,O)):this._oldHasSelection&&this._fireOnSelectionChange(A,x,O)}_fireOnSelectionChange(A,x,O){this._oldSelectionStart=A,this._oldSelectionEnd=x,this._oldHasSelection=O,this._onSelectionChange.fire()}_handleBufferActivate(A){this.clearSelection(),this._trimListener.dispose(),this._trimListener=A.activeBuffer.lines.onTrim(x=>this._handleTrim(x))}_convertViewportColToCharacterIndex(A,x){let O=x;for(let H=0;x>=H;H++){const N=A.loadCell(H,this._workCell).getChars().length;this._workCell.getWidth()===0?O--:N>1&&x!==H&&(O+=N-1)}return O}setSelection(A,x,O){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[A,x],this._model.selectionStartLength=O,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(A){this._isClickInSelection(A)||(this._selectWordAtCursor(A,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(A,x,O=!0,H=!0){if(A[0]>=this._bufferService.cols)return;const N=this._bufferService.buffer,B=N.lines.get(A[1]);if(!B)return;const ee=N.translateBufferLineToString(A[1],!1);let ue=this._convertViewportColToCharacterIndex(B,A[0]),se=ue;const M=A[0]-ue;let F=0,j=0,q=0,te=0;if(ee.charAt(ue)===" "){for(;ue>0&&ee.charAt(ue-1)===" ";)ue--;for(;se<ee.length&&ee.charAt(se+1)===" ";)se++}else{let oe=A[0],pe=A[0];B.getWidth(oe)===0&&(F++,oe--),B.getWidth(pe)===2&&(j++,pe++);const z=B.getString(pe).length;for(z>1&&(te+=z-1,se+=z-1);oe>0&&ue>0&&!this._isCharWordSeparator(B.loadCell(oe-1,this._workCell));){B.loadCell(oe-1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===0?(F++,oe--):W>1&&(q+=W-1,ue-=W-1),ue--,oe--}for(;pe<B.length&&se+1<ee.length&&!this._isCharWordSeparator(B.loadCell(pe+1,this._workCell));){B.loadCell(pe+1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===2?(j++,pe++):W>1&&(te+=W-1,se+=W-1),se++,pe++}}se++;let ge=ue+M-F+q,me=Math.min(this._bufferService.cols,se-ue+F+j-q-te);if(x||ee.slice(ue,se).trim()!==""){if(O&&ge===0&&B.getCodePoint(0)!==32){const oe=N.lines.get(A[1]-1);if(oe&&B.isWrapped&&oe.getCodePoint(this._bufferService.cols-1)!==32){const pe=this._getWordAt([this._bufferService.cols-1,A[1]-1],!1,!0,!1);if(pe){const z=this._bufferService.cols-pe.start;ge-=z,me+=z}}}if(H&&ge+me===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){const oe=N.lines.get(A[1]+1);if(oe!=null&&oe.isWrapped&&oe.getCodePoint(0)!==32){const pe=this._getWordAt([0,A[1]+1],!1,!1,!0);pe&&(me+=pe.length)}}return{start:ge,length:me}}}_selectWordAt(A,x){const O=this._getWordAt(A,x);if(O){for(;O.start<0;)O.start+=this._bufferService.cols,A[1]--;this._model.selectionStart=[O.start,A[1]],this._model.selectionStartLength=O.length}}_selectToWordAt(A){const x=this._getWordAt(A,!0);if(x){let O=A[1];for(;x.start<0;)x.start+=this._bufferService.cols,O--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,O++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,O]}}_isCharWordSeparator(A){return A.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(A.getChars())>=0}_selectLineAt(A){const x=this._bufferService.buffer.getWrappedRangeForLine(A),O={start:{x:0,y:x.first},end:{x:this._bufferService.cols-1,y:x.last}};this._model.selectionStart=[0,x.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,E.getRangeLength)(O,this._bufferService.cols)}};h=c([f(3,u.IBufferService),f(4,u.ICoreService),f(5,S.IMouseService),f(6,u.IOptionsService),f(7,S.IRenderService),f(8,S.ICoreBrowserService)],h),n.SelectionService=h},4725:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IThemeService=n.ICharacterJoinerService=n.ISelectionService=n.IRenderService=n.IMouseService=n.ICoreBrowserService=n.ICharSizeService=void 0;const c=s(8343);n.ICharSizeService=(0,c.createDecorator)("CharSizeService"),n.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),n.IMouseService=(0,c.createDecorator)("MouseService"),n.IRenderService=(0,c.createDecorator)("RenderService"),n.ISelectionService=(0,c.createDecorator)("SelectionService"),n.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),n.IThemeService=(0,c.createDecorator)("ThemeService")},6731:function(p,n,s){var c=this&&this.__decorate||function(h,A,x,O){var H,N=arguments.length,B=N<3?A:O===null?O=Object.getOwnPropertyDescriptor(A,x):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(h,A,x,O);else for(var ee=h.length-1;ee>=0;ee--)(H=h[ee])&&(B=(N<3?H(B):N>3?H(A,x,B):H(A,x))||B);return N>3&&B&&Object.defineProperty(A,x,B),B},f=this&&this.__param||function(h,A){return function(x,O){A(x,O,h)}};Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeService=n.DEFAULT_ANSI_COLORS=void 0;const m=s(7239),y=s(8055),C=s(8460),b=s(844),S=s(2585),u=y.css.toColor("#ffffff"),_=y.css.toColor("#000000"),v=y.css.toColor("#ffffff"),g=y.css.toColor("#000000"),E={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};n.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const h=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],A=[0,95,135,175,215,255];for(let x=0;x<216;x++){const O=A[x/36%6|0],H=A[x/6%6|0],N=A[x%6];h.push({css:y.channels.toCss(O,H,N),rgba:y.channels.toRgba(O,H,N)})}for(let x=0;x<24;x++){const O=8+10*x;h.push({css:y.channels.toCss(O,O,O),rgba:y.channels.toRgba(O,O,O)})}return h})());let T=class extends b.Disposable{constructor(h){super(),this._optionsService=h,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new m.ColorContrastCache,this._colors={foreground:u,background:_,cursor:v,cursorAccent:g,selectionForeground:void 0,selectionBackgroundTransparent:E,selectionBackgroundOpaque:y.color.blend(_,E),selectionInactiveBackgroundTransparent:E,selectionInactiveBackgroundOpaque:y.color.blend(_,E),ansi:n.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(h={}){const A=this._colors;if(A.foreground=R(h.foreground,u),A.background=R(h.background,_),A.cursor=R(h.cursor,v),A.cursorAccent=R(h.cursorAccent,g),A.selectionBackgroundTransparent=R(h.selectionBackground,E),A.selectionBackgroundOpaque=y.color.blend(A.background,A.selectionBackgroundTransparent),A.selectionInactiveBackgroundTransparent=R(h.selectionInactiveBackground,A.selectionBackgroundTransparent),A.selectionInactiveBackgroundOpaque=y.color.blend(A.background,A.selectionInactiveBackgroundTransparent),A.selectionForeground=h.selectionForeground?R(h.selectionForeground,y.NULL_COLOR):void 0,A.selectionForeground===y.NULL_COLOR&&(A.selectionForeground=void 0),y.color.isOpaque(A.selectionBackgroundTransparent)&&(A.selectionBackgroundTransparent=y.color.opacity(A.selectionBackgroundTransparent,.3)),y.color.isOpaque(A.selectionInactiveBackgroundTransparent)&&(A.selectionInactiveBackgroundTransparent=y.color.opacity(A.selectionInactiveBackgroundTransparent,.3)),A.ansi=n.DEFAULT_ANSI_COLORS.slice(),A.ansi[0]=R(h.black,n.DEFAULT_ANSI_COLORS[0]),A.ansi[1]=R(h.red,n.DEFAULT_ANSI_COLORS[1]),A.ansi[2]=R(h.green,n.DEFAULT_ANSI_COLORS[2]),A.ansi[3]=R(h.yellow,n.DEFAULT_ANSI_COLORS[3]),A.ansi[4]=R(h.blue,n.DEFAULT_ANSI_COLORS[4]),A.ansi[5]=R(h.magenta,n.DEFAULT_ANSI_COLORS[5]),A.ansi[6]=R(h.cyan,n.DEFAULT_ANSI_COLORS[6]),A.ansi[7]=R(h.white,n.DEFAULT_ANSI_COLORS[7]),A.ansi[8]=R(h.brightBlack,n.DEFAULT_ANSI_COLORS[8]),A.ansi[9]=R(h.brightRed,n.DEFAULT_ANSI_COLORS[9]),A.ansi[10]=R(h.brightGreen,n.DEFAULT_ANSI_COLORS[10]),A.ansi[11]=R(h.brightYellow,n.DEFAULT_ANSI_COLORS[11]),A.ansi[12]=R(h.brightBlue,n.DEFAULT_ANSI_COLORS[12]),A.ansi[13]=R(h.brightMagenta,n.DEFAULT_ANSI_COLORS[13]),A.ansi[14]=R(h.brightCyan,n.DEFAULT_ANSI_COLORS[14]),A.ansi[15]=R(h.brightWhite,n.DEFAULT_ANSI_COLORS[15]),h.extendedAnsi){const x=Math.min(A.ansi.length-16,h.extendedAnsi.length);for(let O=0;O<x;O++)A.ansi[O+16]=R(h.extendedAnsi[O],n.DEFAULT_ANSI_COLORS[O+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(h){this._restoreColor(h),this._onChangeColors.fire(this.colors)}_restoreColor(h){if(h!==void 0)switch(h){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[h]=this._restoreColors.ansi[h]}else for(let A=0;A<this._restoreColors.ansi.length;++A)this._colors.ansi[A]=this._restoreColors.ansi[A]}modifyColors(h){h(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function R(h,A){if(h!==void 0)try{return y.css.toColor(h)}catch{}return A}T=c([f(0,S.IOptionsService)],T),n.ThemeService=T},6349:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CircularList=void 0;const c=s(8460),f=s(844);class m extends f.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const b=new Array(C);for(let S=0;S<Math.min(C,this.length);S++)b[S]=this._array[this._getCyclicIndex(S)];this._array=b,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let b=this._length;b<C;b++)this._array[b]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,b){this._array[this._getCyclicIndex(C)]=b}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,b,...S){if(b){for(let u=C;u<this._length-b;u++)this._array[this._getCyclicIndex(u)]=this._array[this._getCyclicIndex(u+b)];this._length-=b,this.onDeleteEmitter.fire({index:C,amount:b})}for(let u=this._length-1;u>=C;u--)this._array[this._getCyclicIndex(u+S.length)]=this._array[this._getCyclicIndex(u)];for(let u=0;u<S.length;u++)this._array[this._getCyclicIndex(C+u)]=S[u];if(S.length&&this.onInsertEmitter.fire({index:C,amount:S.length}),this._length+S.length>this._maxLength){const u=this._length+S.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=S.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,b,S){if(!(b<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let _=b-1;_>=0;_--)this.set(C+_+S,this.get(C+_));const u=C+b+S-this._length;if(u>0)for(this._length+=u;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let u=0;u<b;u++)this.set(C+u+S,this.get(C+u))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}n.CircularList=m},1439:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clone=void 0,n.clone=function s(c,f=5){if(typeof c!="object")return c;const m=Array.isArray(c)?[]:{};for(const y in c)m[y]=f<=1?c[y]:c[y]&&s(c[y],f-1);return m}},8055:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const c=s(6114);let f=0,m=0,y=0,C=0;var b,S,u;function _(g){const E=g.toString(16);return E.length<2?"0"+E:E}function v(g,E){return g<E?(E+.05)/(g+.05):(g+.05)/(E+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(g){g.toCss=function(E,T,R,h){return h!==void 0?`#${_(E)}${_(T)}${_(R)}${_(h)}`:`#${_(E)}${_(T)}${_(R)}`},g.toRgba=function(E,T,R,h=255){return(E<<24|T<<16|R<<8|h)>>>0}}(b=n.channels||(n.channels={})),function(g){function E(T,R){return C=Math.round(255*R),[f,m,y]=u.toChannels(T.rgba),{css:b.toCss(f,m,y,C),rgba:b.toRgba(f,m,y,C)}}g.blend=function(T,R){if(C=(255&R.rgba)/255,C===1)return{css:R.css,rgba:R.rgba};const h=R.rgba>>24&255,A=R.rgba>>16&255,x=R.rgba>>8&255,O=T.rgba>>24&255,H=T.rgba>>16&255,N=T.rgba>>8&255;return f=O+Math.round((h-O)*C),m=H+Math.round((A-H)*C),y=N+Math.round((x-N)*C),{css:b.toCss(f,m,y),rgba:b.toRgba(f,m,y)}},g.isOpaque=function(T){return(255&T.rgba)==255},g.ensureContrastRatio=function(T,R,h){const A=u.ensureContrastRatio(T.rgba,R.rgba,h);if(A)return u.toColor(A>>24&255,A>>16&255,A>>8&255)},g.opaque=function(T){const R=(255|T.rgba)>>>0;return[f,m,y]=u.toChannels(R),{css:b.toCss(f,m,y),rgba:R}},g.opacity=E,g.multiplyOpacity=function(T,R){return C=255&T.rgba,E(T,C*R/255)},g.toColorRGB=function(T){return[T.rgba>>24&255,T.rgba>>16&255,T.rgba>>8&255]}}(n.color||(n.color={})),function(g){let E,T;if(!c.isNode){const R=document.createElement("canvas");R.width=1,R.height=1;const h=R.getContext("2d",{willReadFrequently:!0});h&&(E=h,E.globalCompositeOperation="copy",T=E.createLinearGradient(0,0,1,1))}g.toColor=function(R){if(R.match(/#[\da-f]{3,8}/i))switch(R.length){case 4:return f=parseInt(R.slice(1,2).repeat(2),16),m=parseInt(R.slice(2,3).repeat(2),16),y=parseInt(R.slice(3,4).repeat(2),16),u.toColor(f,m,y);case 5:return f=parseInt(R.slice(1,2).repeat(2),16),m=parseInt(R.slice(2,3).repeat(2),16),y=parseInt(R.slice(3,4).repeat(2),16),C=parseInt(R.slice(4,5).repeat(2),16),u.toColor(f,m,y,C);case 7:return{css:R,rgba:(parseInt(R.slice(1),16)<<8|255)>>>0};case 9:return{css:R,rgba:parseInt(R.slice(1),16)>>>0}}const h=R.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(h)return f=parseInt(h[1]),m=parseInt(h[2]),y=parseInt(h[3]),C=Math.round(255*(h[5]===void 0?1:parseFloat(h[5]))),u.toColor(f,m,y,C);if(!E||!T)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=T,E.fillStyle=R,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[f,m,y,C]=E.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:b.toRgba(f,m,y,C),css:R}}}(n.css||(n.css={})),function(g){function E(T,R,h){const A=T/255,x=R/255,O=h/255;return .2126*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))}g.relativeLuminance=function(T){return E(T>>16&255,T>>8&255,255&T)},g.relativeLuminance2=E}(S=n.rgb||(n.rgb={})),function(g){function E(R,h,A){const x=R>>24&255,O=R>>16&255,H=R>>8&255;let N=h>>24&255,B=h>>16&255,ee=h>>8&255,ue=v(S.relativeLuminance2(N,B,ee),S.relativeLuminance2(x,O,H));for(;ue<A&&(N>0||B>0||ee>0);)N-=Math.max(0,Math.ceil(.1*N)),B-=Math.max(0,Math.ceil(.1*B)),ee-=Math.max(0,Math.ceil(.1*ee)),ue=v(S.relativeLuminance2(N,B,ee),S.relativeLuminance2(x,O,H));return(N<<24|B<<16|ee<<8|255)>>>0}function T(R,h,A){const x=R>>24&255,O=R>>16&255,H=R>>8&255;let N=h>>24&255,B=h>>16&255,ee=h>>8&255,ue=v(S.relativeLuminance2(N,B,ee),S.relativeLuminance2(x,O,H));for(;ue<A&&(N<255||B<255||ee<255);)N=Math.min(255,N+Math.ceil(.1*(255-N))),B=Math.min(255,B+Math.ceil(.1*(255-B))),ee=Math.min(255,ee+Math.ceil(.1*(255-ee))),ue=v(S.relativeLuminance2(N,B,ee),S.relativeLuminance2(x,O,H));return(N<<24|B<<16|ee<<8|255)>>>0}g.ensureContrastRatio=function(R,h,A){const x=S.relativeLuminance(R>>8),O=S.relativeLuminance(h>>8);if(v(x,O)<A){if(O<x){const B=E(R,h,A),ee=v(x,S.relativeLuminance(B>>8));if(ee<A){const ue=T(R,h,A);return ee>v(x,S.relativeLuminance(ue>>8))?B:ue}return B}const H=T(R,h,A),N=v(x,S.relativeLuminance(H>>8));if(N<A){const B=E(R,h,A);return N>v(x,S.relativeLuminance(B>>8))?H:B}return H}},g.reduceLuminance=E,g.increaseLuminance=T,g.toChannels=function(R){return[R>>24&255,R>>16&255,R>>8&255,255&R]},g.toColor=function(R,h,A,x){return{css:b.toCss(R,h,A,x),rgba:b.toRgba(R,h,A,x)}}}(u=n.rgba||(n.rgba={})),n.toPaddedHex=_,n.contrastRatio=v},8969:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreTerminal=void 0;const c=s(844),f=s(2585),m=s(4348),y=s(7866),C=s(744),b=s(7302),S=s(6975),u=s(8460),_=s(1753),v=s(1480),g=s(7994),E=s(9282),T=s(5435),R=s(5981),h=s(2660);let A=!1;class x extends c.Disposable{constructor(H){super(),this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new u.EventEmitter),this._instantiationService=new m.InstantiationService,this.optionsService=this.register(new b.OptionsService(H)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(y.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(g.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(h.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new T.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,u.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,u.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,u.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,u.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(N=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(N=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new R.WriteBuffer((N,B)=>this._inputHandler.parse(N,B))),this.register((0,u.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,c.toDisposable)(()=>{var N;(N=this._windowsWrappingHeuristics)===null||N===void 0||N.dispose(),this._windowsWrappingHeuristics=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new u.EventEmitter),this._onScroll.event(H=>{var N;(N=this._onScrollApi)===null||N===void 0||N.fire(H.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(H){for(const N in H)this.optionsService.options[N]=H[N]}write(H,N){this._writeBuffer.write(H,N)}writeSync(H,N){this._logService.logLevel<=f.LogLevelEnum.WARN&&!A&&(this._logService.warn("writeSync is unreliable and will be removed soon."),A=!0),this._writeBuffer.writeSync(H,N)}resize(H,N){isNaN(H)||isNaN(N)||(H=Math.max(H,C.MINIMUM_COLS),N=Math.max(N,C.MINIMUM_ROWS),this._bufferService.resize(H,N))}scroll(H,N=!1){this._bufferService.scroll(H,N)}scrollLines(H,N,B){this._bufferService.scrollLines(H,N,B)}scrollPages(H){this._bufferService.scrollPages(H)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(H){this._bufferService.scrollToLine(H)}registerEscHandler(H,N){return this._inputHandler.registerEscHandler(H,N)}registerDcsHandler(H,N){return this._inputHandler.registerDcsHandler(H,N)}registerCsiHandler(H,N){return this._inputHandler.registerCsiHandler(H,N)}registerOscHandler(H,N){return this._inputHandler.registerOscHandler(H,N)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){var H;let N=!1;const B=this.optionsService.rawOptions.windowsPty;B&&B.buildNumber!==void 0&&B.buildNumber!==void 0?N=B.backend==="conpty"&&B.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(N=!0),N?this._enableWindowsWrappingHeuristics():((H=this._windowsWrappingHeuristics)===null||H===void 0||H.dispose(),this._windowsWrappingHeuristics=void 0)}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics){const H=[];H.push(this.onLineFeed(E.updateWindowsModeWrappedState.bind(null,this._bufferService))),H.push(this.registerCsiHandler({final:"H"},()=>((0,E.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics=(0,c.toDisposable)(()=>{for(const N of H)N.dispose()})}}}n.CoreTerminal=x},8460:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=s=>(this._listeners.push(s),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===s)return void this._listeners.splice(c,1)}}})),this._event}fire(s,c){const f=[];for(let m=0;m<this._listeners.length;m++)f.push(this._listeners[m]);for(let m=0;m<f.length;m++)f[m].call(void 0,s,c)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},n.forwardEvent=function(s,c){return s(f=>c.fire(f))}},5435:function(p,n,s){var c=this&&this.__decorate||function(se,M,F,j){var q,te=arguments.length,ge=te<3?M:j===null?j=Object.getOwnPropertyDescriptor(M,F):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(se,M,F,j);else for(var me=se.length-1;me>=0;me--)(q=se[me])&&(ge=(te<3?q(ge):te>3?q(M,F,ge):q(M,F))||ge);return te>3&&ge&&Object.defineProperty(M,F,ge),ge},f=this&&this.__param||function(se,M){return function(F,j){M(F,j,se)}};Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=n.WindowsOptionsReportType=void 0;const m=s(2584),y=s(7116),C=s(2015),b=s(844),S=s(482),u=s(8437),_=s(8460),v=s(643),g=s(511),E=s(3734),T=s(2585),R=s(6242),h=s(6351),A=s(5941),x={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function H(se,M){if(se>24)return M.setWinLines||!1;switch(se){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var N;(function(se){se[se.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",se[se.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(N=n.WindowsOptionsReportType||(n.WindowsOptionsReportType={}));let B=0;class ee extends b.Disposable{constructor(M,F,j,q,te,ge,me,oe,pe=new C.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=F,this._coreService=j,this._logService=q,this._optionsService=te,this._oscLinkService=ge,this._coreMouseService=me,this._unicodeService=oe,this._parser=pe,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new g.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ue(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(z=>this._activeBuffer=z.activeBuffer)),this._parser.setCsiHandlerFallback((z,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(z),params:W.toArray()})}),this._parser.setEscHandlerFallback(z=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(z)})}),this._parser.setExecuteHandlerFallback(z=>{this._logService.debug("Unknown EXECUTE code: ",{code:z})}),this._parser.setOscHandlerFallback((z,W,Y)=>{this._logService.debug("Unknown OSC code: ",{identifier:z,action:W,data:Y})}),this._parser.setDcsHandlerFallback((z,W,Y)=>{W==="HOOK"&&(Y=Y.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(z),action:W,payload:Y})}),this._parser.setPrintHandler((z,W,Y)=>this.print(z,W,Y)),this._parser.registerCsiHandler({final:"@"},z=>this.insertChars(z)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},z=>this.scrollLeft(z)),this._parser.registerCsiHandler({final:"A"},z=>this.cursorUp(z)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},z=>this.scrollRight(z)),this._parser.registerCsiHandler({final:"B"},z=>this.cursorDown(z)),this._parser.registerCsiHandler({final:"C"},z=>this.cursorForward(z)),this._parser.registerCsiHandler({final:"D"},z=>this.cursorBackward(z)),this._parser.registerCsiHandler({final:"E"},z=>this.cursorNextLine(z)),this._parser.registerCsiHandler({final:"F"},z=>this.cursorPrecedingLine(z)),this._parser.registerCsiHandler({final:"G"},z=>this.cursorCharAbsolute(z)),this._parser.registerCsiHandler({final:"H"},z=>this.cursorPosition(z)),this._parser.registerCsiHandler({final:"I"},z=>this.cursorForwardTab(z)),this._parser.registerCsiHandler({final:"J"},z=>this.eraseInDisplay(z,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},z=>this.eraseInDisplay(z,!0)),this._parser.registerCsiHandler({final:"K"},z=>this.eraseInLine(z,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},z=>this.eraseInLine(z,!0)),this._parser.registerCsiHandler({final:"L"},z=>this.insertLines(z)),this._parser.registerCsiHandler({final:"M"},z=>this.deleteLines(z)),this._parser.registerCsiHandler({final:"P"},z=>this.deleteChars(z)),this._parser.registerCsiHandler({final:"S"},z=>this.scrollUp(z)),this._parser.registerCsiHandler({final:"T"},z=>this.scrollDown(z)),this._parser.registerCsiHandler({final:"X"},z=>this.eraseChars(z)),this._parser.registerCsiHandler({final:"Z"},z=>this.cursorBackwardTab(z)),this._parser.registerCsiHandler({final:"`"},z=>this.charPosAbsolute(z)),this._parser.registerCsiHandler({final:"a"},z=>this.hPositionRelative(z)),this._parser.registerCsiHandler({final:"b"},z=>this.repeatPrecedingCharacter(z)),this._parser.registerCsiHandler({final:"c"},z=>this.sendDeviceAttributesPrimary(z)),this._parser.registerCsiHandler({prefix:">",final:"c"},z=>this.sendDeviceAttributesSecondary(z)),this._parser.registerCsiHandler({final:"d"},z=>this.linePosAbsolute(z)),this._parser.registerCsiHandler({final:"e"},z=>this.vPositionRelative(z)),this._parser.registerCsiHandler({final:"f"},z=>this.hVPosition(z)),this._parser.registerCsiHandler({final:"g"},z=>this.tabClear(z)),this._parser.registerCsiHandler({final:"h"},z=>this.setMode(z)),this._parser.registerCsiHandler({prefix:"?",final:"h"},z=>this.setModePrivate(z)),this._parser.registerCsiHandler({final:"l"},z=>this.resetMode(z)),this._parser.registerCsiHandler({prefix:"?",final:"l"},z=>this.resetModePrivate(z)),this._parser.registerCsiHandler({final:"m"},z=>this.charAttributes(z)),this._parser.registerCsiHandler({final:"n"},z=>this.deviceStatus(z)),this._parser.registerCsiHandler({prefix:"?",final:"n"},z=>this.deviceStatusPrivate(z)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},z=>this.softReset(z)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},z=>this.setCursorStyle(z)),this._parser.registerCsiHandler({final:"r"},z=>this.setScrollRegion(z)),this._parser.registerCsiHandler({final:"s"},z=>this.saveCursor(z)),this._parser.registerCsiHandler({final:"t"},z=>this.windowOptions(z)),this._parser.registerCsiHandler({final:"u"},z=>this.restoreCursor(z)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},z=>this.insertColumns(z)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},z=>this.deleteColumns(z)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},z=>this.selectProtected(z)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},z=>this.requestMode(z,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},z=>this.requestMode(z,!1)),this._parser.setExecuteHandler(m.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(m.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(m.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(m.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(m.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(m.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(m.C1.IND,()=>this.index()),this._parser.setExecuteHandler(m.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(m.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new R.OscHandler(z=>(this.setTitle(z),this.setIconName(z),!0))),this._parser.registerOscHandler(1,new R.OscHandler(z=>this.setIconName(z))),this._parser.registerOscHandler(2,new R.OscHandler(z=>this.setTitle(z))),this._parser.registerOscHandler(4,new R.OscHandler(z=>this.setOrReportIndexedColor(z))),this._parser.registerOscHandler(8,new R.OscHandler(z=>this.setHyperlink(z))),this._parser.registerOscHandler(10,new R.OscHandler(z=>this.setOrReportFgColor(z))),this._parser.registerOscHandler(11,new R.OscHandler(z=>this.setOrReportBgColor(z))),this._parser.registerOscHandler(12,new R.OscHandler(z=>this.setOrReportCursorColor(z))),this._parser.registerOscHandler(104,new R.OscHandler(z=>this.restoreIndexedColor(z))),this._parser.registerOscHandler(110,new R.OscHandler(z=>this.restoreFgColor(z))),this._parser.registerOscHandler(111,new R.OscHandler(z=>this.restoreBgColor(z))),this._parser.registerOscHandler(112,new R.OscHandler(z=>this.restoreCursorColor(z))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const z in y.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:z},()=>this.selectCharset("("+z)),this._parser.registerEscHandler({intermediates:")",final:z},()=>this.selectCharset(")"+z)),this._parser.registerEscHandler({intermediates:"*",final:z},()=>this.selectCharset("*"+z)),this._parser.registerEscHandler({intermediates:"+",final:z},()=>this.selectCharset("+"+z)),this._parser.registerEscHandler({intermediates:"-",final:z},()=>this.selectCharset("-"+z)),this._parser.registerEscHandler({intermediates:".",final:z},()=>this.selectCharset("."+z)),this._parser.registerEscHandler({intermediates:"/",final:z},()=>this.selectCharset("/"+z));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(z=>(this._logService.error("Parsing error: ",z),z)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new h.DcsHandler((z,W)=>this.requestStatusString(z,W)))}getAttrData(){return this._curAttrData}_preserveStack(M,F,j,q){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=j,this._parseStack.position=q}_logSlowResolvingAsync(M){this._logService.logLevel<=T.LogLevelEnum.WARN&&Promise.race([M,new Promise((F,j)=>setTimeout(()=>j("#SLOW_TIMEOUT"),5e3))]).catch(F=>{if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,F){let j,q=this._activeBuffer.x,te=this._activeBuffer.y,ge=0;const me=this._parseStack.paused;if(me){if(j=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(j),j;q=this._parseStack.cursorStartX,te=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>O&&(ge=this._parseStack.position+O)}if(this._logService.logLevel<=T.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,oe=>String.fromCharCode(oe)).join("")}"`),typeof M=="string"?M.split("").map(oe=>oe.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(M.length,O))),me||this._dirtyRowTracker.clearRange(),M.length>O)for(let oe=ge;oe<M.length;oe+=O){const pe=oe+O<M.length?oe+O:M.length,z=typeof M=="string"?this._stringDecoder.decode(M.substring(oe,pe),this._parseBuffer):this._utf8Decoder.decode(M.subarray(oe,pe),this._parseBuffer);if(j=this._parser.parse(this._parseBuffer,z))return this._preserveStack(q,te,z,oe),this._logSlowResolvingAsync(j),j}else if(!me){const oe=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(j=this._parser.parse(this._parseBuffer,oe))return this._preserveStack(q,te,oe,0),this._logSlowResolvingAsync(j),j}this._activeBuffer.x===q&&this._activeBuffer.y===te||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(M,F,j){let q,te;const ge=this._charsetService.charset,me=this._optionsService.rawOptions.screenReaderMode,oe=this._bufferService.cols,pe=this._coreService.decPrivateModes.wraparound,z=this._coreService.modes.insertMode,W=this._curAttrData;let Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&j-F>0&&Y.getWidth(this._activeBuffer.x-1)===2&&Y.setCellFromCodePoint(this._activeBuffer.x-1,0,1,W.fg,W.bg,W.extended);for(let re=F;re<j;++re){if(q=M[re],te=this._unicodeService.wcwidth(q),q<127&&ge){const ae=ge[String.fromCharCode(q)];ae&&(q=ae.charCodeAt(0))}if(me&&this._onA11yChar.fire((0,S.stringFromCodePoint)(q)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),te||!this._activeBuffer.x){if(this._activeBuffer.x+te-1>=oe){if(pe){for(;this._activeBuffer.x<oe;)Y.setCellFromCodePoint(this._activeBuffer.x++,0,1,W.fg,W.bg,W.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=oe-1,te===2)continue}if(z&&(Y.insertCells(this._activeBuffer.x,te,this._activeBuffer.getNullCell(W),W),Y.getWidth(oe-1)===2&&Y.setCellFromCodePoint(oe-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,W.fg,W.bg,W.extended)),Y.setCellFromCodePoint(this._activeBuffer.x++,q,te,W.fg,W.bg,W.extended),te>0)for(;--te;)Y.setCellFromCodePoint(this._activeBuffer.x++,0,0,W.fg,W.bg,W.extended)}else Y.getWidth(this._activeBuffer.x-1)?Y.addCodepointToCell(this._activeBuffer.x-1,q):Y.addCodepointToCell(this._activeBuffer.x-2,q)}j-F>0&&(Y.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<oe&&j-F>0&&Y.getWidth(this._activeBuffer.x)===0&&!Y.hasContent(this._activeBuffer.x)&&Y.setCellFromCodePoint(this._activeBuffer.x,0,1,W.fg,W.bg,W.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,F){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,F):this._parser.registerCsiHandler(M,j=>!H(j.params[0],this._optionsService.rawOptions.windowOptions)||F(j))}registerDcsHandler(M,F){return this._parser.registerDcsHandler(M,new h.DcsHandler(F))}registerEscHandler(M,F){return this._parser.registerEscHandler(M,F)}registerOscHandler(M,F){return this._parser.registerOscHandler(M,new R.OscHandler(F))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||M===void 0)&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,F){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=M,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+F)}cursorUp(M){const F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const F=M.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=M.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=M.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const F=M.params[0];return F===1&&(this._curAttrData.bg|=536870912),F!==2&&F!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,F,j,q=!1,te=!1){const ge=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);ge.replaceCells(F,j,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),te),q&&(ge.isWrapped=!1)}_resetBufferLine(M,F=!1){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);j&&(j.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),F),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),j.isWrapped=!1)}eraseInDisplay(M,F=!1){let j;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(j=this._activeBuffer.y,this._dirtyRowTracker.markDirty(j),this._eraseInBufferLine(j++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);j<this._bufferService.rows;j++)this._resetBufferLine(j,F);this._dirtyRowTracker.markDirty(j);break;case 1:for(j=this._activeBuffer.y,this._dirtyRowTracker.markDirty(j),this._eraseInBufferLine(j,0,this._activeBuffer.x+1,!0,F),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(j+1).isWrapped=!1);j--;)this._resetBufferLine(j,F);this._dirtyRowTracker.markDirty(0);break;case 2:for(j=this._bufferService.rows,this._dirtyRowTracker.markDirty(j-1);j--;)this._resetBufferLine(j,F);this._dirtyRowTracker.markDirty(0);break;case 3:const q=this._activeBuffer.lines.length-this._bufferService.rows;q>0&&(this._activeBuffer.lines.trimStart(q),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-q,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-q,0),this._onScroll.fire(0))}return!0}eraseInLine(M,F=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,F);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,F)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let F=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const j=this._activeBuffer.ybase+this._activeBuffer.y,q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,te=this._bufferService.rows-1+this._activeBuffer.ybase-q+1;for(;F--;)this._activeBuffer.lines.splice(te-1,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let F=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const j=this._activeBuffer.ybase+this._activeBuffer.y;let q;for(q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-q;F--;)this._activeBuffer.lines.splice(j,1),this._activeBuffer.lines.splice(q,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let F=M.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let F=M.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(u.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);q.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);q.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);q.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);q.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){if(!this._parser.precedingCodepoint)return!0;const F=M.params[0]||1,j=new Uint32Array(F);for(let q=0;q<F;++q)j[q]=this._parser.precedingCodepoint;return this.print(j,0,j.length),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(m.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(m.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(m.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(m.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(m.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,F){const j=this._coreService.decPrivateModes,{activeProtocol:q,activeEncoding:te}=this._coreMouseService,ge=this._coreService,{buffers:me,cols:oe}=this._bufferService,{active:pe,alt:z}=me,W=this._optionsService.rawOptions,Y=de=>de?1:2,re=M.params[0];return ae=re,Pe=F?re===2?4:re===4?Y(ge.modes.insertMode):re===12?3:re===20?Y(W.convertEol):0:re===1?Y(j.applicationCursorKeys):re===3?W.windowOptions.setWinLines?oe===80?2:oe===132?1:0:0:re===6?Y(j.origin):re===7?Y(j.wraparound):re===8?3:re===9?Y(q==="X10"):re===12?Y(W.cursorBlink):re===25?Y(!ge.isCursorHidden):re===45?Y(j.reverseWraparound):re===66?Y(j.applicationKeypad):re===67?4:re===1e3?Y(q==="VT200"):re===1002?Y(q==="DRAG"):re===1003?Y(q==="ANY"):re===1004?Y(j.sendFocus):re===1005?4:re===1006?Y(te==="SGR"):re===1015?4:re===1016?Y(te==="SGR_PIXELS"):re===1048?1:re===47||re===1047||re===1049?Y(pe===z):re===2004?Y(j.bracketedPasteMode):0,ge.triggerDataEvent(`${m.C0.ESC}[${F?"":"?"}${ae};${Pe}$y`),!0;var ae,Pe}_updateAttrColor(M,F,j,q,te){return F===2?(M|=50331648,M&=-16777216,M|=E.AttributeData.fromColorRGB([j,q,te])):F===5&&(M&=-50331904,M|=33554432|255&j),M}_extractColor(M,F,j){const q=[0,0,-1,0,0,0];let te=0,ge=0;do{if(q[ge+te]=M.params[F+ge],M.hasSubParams(F+ge)){const me=M.getSubParams(F+ge);let oe=0;do q[1]===5&&(te=1),q[ge+oe+1+te]=me[oe];while(++oe<me.length&&oe+ge+1+te<q.length);break}if(q[1]===5&&ge+te>=2||q[1]===2&&ge+te>=5)break;q[1]&&(te=1)}while(++ge+F<M.length&&ge+te<q.length);for(let me=2;me<q.length;++me)q[me]===-1&&(q[me]=0);switch(q[0]){case 38:j.fg=this._updateAttrColor(j.fg,q[1],q[3],q[4],q[5]);break;case 48:j.bg=this._updateAttrColor(j.bg,q[1],q[3],q[4],q[5]);break;case 58:j.extended=j.extended.clone(),j.extended.underlineColor=this._updateAttrColor(j.extended.underlineColor,q[1],q[3],q[4],q[5])}return ge}_processUnderline(M,F){F.extended=F.extended.clone(),(!~M||M>5)&&(M=1),F.extended.underlineStyle=M,F.fg|=268435456,M===0&&(F.fg&=-268435457),F.updateExtended()}_processSGR0(M){M.fg=u.DEFAULT_ATTR_DATA.fg,M.bg=u.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const F=M.length;let j;const q=this._curAttrData;for(let te=0;te<F;te++)j=M.params[te],j>=30&&j<=37?(q.fg&=-50331904,q.fg|=16777216|j-30):j>=40&&j<=47?(q.bg&=-50331904,q.bg|=16777216|j-40):j>=90&&j<=97?(q.fg&=-50331904,q.fg|=16777224|j-90):j>=100&&j<=107?(q.bg&=-50331904,q.bg|=16777224|j-100):j===0?this._processSGR0(q):j===1?q.fg|=134217728:j===3?q.bg|=67108864:j===4?(q.fg|=268435456,this._processUnderline(M.hasSubParams(te)?M.getSubParams(te)[0]:1,q)):j===5?q.fg|=536870912:j===7?q.fg|=67108864:j===8?q.fg|=1073741824:j===9?q.fg|=2147483648:j===2?q.bg|=134217728:j===21?this._processUnderline(2,q):j===22?(q.fg&=-134217729,q.bg&=-134217729):j===23?q.bg&=-67108865:j===24?(q.fg&=-268435457,this._processUnderline(0,q)):j===25?q.fg&=-536870913:j===27?q.fg&=-67108865:j===28?q.fg&=-1073741825:j===29?q.fg&=2147483647:j===39?(q.fg&=-67108864,q.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):j===49?(q.bg&=-67108864,q.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):j===38||j===48||j===58?te+=this._extractColor(M,te,q):j===53?q.bg|=1073741824:j===55?q.bg&=-1073741825:j===59?(q.extended=q.extended.clone(),q.extended.underlineColor=-1,q.updateExtended()):j===100?(q.fg&=-67108864,q.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,q.bg&=-67108864,q.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",j);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${m.C0.ESC}[0n`);break;case 6:const F=this._activeBuffer.y+1,j=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${m.C0.ESC}[${F};${j}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const F=this._activeBuffer.y+1,j=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${m.C0.ESC}[?${F};${j}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const F=M.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const j=F%2==1;return this._optionsService.options.cursorBlink=j,!0}setScrollRegion(M){const F=M.params[0]||1;let j;return(M.length<2||(j=M.params[1])>this._bufferService.rows||j===0)&&(j=this._bufferService.rows),j>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=j-1,this._setCursor(0,0)),!0}windowOptions(M){if(!H(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const F=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(N.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(N.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${m.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const F=[],j=M.split(";");for(;j.length>1;){const q=j.shift(),te=j.shift();if(/^\d+$/.exec(q)){const ge=parseInt(q);if(0<=ge&&ge<256)if(te==="?")F.push({type:0,index:ge});else{const me=(0,A.parseColor)(te);me&&F.push({type:1,index:ge,color:me})}}}return F.length&&this._onColor.fire(F),!0}setHyperlink(M){const F=M.split(";");return!(F.length<2)&&(F[1]?this._createHyperlink(F[0],F[1]):!F[0]&&this._finishHyperlink())}_createHyperlink(M,F){this._getCurrentLinkId()&&this._finishHyperlink();const j=M.split(":");let q;const te=j.findIndex(ge=>ge.startsWith("id="));return te!==-1&&(q=j[te].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:q,uri:F}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,F){const j=M.split(";");for(let q=0;q<j.length&&!(F>=this._specialColors.length);++q,++F)if(j[q]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{const te=(0,A.parseColor)(j[q]);te&&this._onColor.fire([{type:1,index:this._specialColors[F],color:te}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const F=[],j=M.split(";");for(let q=0;q<j.length;++q)if(/^\d+$/.exec(j[q])){const te=parseInt(j[q]);0<=te&&te<256&&F.push({type:2,index:te})}return F.length&&this._onColor.fire(F),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(x[M[0]],y.CHARSETS[M[1]]||y.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new g.CellData;M.content=4194304|"E".charCodeAt(0),M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let F=0;F<this._bufferService.rows;++F){const j=this._activeBuffer.ybase+this._activeBuffer.y+F,q=this._activeBuffer.lines.get(j);q&&(q.fill(M),q.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,F){const j=this._bufferService.buffer,q=this._optionsService.rawOptions;return(te=>(this._coreService.triggerDataEvent(`${m.C0.ESC}${te}${m.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${j.scrollTop+1};${j.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[q.cursorStyle]-(q.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,F){this._dirtyRowTracker.markRangeDirty(M,F)}}n.InputHandler=ee;let ue=class{constructor(se){this._bufferService=se,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(se){se<this.start?this.start=se:se>this.end&&(this.end=se)}markRangeDirty(se,M){se>M&&(B=se,se=M,M=B),se<this.start&&(this.start=se),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};ue=c([f(0,T.IBufferService)],ue)},844:(p,n)=>{function s(c){for(const f of c)f.dispose();c.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},n.toDisposable=function(c){return{dispose:c}},n.disposeArray=s,n.getDisposeArrayDisposable=function(c){return{dispose:()=>s(c)}}},1505:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class s{constructor(){this._data={}}set(f,m,y){this._data[f]||(this._data[f]={}),this._data[f][m]=y}get(f,m){return this._data[f]?this._data[f][m]:void 0}clear(){this._data={}}}n.TwoKeyMap=s,n.FourKeyMap=class{constructor(){this._data=new s}set(c,f,m,y,C){this._data.get(c,f)||this._data.set(c,f,new s),this._data.get(c,f).set(m,y,C)}get(c,f,m,y){var C;return(C=this._data.get(c,f))===null||C===void 0?void 0:C.get(m,y)}clear(){this._data.clear()}}},6114:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const s=n.isNode?"node":navigator.userAgent,c=n.isNode?"node":navigator.platform;n.isFirefox=s.includes("Firefox"),n.isLegacyEdge=s.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(s),n.getSafariVersion=function(){if(!n.isSafari)return 0;const f=s.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),n.isIpad=c==="iPad",n.isIphone=c==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),n.isLinux=c.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(s)},6106:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SortedList=void 0;let s=0;n.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(s=this._search(this._getKey(c),0,this._array.length-1),this._array.splice(s,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const f=this._getKey(c);if(f===void 0||(s=this._search(f,0,this._array.length-1),s===-1)||this._getKey(this._array[s])!==f)return!1;do if(this._array[s]===c)return this._array.splice(s,1),!0;while(++s<this._array.length&&this._getKey(this._array[s])===f);return!1}*getKeyIterator(c){if(this._array.length!==0&&(s=this._search(c,0,this._array.length-1),!(s<0||s>=this._array.length)&&this._getKey(this._array[s])===c))do yield this._array[s];while(++s<this._array.length&&this._getKey(this._array[s])===c)}forEachByKey(c,f){if(this._array.length!==0&&(s=this._search(c,0,this._array.length-1),!(s<0||s>=this._array.length)&&this._getKey(this._array[s])===c))do f(this._array[s]);while(++s<this._array.length&&this._getKey(this._array[s])===c)}values(){return this._array.values()}_search(c,f,m){if(m<f)return f;let y=Math.floor((f+m)/2);const C=this._getKey(this._array[y]);if(C>c)return this._search(c,f,y-1);if(C<c)return this._search(c,y+1,m);for(;y>0&&this._getKey(this._array[y-1])===c;)y--;return y}}},7226:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const c=s(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let b=0,S=0,u=C.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),S=Math.max(b,S),_=C.timeRemaining(),1.5*S>_)return u-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(u-b))}ms`),void this._start();u=_}this.clear()}}class m extends f{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const b=Date.now()+C;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}n.PriorityTaskQueue=m,n.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(y){return requestIdleCallback(y)}_cancelCallback(y){cancelIdleCallback(y)}}:m,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(y){this._queue.clear(),this._queue.enqueue(y)}flush(){this._queue.flush()}}},9282:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.updateWindowsModeWrappedState=void 0;const c=s(643);n.updateWindowsModeWrappedState=function(f){const m=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),y=m==null?void 0:m.get(f.cols-1),C=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);C&&y&&(C.isWrapped=y[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&y[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class s{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(m){return[m>>>16&255,m>>>8&255,255&m]}static fromColorRGB(m){return(255&m[0])<<16|(255&m[1])<<8|255&m[2]}clone(){const m=new s;return m.fg=this.fg,m.bg=this.bg,m.extended=this.extended.clone(),m}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=s;class c{constructor(m=0,y=0){this._ext=0,this._urlId=0,this._ext=m,this._urlId=y}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(m){this._ext=m}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(m){this._ext&=-469762049,this._ext|=m<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(m){this._ext&=-67108864,this._ext|=67108863&m}get urlId(){return this._urlId}set urlId(m){this._urlId=m}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=c},9092:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.MAX_BUFFER_SIZE=void 0;const c=s(6349),f=s(8437),m=s(511),y=s(643),C=s(4634),b=s(4863),S=s(7116),u=s(3734),_=s(7226);n.MAX_BUFFER_SIZE=4294967295,n.Buffer=class{constructor(v,g,E){this._hasScrollback=v,this._optionsService=g,this._bufferService=E,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=S.DEFAULT_CHARSET,this.markers=[],this._nullCell=m.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=m.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,g){return new f.BufferLine(this._bufferService.cols,this.getNullCell(v),g)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;const g=v+this._optionsService.rawOptions.scrollback;return g>n.MAX_BUFFER_SIZE?n.MAX_BUFFER_SIZE:g}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=f.DEFAULT_ATTR_DATA);let g=this._rows;for(;g--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,g){const E=this.getNullCell(f.DEFAULT_ATTR_DATA);let T=0;const R=this._getCorrectBufferLength(g);if(R>this.lines.maxLength&&(this.lines.maxLength=R),this.lines.length>0){if(this._cols<v)for(let A=0;A<this.lines.length;A++)T+=+this.lines.get(A).resize(v,E);let h=0;if(this._rows<g)for(let A=this._rows;A<g;A++)this.lines.length<g+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new f.BufferLine(v,E)):this.ybase>0&&this.lines.length<=this.ybase+this.y+h+1?(this.ybase--,h++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(v,E)));else for(let A=this._rows;A>g;A--)this.lines.length>g+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(R<this.lines.maxLength){const A=this.lines.length-R;A>0&&(this.lines.trimStart(A),this.ybase=Math.max(this.ybase-A,0),this.ydisp=Math.max(this.ydisp-A,0),this.savedY=Math.max(this.savedY-A,0)),this.lines.maxLength=R}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,g-1),h&&(this.y+=h),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=g-1,this._isReflowEnabled&&(this._reflow(v,g),this._cols>v))for(let h=0;h<this.lines.length;h++)T+=+this.lines.get(h).resize(v,E);this._cols=v,this._rows=g,this._memoryCleanupQueue.clear(),T>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let g=0;for(;this._memoryCleanupPosition<this.lines.length;)if(g+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),g>100)return!0;return v}get _isReflowEnabled(){const v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,g){this._cols!==v&&(v>this._cols?this._reflowLarger(v,g):this._reflowSmaller(v,g))}_reflowLarger(v,g){const E=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(E.length>0){const T=(0,C.reflowLargerCreateNewLayout)(this.lines,E);(0,C.reflowLargerApplyNewLayout)(this.lines,T.layout),this._reflowLargerAdjustViewport(v,g,T.countRemoved)}}_reflowLargerAdjustViewport(v,g,E){const T=this.getNullCell(f.DEFAULT_ATTR_DATA);let R=E;for(;R-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<g&&this.lines.push(new f.BufferLine(v,T))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-E,0)}_reflowSmaller(v,g){const E=this.getNullCell(f.DEFAULT_ATTR_DATA),T=[];let R=0;for(let h=this.lines.length-1;h>=0;h--){let A=this.lines.get(h);if(!A||!A.isWrapped&&A.getTrimmedLength()<=v)continue;const x=[A];for(;A.isWrapped&&h>0;)A=this.lines.get(--h),x.unshift(A);const O=this.ybase+this.y;if(O>=h&&O<h+x.length)continue;const H=x[x.length-1].getTrimmedLength(),N=(0,C.reflowSmallerGetNewLineLengths)(x,this._cols,v),B=N.length-x.length;let ee;ee=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);const ue=[];for(let te=0;te<B;te++){const ge=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);ue.push(ge)}ue.length>0&&(T.push({start:h+x.length+R,newLines:ue}),R+=ue.length),x.push(...ue);let se=N.length-1,M=N[se];M===0&&(se--,M=N[se]);let F=x.length-B-1,j=H;for(;F>=0;){const te=Math.min(j,M);if(x[se]===void 0)break;if(x[se].copyCellsFrom(x[F],j-te,M-te,te,!0),M-=te,M===0&&(se--,M=N[se]),j-=te,j===0){F--;const ge=Math.max(F,0);j=(0,C.getWrappedLineTrimmedLength)(x,ge,this._cols)}}for(let te=0;te<x.length;te++)N[te]<v&&x[te].setCell(N[te],E);let q=B-ee;for(;q-- >0;)this.ybase===0?this.y<g-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+R)-g&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+g-1)}if(T.length>0){const h=[],A=[];for(let se=0;se<this.lines.length;se++)A.push(this.lines.get(se));const x=this.lines.length;let O=x-1,H=0,N=T[H];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+R);let B=0;for(let se=Math.min(this.lines.maxLength-1,x+R-1);se>=0;se--)if(N&&N.start>O+B){for(let M=N.newLines.length-1;M>=0;M--)this.lines.set(se--,N.newLines[M]);se++,h.push({index:O+1,amount:N.newLines.length}),B+=N.newLines.length,N=T[++H]}else this.lines.set(se,A[O--]);let ee=0;for(let se=h.length-1;se>=0;se--)h[se].index+=ee,this.lines.onInsertEmitter.fire(h[se]),ee+=h[se].amount;const ue=Math.max(0,x+R-this.lines.maxLength);ue>0&&this.lines.onTrimEmitter.fire(ue)}}translateBufferLineToString(v,g,E=0,T){const R=this.lines.get(v);return R?R.translateToString(g,E,T):""}getWrappedRangeForLine(v){let g=v,E=v;for(;g>0&&this.lines.get(g).isWrapped;)g--;for(;E+1<this.lines.length&&this.lines.get(E+1).isWrapped;)E++;return{first:g,last:E}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].line===v&&(this.markers[g].dispose(),this.markers.splice(g--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){const g=new b.Marker(v);return this.markers.push(g),g.register(this.lines.onTrim(E=>{g.line-=E,g.line<0&&g.dispose()})),g.register(this.lines.onInsert(E=>{g.line>=E.index&&(g.line+=E.amount)})),g.register(this.lines.onDelete(E=>{g.line>=E.index&&g.line<E.index+E.amount&&g.dispose(),g.line>E.index&&(g.line-=E.amount)})),g.register(g.onDispose(()=>this._removeMarker(g))),g}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLine=n.DEFAULT_ATTR_DATA=void 0;const c=s(482),f=s(643),m=s(511),y=s(3734);n.DEFAULT_ATTR_DATA=Object.freeze(new y.AttributeData);let C=0;class b{constructor(u,_,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);const g=_||m.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let E=0;E<u;++E)this.setCell(E,g);this.length=u}get(u){const _=this._data[3*u+0],v=2097151&_;return[this._data[3*u+1],2097152&_?this._combined[u]:v?(0,c.stringFromCodePoint)(v):"",_>>22,2097152&_?this._combined[u].charCodeAt(this._combined[u].length-1):v]}set(u,_){this._data[3*u+1]=_[f.CHAR_DATA_ATTR_INDEX],_[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=_[1],this._data[3*u+0]=2097152|u|_[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=_[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(u){return this._data[3*u+0]>>22}hasWidth(u){return 12582912&this._data[3*u+0]}getFg(u){return this._data[3*u+1]}getBg(u){return this._data[3*u+2]}hasContent(u){return 4194303&this._data[3*u+0]}getCodePoint(u){const _=this._data[3*u+0];return 2097152&_?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&_}isCombined(u){return 2097152&this._data[3*u+0]}getString(u){const _=this._data[3*u+0];return 2097152&_?this._combined[u]:2097151&_?(0,c.stringFromCodePoint)(2097151&_):""}isProtected(u){return 536870912&this._data[3*u+2]}loadCell(u,_){return C=3*u,_.content=this._data[C+0],_.fg=this._data[C+1],_.bg=this._data[C+2],2097152&_.content&&(_.combinedData=this._combined[u]),268435456&_.bg&&(_.extended=this._extendedAttrs[u]),_}setCell(u,_){2097152&_.content&&(this._combined[u]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[u]=_.extended),this._data[3*u+0]=_.content,this._data[3*u+1]=_.fg,this._data[3*u+2]=_.bg}setCellFromCodePoint(u,_,v,g,E,T){268435456&E&&(this._extendedAttrs[u]=T),this._data[3*u+0]=_|v<<22,this._data[3*u+1]=g,this._data[3*u+2]=E}addCodepointToCell(u,_){let v=this._data[3*u+0];2097152&v?this._combined[u]+=(0,c.stringFromCodePoint)(_):(2097151&v?(this._combined[u]=(0,c.stringFromCodePoint)(2097151&v)+(0,c.stringFromCodePoint)(_),v&=-2097152,v|=2097152):v=_|4194304,this._data[3*u+0]=v)}insertCells(u,_,v,g){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs),_<this.length-u){const E=new m.CellData;for(let T=this.length-u-_-1;T>=0;--T)this.setCell(u+_+T,this.loadCell(u+T,E));for(let T=0;T<_;++T)this.setCell(u+T,v)}else for(let E=u;E<this.length;++E)this.setCell(E,v);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs)}deleteCells(u,_,v,g){if(u%=this.length,_<this.length-u){const E=new m.CellData;for(let T=0;T<this.length-u-_;++T)this.setCell(u+T,this.loadCell(u+_+T,E));for(let T=this.length-_;T<this.length;++T)this.setCell(T,v)}else for(let E=u;E<this.length;++E)this.setCell(E,v);u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodePoint(u,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs)}replaceCells(u,_,v,g,E=!1){if(E)for(u&&this.getWidth(u-1)===2&&!this.isProtected(u-1)&&this.setCellFromCodePoint(u-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs);u<_&&u<this.length;)this.isProtected(u)||this.setCell(u,v),u++;else for(u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new y.ExtendedAttrs);u<_&&u<this.length;)this.setCell(u++,v)}resize(u,_){if(u===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const v=3*u;if(u>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{const g=new Uint32Array(v);g.set(this._data),this._data=g}for(let g=this.length;g<u;++g)this.setCell(g,_)}else{this._data=this._data.subarray(0,v);const g=Object.keys(this._combined);for(let T=0;T<g.length;T++){const R=parseInt(g[T],10);R>=u&&delete this._combined[R]}const E=Object.keys(this._extendedAttrs);for(let T=0;T<E.length;T++){const R=parseInt(E[T],10);R>=u&&delete this._extendedAttrs[R]}}return this.length=u,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const u=new Uint32Array(this._data.length);return u.set(this._data),this._data=u,1}return 0}fill(u,_=!1){if(_)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,u);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,u)}}copyFrom(u){this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={};for(const _ in u._combined)this._combined[_]=u._combined[_];this._extendedAttrs={};for(const _ in u._extendedAttrs)this._extendedAttrs[_]=u._extendedAttrs[_];this.isWrapped=u.isWrapped}clone(){const u=new b(0);u._data=new Uint32Array(this._data),u.length=this.length;for(const _ in this._combined)u._combined[_]=this._combined[_];for(const _ in this._extendedAttrs)u._extendedAttrs[_]=this._extendedAttrs[_];return u.isWrapped=this.isWrapped,u}getTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0}copyCellsFrom(u,_,v,g,E){const T=u._data;if(E)for(let h=g-1;h>=0;h--){for(let A=0;A<3;A++)this._data[3*(v+h)+A]=T[3*(_+h)+A];268435456&T[3*(_+h)+2]&&(this._extendedAttrs[v+h]=u._extendedAttrs[_+h])}else for(let h=0;h<g;h++){for(let A=0;A<3;A++)this._data[3*(v+h)+A]=T[3*(_+h)+A];268435456&T[3*(_+h)+2]&&(this._extendedAttrs[v+h]=u._extendedAttrs[_+h])}const R=Object.keys(u._combined);for(let h=0;h<R.length;h++){const A=parseInt(R[h],10);A>=_&&(this._combined[A-_+v]=u._combined[A])}}translateToString(u=!1,_=0,v=this.length){u&&(v=Math.min(v,this.getTrimmedLength()));let g="";for(;_<v;){const E=this._data[3*_+0],T=2097151&E;g+=2097152&E?this._combined[_]:T?(0,c.stringFromCodePoint)(T):f.WHITESPACE_CELL_CHAR,_+=E>>22||1}return g}}n.BufferLine=b},4841:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRangeLength=void 0,n.getRangeLength=function(s,c){if(s.start.y>s.end.y)throw new Error(`Buffer range end (${s.end.x}, ${s.end.y}) cannot be before start (${s.start.x}, ${s.start.y})`);return c*(s.end.y-s.start.y)+(s.end.x-s.start.x+1)}},4634:(p,n)=>{function s(c,f,m){if(f===c.length-1)return c[f].getTrimmedLength();const y=!c[f].hasContent(m-1)&&c[f].getWidth(m-1)===1,C=c[f+1].getWidth(0)===2;return y&&C?m-1:m}Object.defineProperty(n,"__esModule",{value:!0}),n.getWrappedLineTrimmedLength=n.reflowSmallerGetNewLineLengths=n.reflowLargerApplyNewLayout=n.reflowLargerCreateNewLayout=n.reflowLargerGetLinesToRemove=void 0,n.reflowLargerGetLinesToRemove=function(c,f,m,y,C){const b=[];for(let S=0;S<c.length-1;S++){let u=S,_=c.get(++u);if(!_.isWrapped)continue;const v=[c.get(S)];for(;u<c.length&&_.isWrapped;)v.push(_),_=c.get(++u);if(y>=S&&y<u){S+=v.length-1;continue}let g=0,E=s(v,g,f),T=1,R=0;for(;T<v.length;){const A=s(v,T,f),x=A-R,O=m-E,H=Math.min(x,O);v[g].copyCellsFrom(v[T],R,E,H,!1),E+=H,E===m&&(g++,E=0),R+=H,R===A&&(T++,R=0),E===0&&g!==0&&v[g-1].getWidth(m-1)===2&&(v[g].copyCellsFrom(v[g-1],m-1,E++,1,!1),v[g-1].setCell(m-1,C))}v[g].replaceCells(E,m,C);let h=0;for(let A=v.length-1;A>0&&(A>g||v[A].getTrimmedLength()===0);A--)h++;h>0&&(b.push(S+v.length-h),b.push(h)),S+=v.length-1}return b},n.reflowLargerCreateNewLayout=function(c,f){const m=[];let y=0,C=f[y],b=0;for(let S=0;S<c.length;S++)if(C===S){const u=f[++y];c.onDeleteEmitter.fire({index:S-b,amount:u}),S+=u-1,b+=u,C=f[++y]}else m.push(S);return{layout:m,countRemoved:b}},n.reflowLargerApplyNewLayout=function(c,f){const m=[];for(let y=0;y<f.length;y++)m.push(c.get(f[y]));for(let y=0;y<m.length;y++)c.set(y,m[y]);c.length=f.length},n.reflowSmallerGetNewLineLengths=function(c,f,m){const y=[],C=c.map((_,v)=>s(c,v,f)).reduce((_,v)=>_+v);let b=0,S=0,u=0;for(;u<C;){if(C-u<m){y.push(C-u);break}b+=m;const _=s(c,S,f);b>_&&(b-=_,S++);const v=c[S].getWidth(b-1)===2;v&&b--;const g=v?m-1:m;y.push(g),u+=g}return y},n.getWrappedLineTrimmedLength=s},5295:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferSet=void 0;const c=s(9092),f=s(8460),m=s(844);class y extends m.Disposable{constructor(b,S){super(),this._optionsService=b,this._bufferService=S,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,S){this._normal.resize(b,S),this._alt.resize(b,S),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}n.BufferSet=y},511:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const c=s(482),f=s(643),m=s(3734);class y extends m.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new m.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const S=new y;return S.setFromCharData(b),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(b[f.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(b[f.CHAR_DATA_CHAR_INDEX].length===2){const u=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=u&&u<=56319){const _=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(u-55296)+_-56320+65536|b[f.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[f.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=b[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=y},643:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},4863:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Marker=void 0;const c=s(8460),f=s(844);class m{constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=m._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}n.Marker=m,m._nextId=1},7116:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_CHARSET=n.CHARSETS=void 0,n.CHARSETS={},n.DEFAULT_CHARSET=n.CHARSETS.B,n.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},n.CHARSETS.A={"#":""},n.CHARSETS.B=void 0,n.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},n.CHARSETS.C=n.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.E=n.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},n.CHARSETS.H=n.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(p,n)=>{var s,c;Object.defineProperty(n,"__esModule",{value:!0}),n.C1_ESCAPED=n.C1=n.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(s=n.C0||(n.C0={})),(c=n.C1||(n.C1={})).PAD="",c.HOP="",c.BPH="",c.NBH="",c.IND="",c.NEL="",c.SSA="",c.ESA="",c.HTS="",c.HTJ="",c.VTS="",c.PLD="",c.PLU="",c.RI="",c.SS2="",c.SS3="",c.DCS="",c.PU1="",c.PU2="",c.STS="",c.CCH="",c.MW="",c.SPA="",c.EPA="",c.SOS="",c.SGCI="",c.SCI="",c.CSI="",c.ST="",c.OSC="",c.PM="",c.APC="",(n.C1_ESCAPED||(n.C1_ESCAPED={})).ST=`${s.ESC}\\`},7399:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateKeyboardEvent=void 0;const c=s(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};n.evaluateKeyboardEvent=function(m,y,C,b){const S={type:0,cancel:!1,key:void 0},u=(m.shiftKey?1:0)|(m.altKey?2:0)|(m.ctrlKey?4:0)|(m.metaKey?8:0);switch(m.keyCode){case 0:m.key==="UIKeyInputUpArrow"?S.key=y?c.C0.ESC+"OA":c.C0.ESC+"[A":m.key==="UIKeyInputLeftArrow"?S.key=y?c.C0.ESC+"OD":c.C0.ESC+"[D":m.key==="UIKeyInputRightArrow"?S.key=y?c.C0.ESC+"OC":c.C0.ESC+"[C":m.key==="UIKeyInputDownArrow"&&(S.key=y?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(m.altKey){S.key=c.C0.ESC+c.C0.DEL;break}S.key=c.C0.DEL;break;case 9:if(m.shiftKey){S.key=c.C0.ESC+"[Z";break}S.key=c.C0.HT,S.cancel=!0;break;case 13:S.key=m.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,S.cancel=!0;break;case 27:S.key=c.C0.ESC,m.altKey&&(S.key=c.C0.ESC+c.C0.ESC),S.cancel=!0;break;case 37:if(m.metaKey)break;u?(S.key=c.C0.ESC+"[1;"+(u+1)+"D",S.key===c.C0.ESC+"[1;3D"&&(S.key=c.C0.ESC+(C?"b":"[1;5D"))):S.key=y?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(m.metaKey)break;u?(S.key=c.C0.ESC+"[1;"+(u+1)+"C",S.key===c.C0.ESC+"[1;3C"&&(S.key=c.C0.ESC+(C?"f":"[1;5C"))):S.key=y?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(m.metaKey)break;u?(S.key=c.C0.ESC+"[1;"+(u+1)+"A",C||S.key!==c.C0.ESC+"[1;3A"||(S.key=c.C0.ESC+"[1;5A")):S.key=y?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(m.metaKey)break;u?(S.key=c.C0.ESC+"[1;"+(u+1)+"B",C||S.key!==c.C0.ESC+"[1;3B"||(S.key=c.C0.ESC+"[1;5B")):S.key=y?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:m.shiftKey||m.ctrlKey||(S.key=c.C0.ESC+"[2~");break;case 46:S.key=u?c.C0.ESC+"[3;"+(u+1)+"~":c.C0.ESC+"[3~";break;case 36:S.key=u?c.C0.ESC+"[1;"+(u+1)+"H":y?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:S.key=u?c.C0.ESC+"[1;"+(u+1)+"F":y?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:m.shiftKey?S.type=2:m.ctrlKey?S.key=c.C0.ESC+"[5;"+(u+1)+"~":S.key=c.C0.ESC+"[5~";break;case 34:m.shiftKey?S.type=3:m.ctrlKey?S.key=c.C0.ESC+"[6;"+(u+1)+"~":S.key=c.C0.ESC+"[6~";break;case 112:S.key=u?c.C0.ESC+"[1;"+(u+1)+"P":c.C0.ESC+"OP";break;case 113:S.key=u?c.C0.ESC+"[1;"+(u+1)+"Q":c.C0.ESC+"OQ";break;case 114:S.key=u?c.C0.ESC+"[1;"+(u+1)+"R":c.C0.ESC+"OR";break;case 115:S.key=u?c.C0.ESC+"[1;"+(u+1)+"S":c.C0.ESC+"OS";break;case 116:S.key=u?c.C0.ESC+"[15;"+(u+1)+"~":c.C0.ESC+"[15~";break;case 117:S.key=u?c.C0.ESC+"[17;"+(u+1)+"~":c.C0.ESC+"[17~";break;case 118:S.key=u?c.C0.ESC+"[18;"+(u+1)+"~":c.C0.ESC+"[18~";break;case 119:S.key=u?c.C0.ESC+"[19;"+(u+1)+"~":c.C0.ESC+"[19~";break;case 120:S.key=u?c.C0.ESC+"[20;"+(u+1)+"~":c.C0.ESC+"[20~";break;case 121:S.key=u?c.C0.ESC+"[21;"+(u+1)+"~":c.C0.ESC+"[21~";break;case 122:S.key=u?c.C0.ESC+"[23;"+(u+1)+"~":c.C0.ESC+"[23~";break;case 123:S.key=u?c.C0.ESC+"[24;"+(u+1)+"~":c.C0.ESC+"[24~";break;default:if(!m.ctrlKey||m.shiftKey||m.altKey||m.metaKey)if(C&&!b||!m.altKey||m.metaKey)!C||m.altKey||m.ctrlKey||m.shiftKey||!m.metaKey?m.key&&!m.ctrlKey&&!m.altKey&&!m.metaKey&&m.keyCode>=48&&m.key.length===1?S.key=m.key:m.key&&m.ctrlKey&&(m.key==="_"&&(S.key=c.C0.US),m.key==="@"&&(S.key=c.C0.NUL)):m.keyCode===65&&(S.type=1);else{const _=f[m.keyCode],v=_==null?void 0:_[m.shiftKey?1:0];if(v)S.key=c.C0.ESC+v;else if(m.keyCode>=65&&m.keyCode<=90){const g=m.ctrlKey?m.keyCode-64:m.keyCode+32;let E=String.fromCharCode(g);m.shiftKey&&(E=E.toUpperCase()),S.key=c.C0.ESC+E}else if(m.keyCode===32)S.key=c.C0.ESC+(m.ctrlKey?c.C0.NUL:" ");else if(m.key==="Dead"&&m.code.startsWith("Key")){let g=m.code.slice(3,4);m.shiftKey||(g=g.toLowerCase()),S.key=c.C0.ESC+g,S.cancel=!0}}else m.keyCode>=65&&m.keyCode<=90?S.key=String.fromCharCode(m.keyCode-64):m.keyCode===32?S.key=c.C0.NUL:m.keyCode>=51&&m.keyCode<=55?S.key=String.fromCharCode(m.keyCode-51+27):m.keyCode===56?S.key=c.C0.DEL:m.keyCode===219?S.key=c.C0.ESC:m.keyCode===220?S.key=c.C0.FS:m.keyCode===221&&(S.key=c.C0.GS)}return S}},482:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(s){return s>65535?(s-=65536,String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):String.fromCharCode(s)},n.utf32ToString=function(s,c=0,f=s.length){let m="";for(let y=c;y<f;++y){let C=s[y];C>65535?(C-=65536,m+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):m+=String.fromCharCode(C)}return m},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(s,c){const f=s.length;if(!f)return 0;let m=0,y=0;if(this._interim){const C=s.charCodeAt(y++);56320<=C&&C<=57343?c[m++]=1024*(this._interim-55296)+C-56320+65536:(c[m++]=this._interim,c[m++]=C),this._interim=0}for(let C=y;C<f;++C){const b=s.charCodeAt(C);if(55296<=b&&b<=56319){if(++C>=f)return this._interim=b,m;const S=s.charCodeAt(C);56320<=S&&S<=57343?c[m++]=1024*(b-55296)+S-56320+65536:(c[m++]=b,c[m++]=S)}else b!==65279&&(c[m++]=b)}return m}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(s,c){const f=s.length;if(!f)return 0;let m,y,C,b,S=0,u=0,_=0;if(this.interim[0]){let E=!1,T=this.interim[0];T&=(224&T)==192?31:(240&T)==224?15:7;let R,h=0;for(;(R=63&this.interim[++h])&&h<4;)T<<=6,T|=R;const A=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=A-h;for(;_<x;){if(_>=f)return 0;if(R=s[_++],(192&R)!=128){_--,E=!0;break}this.interim[h++]=R,T<<=6,T|=63&R}E||(A===2?T<128?_--:c[S++]=T:A===3?T<2048||T>=55296&&T<=57343||T===65279||(c[S++]=T):T<65536||T>1114111||(c[S++]=T)),this.interim.fill(0)}const v=f-4;let g=_;for(;g<f;){for(;!(!(g<v)||128&(m=s[g])||128&(y=s[g+1])||128&(C=s[g+2])||128&(b=s[g+3]));)c[S++]=m,c[S++]=y,c[S++]=C,c[S++]=b,g+=4;if(m=s[g++],m<128)c[S++]=m;else if((224&m)==192){if(g>=f)return this.interim[0]=m,S;if(y=s[g++],(192&y)!=128){g--;continue}if(u=(31&m)<<6|63&y,u<128){g--;continue}c[S++]=u}else if((240&m)==224){if(g>=f)return this.interim[0]=m,S;if(y=s[g++],(192&y)!=128){g--;continue}if(g>=f)return this.interim[0]=m,this.interim[1]=y,S;if(C=s[g++],(192&C)!=128){g--;continue}if(u=(15&m)<<12|(63&y)<<6|63&C,u<2048||u>=55296&&u<=57343||u===65279)continue;c[S++]=u}else if((248&m)==240){if(g>=f)return this.interim[0]=m,S;if(y=s[g++],(192&y)!=128){g--;continue}if(g>=f)return this.interim[0]=m,this.interim[1]=y,S;if(C=s[g++],(192&C)!=128){g--;continue}if(g>=f)return this.interim[0]=m,this.interim[1]=y,this.interim[2]=C,S;if(b=s[g++],(192&b)!=128){g--;continue}if(u=(7&m)<<18|(63&y)<<12|(63&C)<<6|63&b,u<65536||u>1114111)continue;c[S++]=u}}return S}}},225:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV6=void 0;const s=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;n.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let m=0;m<s.length;++m)f.fill(0,s[m][0],s[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?f[m]:function(y,C){let b,S=0,u=C.length-1;if(y<C[0][0]||y>C[u][1])return!1;for(;u>=S;)if(b=S+u>>1,y>C[b][1])S=b+1;else{if(!(y<C[b][0]))return!0;u=b-1}return!1}(m,c)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}}},5981:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WriteBuffer=void 0;const c=s(8460),f=s(844);class m extends f.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const u=this._callbacks.shift();u&&u()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(b)}_innerWrite(C=0,b=!0){const S=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const u=this._writeBuffer[this._bufferOffset],_=this._action(u,b);if(_){const g=E=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,E)):this._innerWrite(S,E);return void _.catch(E=>(queueMicrotask(()=>{throw E}),Promise.resolve(!1))).then(g)}const v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}n.WriteBuffer=m},5941:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.toRgbString=n.parseColor=void 0;const s=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function f(m,y){const C=m.toString(16),b=C.length<2?"0"+C:C;switch(y){case 4:return C[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}n.parseColor=function(m){if(!m)return;let y=m.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);const C=s.exec(y);if(C){const b=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/b*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/b*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/b*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),c.exec(y)&&[3,6,9,12].includes(y.length))){const C=y.length/3,b=[0,0,0];for(let S=0;S<3;++S){const u=parseInt(y.slice(C*S,C*S+C),16);b[S]=C===1?u<<4:C===2?u:C===3?u>>4:u>>8}return b}},n.toRgbString=function(m,y=16){const[C,b,S]=m;return`rgb:${f(C,y)}/${f(b,y)}/${f(S,y)}`}},5770:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PAYLOAD_LIMIT=void 0,n.PAYLOAD_LIMIT=1e7},6351:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DcsHandler=n.DcsParser=void 0;const c=s(482),f=s(8742),m=s(5770),y=[];n.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=y}registerHandler(b,S){this._handlers[b]===void 0&&(this._handlers[b]=[]);const u=this._handlers[b];return u.push(S),{dispose:()=>{const _=u.indexOf(S);_!==-1&&u.splice(_,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0}hook(b,S){if(this.reset(),this._ident=b,this._active=this._handlers[b]||y,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(b,S,u){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(b,S,u);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(b,S,u))}unhook(b,S=!0){if(this._active.length){let u=!1,_=this._active.length-1,v=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,u=S,v=this._stack.fallThrough,this._stack.paused=!1),!v&&u===!1){for(;_>=0&&(u=this._active[_].unhook(b),u!==!0);_--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,u;_--}for(;_>=0;_--)if(u=this._active[_].unhook(!1),u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,u}else this._handlerFb(this._ident,"UNHOOK",b);this._active=y,this._ident=0}};const C=new f.Params;C.addParam(0),n.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=C,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():C,this._data="",this._hitLimit=!1}put(b,S,u){this._hitLimit||(this._data+=(0,c.utf32ToString)(b,S,u),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let S=!1;if(this._hitLimit)S=!1;else if(b&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(u=>(this._params=C,this._data="",this._hitLimit=!1,u));return this._params=C,this._data="",this._hitLimit=!1,S}}},2015:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.EscapeSequenceParser=n.VT500_TRANSITION_TABLE=n.TransitionTable=void 0;const c=s(844),f=s(8742),m=s(6242),y=s(6351);class C{constructor(_){this.table=new Uint8Array(_)}setDefault(_,v){this.table.fill(_<<4|v)}add(_,v,g,E){this.table[v<<8|_]=g<<4|E}addMany(_,v,g,E){for(let T=0;T<_.length;T++)this.table[v<<8|_[T]]=g<<4|E}}n.TransitionTable=C;const b=160;n.VT500_TRANSITION_TABLE=function(){const u=new C(4095),_=Array.apply(null,Array(256)).map((h,A)=>A),v=(h,A)=>_.slice(h,A),g=v(32,127),E=v(0,24);E.push(25),E.push.apply(E,v(28,32));const T=v(0,14);let R;for(R in u.setDefault(1,0),u.addMany(g,0,2,0),T)u.addMany([24,26,153,154],R,3,0),u.addMany(v(128,144),R,3,0),u.addMany(v(144,152),R,3,0),u.add(156,R,0,0),u.add(27,R,11,1),u.add(157,R,4,8),u.addMany([152,158,159],R,0,7),u.add(155,R,11,3),u.add(144,R,11,9);return u.addMany(E,0,3,0),u.addMany(E,1,3,1),u.add(127,1,0,1),u.addMany(E,8,0,8),u.addMany(E,3,3,3),u.add(127,3,0,3),u.addMany(E,4,3,4),u.add(127,4,0,4),u.addMany(E,6,3,6),u.addMany(E,5,3,5),u.add(127,5,0,5),u.addMany(E,2,3,2),u.add(127,2,0,2),u.add(93,1,4,8),u.addMany(g,8,5,8),u.add(127,8,5,8),u.addMany([156,27,24,26,7],8,6,0),u.addMany(v(28,32),8,0,8),u.addMany([88,94,95],1,0,7),u.addMany(g,7,0,7),u.addMany(E,7,0,7),u.add(156,7,0,0),u.add(127,7,0,7),u.add(91,1,11,3),u.addMany(v(64,127),3,7,0),u.addMany(v(48,60),3,8,4),u.addMany([60,61,62,63],3,9,4),u.addMany(v(48,60),4,8,4),u.addMany(v(64,127),4,7,0),u.addMany([60,61,62,63],4,0,6),u.addMany(v(32,64),6,0,6),u.add(127,6,0,6),u.addMany(v(64,127),6,0,0),u.addMany(v(32,48),3,9,5),u.addMany(v(32,48),5,9,5),u.addMany(v(48,64),5,0,6),u.addMany(v(64,127),5,7,0),u.addMany(v(32,48),4,9,5),u.addMany(v(32,48),1,9,2),u.addMany(v(32,48),2,9,2),u.addMany(v(48,127),2,10,0),u.addMany(v(48,80),1,10,0),u.addMany(v(81,88),1,10,0),u.addMany([89,90,92],1,10,0),u.addMany(v(96,127),1,10,0),u.add(80,1,11,9),u.addMany(E,9,0,9),u.add(127,9,0,9),u.addMany(v(28,32),9,0,9),u.addMany(v(32,48),9,9,12),u.addMany(v(48,60),9,8,10),u.addMany([60,61,62,63],9,9,10),u.addMany(E,11,0,11),u.addMany(v(32,128),11,0,11),u.addMany(v(28,32),11,0,11),u.addMany(E,10,0,10),u.add(127,10,0,10),u.addMany(v(28,32),10,0,10),u.addMany(v(48,60),10,8,10),u.addMany([60,61,62,63],10,0,11),u.addMany(v(32,48),10,9,12),u.addMany(E,12,0,12),u.add(127,12,0,12),u.addMany(v(28,32),12,0,12),u.addMany(v(32,48),12,9,12),u.addMany(v(48,64),12,0,11),u.addMany(v(64,127),12,12,13),u.addMany(v(64,127),10,12,13),u.addMany(v(64,127),9,12,13),u.addMany(E,13,13,13),u.addMany(g,13,13,13),u.add(127,13,0,13),u.addMany([27,156,24,26],13,14,0),u.add(b,0,2,0),u.add(b,8,5,8),u.add(b,6,0,6),u.add(b,11,0,11),u.add(b,13,13,13),u}();class S extends c.Disposable{constructor(_=n.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(v,g,E)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,g)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new m.OscParser),this._dcsParser=this.register(new y.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,v=[64,126]){let g=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(g=_.prefix.charCodeAt(0),g&&60>g||g>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let T=0;T<_.intermediates.length;++T){const R=_.intermediates.charCodeAt(T);if(32>R||R>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");g<<=8,g|=R}}if(_.final.length!==1)throw new Error("final must be a single byte");const E=_.final.charCodeAt(0);if(v[0]>E||E>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return g<<=8,g|=E,g}identToString(_){const v=[];for(;_;)v.push(String.fromCharCode(255&_)),_>>=8;return v.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,v){const g=this._identifier(_,[48,126]);this._escHandlers[g]===void 0&&(this._escHandlers[g]=[]);const E=this._escHandlers[g];return E.push(v),{dispose:()=>{const T=E.indexOf(v);T!==-1&&E.splice(T,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,v){this._executeHandlers[_.charCodeAt(0)]=v}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,v){const g=this._identifier(_);this._csiHandlers[g]===void 0&&(this._csiHandlers[g]=[]);const E=this._csiHandlers[g];return E.push(v),{dispose:()=>{const T=E.indexOf(v);T!==-1&&E.splice(T,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,v){return this._dcsParser.registerHandler(this._identifier(_),v)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,v){return this._oscParser.registerHandler(_,v)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,v,g,E,T){this._parseStack.state=_,this._parseStack.handlers=v,this._parseStack.handlerPos=g,this._parseStack.transition=E,this._parseStack.chunkPos=T}parse(_,v,g){let E,T=0,R=0,h=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,h=this._parseStack.chunkPos+1;else{if(g===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const A=this._parseStack.handlers;let x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(g===!1&&x>-1){for(;x>=0&&(E=A[x](this._params),E!==!0);x--)if(E instanceof Promise)return this._parseStack.handlerPos=x,E}this._parseStack.handlers=[];break;case 4:if(g===!1&&x>-1){for(;x>=0&&(E=A[x](),E!==!0);x--)if(E instanceof Promise)return this._parseStack.handlerPos=x,E}this._parseStack.handlers=[];break;case 6:if(T=_[this._parseStack.chunkPos],E=this._dcsParser.unhook(T!==24&&T!==26,g),E)return E;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(T=_[this._parseStack.chunkPos],E=this._oscParser.end(T!==24&&T!==26,g),E)return E;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,h=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let A=h;A<v;++A){switch(T=_[A],R=this._transitions.table[this.currentState<<8|(T<160?T:b)],R>>4){case 2:for(let B=A+1;;++B){if(B>=v||(T=_[B])<32||T>126&&T<b){this._printHandler(_,A,B),A=B-1;break}if(++B>=v||(T=_[B])<32||T>126&&T<b){this._printHandler(_,A,B),A=B-1;break}if(++B>=v||(T=_[B])<32||T>126&&T<b){this._printHandler(_,A,B),A=B-1;break}if(++B>=v||(T=_[B])<32||T>126&&T<b){this._printHandler(_,A,B),A=B-1;break}}break;case 3:this._executeHandlers[T]?this._executeHandlers[T]():this._executeHandlerFb(T),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:A,code:T,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const x=this._csiHandlers[this._collect<<8|T];let O=x?x.length-1:-1;for(;O>=0&&(E=x[O](this._params),E!==!0);O--)if(E instanceof Promise)return this._preserveStack(3,x,O,R,A),E;O<0&&this._csiHandlerFb(this._collect<<8|T,this._params),this.precedingCodepoint=0;break;case 8:do switch(T){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(T-48)}while(++A<v&&(T=_[A])>47&&T<60);A--;break;case 9:this._collect<<=8,this._collect|=T;break;case 10:const H=this._escHandlers[this._collect<<8|T];let N=H?H.length-1:-1;for(;N>=0&&(E=H[N](),E!==!0);N--)if(E instanceof Promise)return this._preserveStack(4,H,N,R,A),E;N<0&&this._escHandlerFb(this._collect<<8|T),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|T,this._params);break;case 13:for(let B=A+1;;++B)if(B>=v||(T=_[B])===24||T===26||T===27||T>127&&T<b){this._dcsParser.put(_,A,B),A=B-1;break}break;case 14:if(E=this._dcsParser.unhook(T!==24&&T!==26),E)return this._preserveStack(6,[],0,R,A),E;T===27&&(R|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let B=A+1;;B++)if(B>=v||(T=_[B])<32||T>127&&T<b){this._oscParser.put(_,A,B),A=B-1;break}break;case 6:if(E=this._oscParser.end(T!==24&&T!==26),E)return this._preserveStack(5,[],0,R,A),E;T===27&&(R|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&R}}}n.EscapeSequenceParser=S},6242:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OscHandler=n.OscParser=void 0;const c=s(5770),f=s(482),m=[];n.OscParser=class{constructor(){this._state=0,this._active=m,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(y,C){this._handlers[y]===void 0&&(this._handlers[y]=[]);const b=this._handlers[y];return b.push(C),{dispose:()=>{const S=b.indexOf(C);S!==-1&&b.splice(S,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}reset(){if(this._state===2)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].end(!1);this._stack.paused=!1,this._active=m,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||m,this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].start();else this._handlerFb(this._id,"START")}_put(y,C,b){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(y,C,b);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(y,C,b))}start(){this.reset(),this._state=1}put(y,C,b){if(this._state!==3){if(this._state===1)for(;C<b;){const S=y[C++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&b-C>0&&this._put(y,C,b)}}end(y,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,S=this._active.length-1,u=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,b=C,u=this._stack.fallThrough,this._stack.paused=!1),!u&&b===!1){for(;S>=0&&(b=this._active[S].end(y),b!==!0);S--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,b;S--}for(;S>=0;S--)if(b=this._active[S].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",y);this._active=m,this._id=-1,this._state=0}}},n.OscHandler=class{constructor(y){this._handler=y,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(y,C,b){this._hitLimit||(this._data+=(0,f.utf32ToString)(y,C,b),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(y){let C=!1;if(this._hitLimit)C=!1;else if(y&&(C=this._handler(this._data),C instanceof Promise))return C.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,C}}},8742:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Params=void 0;const s=2147483647;class c{constructor(m=32,y=32){if(this.maxLength=m,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(m),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(m),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(m){const y=new c;if(!m.length)return y;for(let C=Array.isArray(m[0])?1:0;C<m.length;++C){const b=m[C];if(Array.isArray(b))for(let S=0;S<b.length;++S)y.addSubParam(b[S]);else y.addParam(b)}return y}clone(){const m=new c(this.maxLength,this.maxSubParamsLength);return m.params.set(this.params),m.length=this.length,m._subParams.set(this._subParams),m._subParamsLength=this._subParamsLength,m._subParamsIdx.set(this._subParamsIdx),m._rejectDigits=this._rejectDigits,m._rejectSubDigits=this._rejectSubDigits,m._digitIsSub=this._digitIsSub,m}toArray(){const m=[];for(let y=0;y<this.length;++y){m.push(this.params[y]);const C=this._subParamsIdx[y]>>8,b=255&this._subParamsIdx[y];b-C>0&&m.push(Array.prototype.slice.call(this._subParams,C,b))}return m}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(m){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=m>s?s:m}}addSubParam(m){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=m>s?s:m,this._subParamsIdx[this.length-1]++}}hasSubParams(m){return(255&this._subParamsIdx[m])-(this._subParamsIdx[m]>>8)>0}getSubParams(m){const y=this._subParamsIdx[m]>>8,C=255&this._subParamsIdx[m];return C-y>0?this._subParams.subarray(y,C):null}getSubParamsAll(){const m={};for(let y=0;y<this.length;++y){const C=this._subParamsIdx[y]>>8,b=255&this._subParamsIdx[y];b-C>0&&(m[y]=this._subParams.slice(C,b))}return m}addDigit(m){let y;if(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,b=C[y-1];C[y-1]=~b?Math.min(10*b+m,s):m}}n.Params=c},5741:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AddonManager=void 0,n.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let s=this._addons.length-1;s>=0;s--)this._addons[s].instance.dispose()}loadAddon(s,c){const f={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(f),c.dispose=()=>this._wrappedAddonDispose(f),c.activate(s)}_wrappedAddonDispose(s){if(s.isDisposed)return;let c=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===s){c=f;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");s.isDisposed=!0,s.dispose.apply(s.instance),this._addons.splice(c,1)}}},8771:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferApiView=void 0;const c=s(3785),f=s(511);n.BufferApiView=class{constructor(m,y){this._buffer=m,this.type=y}init(m){return this._buffer=m,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(m){const y=this._buffer.lines.get(m);if(y)return new c.BufferLineApiView(y)}getNullCell(){return new f.CellData}}},3785:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLineApiView=void 0;const c=s(511);n.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,m){if(!(f<0||f>=this._line.length))return m?(this._line.loadCell(f,m),m):this._line.loadCell(f,new c.CellData)}translateToString(f,m,y){return this._line.translateToString(f,m,y)}}},8285:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferNamespaceApi=void 0;const c=s(8771),f=s(8460);n.BufferNamespaceApi=class{constructor(m){this._core=m,this._onBufferChange=new f.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ParserApi=void 0,n.ParserApi=class{constructor(s){this._core=s}registerCsiHandler(s,c){return this._core.registerCsiHandler(s,f=>c(f.toArray()))}addCsiHandler(s,c){return this.registerCsiHandler(s,c)}registerDcsHandler(s,c){return this._core.registerDcsHandler(s,(f,m)=>c(f,m.toArray()))}addDcsHandler(s,c){return this.registerDcsHandler(s,c)}registerEscHandler(s,c){return this._core.registerEscHandler(s,c)}addEscHandler(s,c){return this.registerEscHandler(s,c)}registerOscHandler(s,c){return this._core.registerOscHandler(s,c)}addOscHandler(s,c){return this.registerOscHandler(s,c)}}},7090:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeApi=void 0,n.UnicodeApi=class{constructor(s){this._core=s}register(s){this._core.unicodeService.register(s)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(s){this._core.unicodeService.activeVersion=s}}},744:function(p,n,s){var c=this&&this.__decorate||function(u,_,v,g){var E,T=arguments.length,R=T<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,v):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,_,v,g);else for(var h=u.length-1;h>=0;h--)(E=u[h])&&(R=(T<3?E(R):T>3?E(_,v,R):E(_,v))||R);return T>3&&R&&Object.defineProperty(_,v,R),R},f=this&&this.__param||function(u,_){return function(v,g){_(v,g,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferService=n.MINIMUM_ROWS=n.MINIMUM_COLS=void 0;const m=s(2585),y=s(5295),C=s(8460),b=s(844);n.MINIMUM_COLS=2,n.MINIMUM_ROWS=1;let S=class extends b.Disposable{constructor(u){super(),this.isUserScrolling=!1,this._onResize=this.register(new C.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new C.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(u.rawOptions.cols||0,n.MINIMUM_COLS),this.rows=Math.max(u.rawOptions.rows||0,n.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(u,this))}get buffer(){return this.buffers.active}resize(u,_){this.cols=u,this.rows=_,this.buffers.resize(u,_),this._onResize.fire({cols:u,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(u,_=!1){const v=this.buffer;let g;g=this._cachedBlankLine,g&&g.length===this.cols&&g.getFg(0)===u.fg&&g.getBg(0)===u.bg||(g=v.getBlankLine(u,_),this._cachedBlankLine=g),g.isWrapped=_;const E=v.ybase+v.scrollTop,T=v.ybase+v.scrollBottom;if(v.scrollTop===0){const R=v.lines.isFull;T===v.lines.length-1?R?v.lines.recycle().copyFrom(g):v.lines.push(g.clone()):v.lines.splice(T+1,0,g.clone()),R?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{const R=T-E+1;v.lines.shiftElements(E+1,R-1,-1),v.lines.set(T,g.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(u,_,v){const g=this.buffer;if(u<0){if(g.ydisp===0)return;this.isUserScrolling=!0}else u+g.ydisp>=g.ybase&&(this.isUserScrolling=!1);const E=g.ydisp;g.ydisp=Math.max(Math.min(g.ydisp+u,g.ybase),0),E!==g.ydisp&&(_||this._onScroll.fire(g.ydisp))}scrollPages(u){this.scrollLines(u*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(u){const _=u-this.buffer.ydisp;_!==0&&this.scrollLines(_)}};S=c([f(0,m.IOptionsService)],S),n.BufferService=S},7994:(p,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CharsetService=void 0,n.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(s){this.glevel=s,this.charset=this._charsets[s]}setgCharset(s,c){this._charsets[s]=c,this.glevel===s&&(this.charset=c)}}},1753:function(p,n,s){var c=this&&this.__decorate||function(g,E,T,R){var h,A=arguments.length,x=A<3?E:R===null?R=Object.getOwnPropertyDescriptor(E,T):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,E,T,R);else for(var O=g.length-1;O>=0;O--)(h=g[O])&&(x=(A<3?h(x):A>3?h(E,T,x):h(E,T))||x);return A>3&&x&&Object.defineProperty(E,T,x),x},f=this&&this.__param||function(g,E){return function(T,R){E(T,R,g)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreMouseService=void 0;const m=s(2585),y=s(8460),C=s(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:g=>g.button!==4&&g.action===1&&(g.ctrl=!1,g.alt=!1,g.shift=!1,!0)},VT200:{events:19,restrict:g=>g.action!==32},DRAG:{events:23,restrict:g=>g.action!==32||g.button!==3},ANY:{events:31,restrict:g=>!0}};function S(g,E){let T=(g.ctrl?16:0)|(g.shift?4:0)|(g.alt?8:0);return g.button===4?(T|=64,T|=g.action):(T|=3&g.button,4&g.button&&(T|=64),8&g.button&&(T|=128),g.action===32?T|=32:g.action!==0||E||(T|=3)),T}const u=String.fromCharCode,_={DEFAULT:g=>{const E=[S(g,!1)+32,g.col+32,g.row+32];return E[0]>255||E[1]>255||E[2]>255?"":`\x1B[M${u(E[0])}${u(E[1])}${u(E[2])}`},SGR:g=>{const E=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${S(g,!0)};${g.col};${g.row}${E}`},SGR_PIXELS:g=>{const E=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${S(g,!0)};${g.x};${g.y}${E}`}};let v=class extends C.Disposable{constructor(g,E){super(),this._bufferService=g,this._coreService=E,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new y.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const T of Object.keys(b))this.addProtocol(T,b[T]);for(const T of Object.keys(_))this.addEncoding(T,_[T]);this.reset()}addProtocol(g,E){this._protocols[g]=E}addEncoding(g,E){this._encodings[g]=E}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(g){if(!this._protocols[g])throw new Error(`unknown protocol "${g}"`);this._activeProtocol=g,this._onProtocolChange.fire(this._protocols[g].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(g){if(!this._encodings[g])throw new Error(`unknown encoding "${g}"`);this._activeEncoding=g}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(g){if(g.col<0||g.col>=this._bufferService.cols||g.row<0||g.row>=this._bufferService.rows||g.button===4&&g.action===32||g.button===3&&g.action!==32||g.button!==4&&(g.action===2||g.action===3)||(g.col++,g.row++,g.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,g,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(g))return!1;const E=this._encodings[this._activeEncoding](g);return E&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(E):this._coreService.triggerDataEvent(E,!0)),this._lastEvent=g,!0}explainEvents(g){return{down:!!(1&g),up:!!(2&g),drag:!!(4&g),move:!!(8&g),wheel:!!(16&g)}}_equalEvents(g,E,T){if(T){if(g.x!==E.x||g.y!==E.y)return!1}else if(g.col!==E.col||g.row!==E.row)return!1;return g.button===E.button&&g.action===E.action&&g.ctrl===E.ctrl&&g.alt===E.alt&&g.shift===E.shift}};v=c([f(0,m.IBufferService),f(1,m.ICoreService)],v),n.CoreMouseService=v},6975:function(p,n,s){var c=this&&this.__decorate||function(v,g,E,T){var R,h=arguments.length,A=h<3?g:T===null?T=Object.getOwnPropertyDescriptor(g,E):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(v,g,E,T);else for(var x=v.length-1;x>=0;x--)(R=v[x])&&(A=(h<3?R(A):h>3?R(g,E,A):R(g,E))||A);return h>3&&A&&Object.defineProperty(g,E,A),A},f=this&&this.__param||function(v,g){return function(E,T){g(E,T,v)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreService=void 0;const m=s(2585),y=s(8460),C=s(1439),b=s(844),S=Object.freeze({insertMode:!1}),u=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let _=class extends b.Disposable{constructor(v,g,E){super(),this._bufferService=v,this._logService=g,this._optionsService=E,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new y.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new y.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new y.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new y.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,C.clone)(S),this.decPrivateModes=(0,C.clone)(u)}reset(){this.modes=(0,C.clone)(S),this.decPrivateModes=(0,C.clone)(u)}triggerDataEvent(v,g=!1){if(this._optionsService.rawOptions.disableStdin)return;const E=this._bufferService.buffer;g&&this._optionsService.rawOptions.scrollOnUserInput&&E.ybase!==E.ydisp&&this._onRequestScrollToBottom.fire(),g&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,()=>v.split("").map(T=>T.charCodeAt(0))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,()=>v.split("").map(g=>g.charCodeAt(0))),this._onBinary.fire(v))}};_=c([f(0,m.IBufferService),f(1,m.ILogService),f(2,m.IOptionsService)],_),n.CoreService=_},9074:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DecorationService=void 0;const c=s(8055),f=s(8460),m=s(844),y=s(6106);let C=0,b=0;class S extends m.Disposable{constructor(){super(),this._decorations=new y.SortedList(v=>v==null?void 0:v.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,m.toDisposable)(()=>{for(const v of this._decorations.values())this._onDecorationRemoved.fire(v);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(v){if(v.marker.isDisposed)return;const g=new u(v);if(g){const E=g.marker.onDispose(()=>g.dispose());g.onDispose(()=>{g&&(this._decorations.delete(g)&&this._onDecorationRemoved.fire(g),E.dispose())}),this._decorations.insert(g),this._onDecorationRegistered.fire(g)}return g}reset(){for(const v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,g,E){var T,R,h;let A=0,x=0;for(const O of this._decorations.getKeyIterator(g))A=(T=O.options.x)!==null&&T!==void 0?T:0,x=A+((R=O.options.width)!==null&&R!==void 0?R:1),v>=A&&v<x&&(!E||((h=O.options.layer)!==null&&h!==void 0?h:"bottom")===E)&&(yield O)}forEachDecorationAtCell(v,g,E,T){this._decorations.forEachByKey(g,R=>{var h,A,x;C=(h=R.options.x)!==null&&h!==void 0?h:0,b=C+((A=R.options.width)!==null&&A!==void 0?A:1),v>=C&&v<b&&(!E||((x=R.options.layer)!==null&&x!==void 0?x:"bottom")===E)&&T(R)})}dispose(){for(const v of this._decorations.values())this._onDecorationRemoved.fire(v);this.reset()}}n.DecorationService=S;class u extends m.Disposable{constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.InstantiationService=n.ServiceCollection=void 0;const c=s(2585),f=s(8343);class m{constructor(...C){this._entries=new Map;for(const[b,S]of C)this.set(b,S)}set(C,b){const S=this._entries.get(C);return this._entries.set(C,b),S}forEach(C){for(const[b,S]of this._entries.entries())C(b,S)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}n.ServiceCollection=m,n.InstantiationService=class{constructor(){this._services=new m,this._services.set(c.IInstantiationService,this)}setService(y,C){this._services.set(y,C)}getService(y){return this._services.get(y)}createInstance(y,...C){const b=(0,f.getServiceDependencies)(y).sort((_,v)=>_.index-v.index),S=[];for(const _ of b){const v=this._services.get(_.id);if(!v)throw new Error(`[createInstance] ${y.name} depends on UNKNOWN service ${_.id}.`);S.push(v)}const u=b.length>0?b[0].index:C.length;if(C.length!==u)throw new Error(`[createInstance] First service dependency of ${y.name} at position ${u+1} conflicts with ${C.length} static arguments`);return new y(...C,...S)}}},7866:function(p,n,s){var c=this&&this.__decorate||function(S,u,_,v){var g,E=arguments.length,T=E<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,u,_,v);else for(var R=S.length-1;R>=0;R--)(g=S[R])&&(T=(E<3?g(T):E>3?g(u,_,T):g(u,_))||T);return E>3&&T&&Object.defineProperty(u,_,T),T},f=this&&this.__param||function(S,u){return function(_,v){u(_,v,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.LogService=void 0;const m=s(844),y=s(2585),C={debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF};let b=class extends m.Disposable{constructor(S){super(),this._optionsService=S,this.logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(S){for(let u=0;u<S.length;u++)typeof S[u]=="function"&&(S[u]=S[u]())}_log(S,u,_){this._evalLazyOptionalParams(_),S.call(console,"xterm.js: "+u,..._)}debug(S,...u){this.logLevel<=y.LogLevelEnum.DEBUG&&this._log(console.log,S,u)}info(S,...u){this.logLevel<=y.LogLevelEnum.INFO&&this._log(console.info,S,u)}warn(S,...u){this.logLevel<=y.LogLevelEnum.WARN&&this._log(console.warn,S,u)}error(S,...u){this.logLevel<=y.LogLevelEnum.ERROR&&this._log(console.error,S,u)}};b=c([f(0,y.IOptionsService)],b),n.LogService=b},7302:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionsService=n.DEFAULT_OPTIONS=void 0;const c=s(8460),f=s(6114),m=s(844);n.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const y=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends m.Disposable{constructor(S){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const u=Object.assign({},n.DEFAULT_OPTIONS);for(const _ in S)if(_ in u)try{const v=S[_];u[_]=this._sanitizeAndValidateOption(_,v)}catch(v){console.error(v)}this.rawOptions=u,this.options=Object.assign({},u),this._setupOptions()}onSpecificOptionChange(S,u){return this.onOptionChange(_=>{_===S&&u(this.rawOptions[S])})}onMultipleOptionChange(S,u){return this.onOptionChange(_=>{S.indexOf(_)!==-1&&u()})}_setupOptions(){const S=_=>{if(!(_ in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},u=(_,v)=>{if(!(_ in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);v=this._sanitizeAndValidateOption(_,v),this.rawOptions[_]!==v&&(this.rawOptions[_]=v,this._onOptionChange.fire(_))};for(const _ in this.rawOptions){const v={get:S.bind(this,_),set:u.bind(this,_)};Object.defineProperty(this.options,_,v)}}_sanitizeAndValidateOption(S,u){switch(S){case"cursorStyle":if(u||(u=n.DEFAULT_OPTIONS[S]),!function(_){return _==="block"||_==="underline"||_==="bar"}(u))throw new Error(`"${u}" is not a valid value for ${S}`);break;case"wordSeparator":u||(u=n.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=y.includes(u)?u:n.DEFAULT_OPTIONS[S];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(`${S} cannot be less than 1, value: ${u}`);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${u}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${u}`);break;case"rows":case"cols":if(!u&&u!==0)throw new Error(`${S} must be numeric, value: ${u}`);break;case"windowsPty":u=u??{}}return u}}n.OptionsService=C},2660:function(p,n,s){var c=this&&this.__decorate||function(C,b,S,u){var _,v=arguments.length,g=v<3?b:u===null?u=Object.getOwnPropertyDescriptor(b,S):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(C,b,S,u);else for(var E=C.length-1;E>=0;E--)(_=C[E])&&(g=(v<3?_(g):v>3?_(b,S,g):_(b,S))||g);return v>3&&g&&Object.defineProperty(b,S,g),g},f=this&&this.__param||function(C,b){return function(S,u){b(S,u,C)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkService=void 0;const m=s(2585);let y=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const b=this._bufferService.buffer;if(C.id===void 0){const E=b.addMarker(b.ybase+b.y),T={data:C,id:this._nextId++,lines:[E]};return E.onDispose(()=>this._removeMarkerFromLink(T,E)),this._dataByLinkId.set(T.id,T),T.id}const S=C,u=this._getEntryIdKey(S),_=this._entriesWithId.get(u);if(_)return this.addLineToLink(_.id,b.ybase+b.y),_.id;const v=b.addMarker(b.ybase+b.y),g={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(g,v)),this._entriesWithId.set(g.key,g),this._dataByLinkId.set(g.id,g),g.id}addLineToLink(C,b){const S=this._dataByLinkId.get(C);if(S&&S.lines.every(u=>u.line!==b)){const u=this._bufferService.buffer.addMarker(b);S.lines.push(u),u.onDispose(()=>this._removeMarkerFromLink(S,u))}}getLinkData(C){var b;return(b=this._dataByLinkId.get(C))===null||b===void 0?void 0:b.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,b){const S=C.lines.indexOf(b);S!==-1&&(C.lines.splice(S,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};y=c([f(0,m.IBufferService)],y),n.OscLinkService=y},8343:(p,n)=>{function s(c,f,m){f.di$target===f?f.di$dependencies.push({id:c,index:m}):(f.di$dependencies=[{id:c,index:m}],f.di$target=f)}Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0,n.serviceRegistry=new Map,n.getServiceDependencies=function(c){return c.di$dependencies||[]},n.createDecorator=function(c){if(n.serviceRegistry.has(c))return n.serviceRegistry.get(c);const f=function(m,y,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");s(f,m,C)};return f.toString=()=>c,n.serviceRegistry.set(c,f),f}},2585:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const c=s(8343);var f;n.IBufferService=(0,c.createDecorator)("BufferService"),n.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),n.ICoreService=(0,c.createDecorator)("CoreService"),n.ICharsetService=(0,c.createDecorator)("CharsetService"),n.IInstantiationService=(0,c.createDecorator)("InstantiationService"),(f=n.LogLevelEnum||(n.LogLevelEnum={}))[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR",f[f.OFF=4]="OFF",n.ILogService=(0,c.createDecorator)("LogService"),n.IOptionsService=(0,c.createDecorator)("OptionsService"),n.IOscLinkService=(0,c.createDecorator)("OscLinkService"),n.IUnicodeService=(0,c.createDecorator)("UnicodeService"),n.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(p,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeService=void 0;const c=s(8460),f=s(225);n.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const m=new f.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let y=0;const C=m.length;for(let b=0;b<C;++b){let S=m.charCodeAt(b);if(55296<=S&&S<=56319){if(++b>=C)return y+this.wcwidth(S);const u=m.charCodeAt(b);56320<=u&&u<=57343?S=1024*(S-55296)+u-56320+65536:y+=this.wcwidth(u)}y+=this.wcwidth(S)}return y}}}},i={};function o(p){var n=i[p];if(n!==void 0)return n.exports;var s=i[p]={exports:{}};return r[p].call(s.exports,s,s.exports,o),s.exports}var l={};return(()=>{var p=l;Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;const n=o(3236),s=o(9042),c=o(7975),f=o(7090),m=o(5741),y=o(8285),C=["cols","rows"];p.Terminal=class{constructor(b){this._core=new n.Terminal(b),this._addonManager=new m.AddonManager,this._publicOptions=Object.assign({},this._core.options);const S=_=>this._core.options[_],u=(_,v)=>{this._checkReadonlyOptions(_),this._core.options[_]=v};for(const _ in this._core.options){const v={get:S.bind(this,_),set:u.bind(this,_)};Object.defineProperty(this._publicOptions,_,v)}}_checkReadonlyOptions(b){if(C.includes(b))throw new Error(`Option "${b}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new c.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new y.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const b=this._core.coreService.decPrivateModes;let S="none";switch(this._core.coreMouseService.activeProtocol){case"X10":S="x10";break;case"VT200":S="vt200";break;case"DRAG":S="drag";break;case"ANY":S="any"}return{applicationCursorKeysMode:b.applicationCursorKeys,applicationKeypadMode:b.applicationKeypad,bracketedPasteMode:b.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:S,originMode:b.origin,reverseWraparoundMode:b.reverseWraparound,sendFocusMode:b.sendFocus,wraparoundMode:b.wraparound}}get options(){return this._publicOptions}set options(b){for(const S in b)this._publicOptions[S]=b[S]}blur(){this._core.blur()}focus(){this._core.focus()}resize(b,S){this._verifyIntegers(b,S),this._core.resize(b,S)}open(b){this._core.open(b)}attachCustomKeyEventHandler(b){this._core.attachCustomKeyEventHandler(b)}registerLinkProvider(b){return this._core.registerLinkProvider(b)}registerCharacterJoiner(b){return this._checkProposedApi(),this._core.registerCharacterJoiner(b)}deregisterCharacterJoiner(b){this._checkProposedApi(),this._core.deregisterCharacterJoiner(b)}registerMarker(b=0){return this._verifyIntegers(b),this._core.addMarker(b)}registerDecoration(b){var S,u,_;return this._checkProposedApi(),this._verifyPositiveIntegers((S=b.x)!==null&&S!==void 0?S:0,(u=b.width)!==null&&u!==void 0?u:0,(_=b.height)!==null&&_!==void 0?_:0),this._core.registerDecoration(b)}hasSelection(){return this._core.hasSelection()}select(b,S,u){this._verifyIntegers(b,S,u),this._core.select(b,S,u)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(b,S){this._verifyIntegers(b,S),this._core.selectLines(b,S)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(b){this._verifyIntegers(b),this._core.scrollLines(b)}scrollPages(b){this._verifyIntegers(b),this._core.scrollPages(b)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(b){this._verifyIntegers(b),this._core.scrollToLine(b)}clear(){this._core.clear()}write(b,S){this._core.write(b,S)}writeln(b,S){this._core.write(b),this._core.write(`\r
`,S)}paste(b){this._core.paste(b)}refresh(b,S){this._verifyIntegers(b,S),this._core.refresh(b,S)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(b){return this._addonManager.loadAddon(this,b)}static get strings(){return s}_verifyIntegers(...b){for(const S of b)if(S===1/0||isNaN(S)||S%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...b){for(const S of b)if(S&&(S===1/0||isNaN(S)||S%1!=0||S<0))throw new Error("This API only accepts positive integers")}}})(),l})())})(Of);var Wy=Of.exports;function zy(t){let e=new Wy.Terminal;const r=new jy.FitAddon,i=new Uy.SearchAddon;return e.loadAddon(r),e.loadAddon(i),e.open(document.querySelector(t)),e.options.fontFamily="MesloLGS NF",e.options.fontSize=16,e.options.fontWeight=500,e.options.theme={black:"#000000",red:"#c13900",green:"#a4a900",yellow:"#caaf00",blue:"#bd6d00",magenta:"#fc5e00",cyan:"#f79500",white:"#ffc88a",brightBlack:"#6a4f2a",brightRed:"#ff8c68",brightGreen:"#f6ff40",brightYellow:"#ffe36e",brightBlue:"#ffbe55",brightMagenta:"#fc874f",brightCyan:"#c69752",brightWhite:"#fafaff",background:"#3a2f29",foreground:"#ffcb83",selectionBackground:"#c14020",cursor:"#fc531d"},e.onKey(({key:o})=>{console.log(o),e.hasSelection()&&o===""&&document.execCommand("copy")}),e.resize(100,18),r.fit(),e.onRender(()=>{r.fit()}),document.term=e,e}const Do=document.querySelector("input#hostPeerID"),Ca=document.querySelector("#chatInput"),If=document.querySelector("#myPeerID"),ql=document.querySelector("#knownPeers"),Vy=document.querySelector("button#resetPeerID"),qy=document.querySelector("button#startButton"),Ky=document.querySelector("button#startAsyncButton"),Gy=document.querySelector("button#stopButton"),Yy=document.querySelector("button#connect"),Jy=document.querySelector("#sendMessageButton"),Kl=document.querySelector("#show-qr");document.querySelector("#scan-qr");document.querySelector("#qrr");document.querySelector("#canvas");document.querySelector("div#test");var Ir=zy("#terminal");/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:Bf,setPrototypeOf:Gl,isFrozen:Xy,getPrototypeOf:Qy,getOwnPropertyDescriptor:Zy}=Object;let{freeze:gt,seal:Yt,create:eS}=Object,{apply:Ea,construct:wa}=typeof Reflect<"u"&&Reflect;Ea||(Ea=function(e,r,i){return e.apply(r,i)});gt||(gt=function(e){return e});Yt||(Yt=function(e){return e});wa||(wa=function(e,r){return new e(...r)});const tS=jt(Array.prototype.forEach),Yl=jt(Array.prototype.pop),rn=jt(Array.prototype.push),cs=jt(String.prototype.toLowerCase),Lo=jt(String.prototype.toString),rS=jt(String.prototype.match),Kt=jt(String.prototype.replace),iS=jt(String.prototype.indexOf),nS=jt(String.prototype.trim),Tt=jt(RegExp.prototype.test),nn=sS(TypeError);function jt(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return Ea(t,e,i)}}function sS(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return wa(t,r)}}function Le(t,e,r){var i;r=(i=r)!==null&&i!==void 0?i:cs,Gl&&Gl(t,null);let o=e.length;for(;o--;){let l=e[o];if(typeof l=="string"){const p=r(l);p!==l&&(Xy(e)||(e[o]=p),l=p)}t[l]=!0}return t}function mi(t){const e=eS(null);for(const[r,i]of Bf(t))e[r]=i;return e}function Xn(t,e){for(;t!==null;){const i=Zy(t,e);if(i){if(i.get)return jt(i.get);if(typeof i.value=="function")return jt(i.value)}t=Qy(t)}function r(i){return console.warn("fallback value for",i),null}return r}const Jl=gt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Po=gt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Oo=gt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oS=gt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Mo=gt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),aS=gt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xl=gt(["#text"]),Ql=gt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Io=gt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zl=gt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qn=gt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cS=Yt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lS=Yt(/<%[\w\W]*|[\w\W]*%>/gm),hS=Yt(/\${[\w\W]*}/gm),uS=Yt(/^data-[\-\w.\u00B7-\uFFFF]/),fS=Yt(/^aria-[\-\w]+$/),Nf=Yt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),dS=Yt(/^(?:\w+script|data):/i),pS=Yt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Hf=Yt(/^html$/i);var eh=Object.freeze({__proto__:null,MUSTACHE_EXPR:cS,ERB_EXPR:lS,TMPLIT_EXPR:hS,DATA_ATTR:uS,ARIA_ATTR:fS,IS_ALLOWED_URI:Nf,IS_SCRIPT_OR_DATA:dS,ATTR_WHITESPACE:pS,DOCTYPE_NAME:Hf});const _S=()=>typeof window>"u"?null:window,gS=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const o="data-tt-policy-suffix";r&&r.hasAttribute(o)&&(i=r.getAttribute(o));const l="dompurify"+(i?"#"+i:"");try{return e.createPolicy(l,{createHTML(p){return p},createScriptURL(p){return p}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function $f(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_S();const e=Ee=>$f(Ee);if(e.version="3.0.5",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;const r=t.document,i=r.currentScript;let{document:o}=t;const{DocumentFragment:l,HTMLTemplateElement:p,Node:n,Element:s,NodeFilter:c,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:y,trustedTypes:C}=t,b=s.prototype,S=Xn(b,"cloneNode"),u=Xn(b,"nextSibling"),_=Xn(b,"childNodes"),v=Xn(b,"parentNode");if(typeof p=="function"){const Ee=o.createElement("template");Ee.content&&Ee.content.ownerDocument&&(o=Ee.content.ownerDocument)}let g,E="";const{implementation:T,createNodeIterator:R,createDocumentFragment:h,getElementsByTagName:A}=o,{importNode:x}=r;let O={};e.isSupported=typeof Bf=="function"&&typeof v=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:N,TMPLIT_EXPR:B,DATA_ATTR:ee,ARIA_ATTR:ue,IS_SCRIPT_OR_DATA:se,ATTR_WHITESPACE:M}=eh;let{IS_ALLOWED_URI:F}=eh,j=null;const q=Le({},[...Jl,...Po,...Oo,...Mo,...Xl]);let te=null;const ge=Le({},[...Ql,...Io,...Zl,...Qn]);let me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),oe=null,pe=null,z=!0,W=!0,Y=!1,re=!0,ae=!1,Pe=!1,de=!1,Fe=!1,Ue=!1,ze=!1,Oe=!1,Dt=!0,mt=!1;const Fi="user-content-";let Et=!0,Lt=!1,Xe={},lt=null;const Pt=Le({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let be=null;const Qe=Le({},["audio","video","img","source","image","track"]);let Er=null;const Wr=Le({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ni="http://www.w3.org/1998/Math/MathML",zr="http://www.w3.org/2000/svg",Ot="http://www.w3.org/1999/xhtml";let Mt=Ot,wt=!1,Wt=null;const wr=Le({},[ni,zr,Ot],Lo);let fr;const si=["application/xhtml+xml","text/html"],kn="text/html";let Ye,Tr=null;const Ar=o.createElement("form"),kr=function(K){return K instanceof RegExp||K instanceof Function},oi=function(K){if(!(Tr&&Tr===K)){if((!K||typeof K!="object")&&(K={}),K=mi(K),fr=si.indexOf(K.PARSER_MEDIA_TYPE)===-1?fr=kn:fr=K.PARSER_MEDIA_TYPE,Ye=fr==="application/xhtml+xml"?Lo:cs,j="ALLOWED_TAGS"in K?Le({},K.ALLOWED_TAGS,Ye):q,te="ALLOWED_ATTR"in K?Le({},K.ALLOWED_ATTR,Ye):ge,Wt="ALLOWED_NAMESPACES"in K?Le({},K.ALLOWED_NAMESPACES,Lo):wr,Er="ADD_URI_SAFE_ATTR"in K?Le(mi(Wr),K.ADD_URI_SAFE_ATTR,Ye):Wr,be="ADD_DATA_URI_TAGS"in K?Le(mi(Qe),K.ADD_DATA_URI_TAGS,Ye):Qe,lt="FORBID_CONTENTS"in K?Le({},K.FORBID_CONTENTS,Ye):Pt,oe="FORBID_TAGS"in K?Le({},K.FORBID_TAGS,Ye):{},pe="FORBID_ATTR"in K?Le({},K.FORBID_ATTR,Ye):{},Xe="USE_PROFILES"in K?K.USE_PROFILES:!1,z=K.ALLOW_ARIA_ATTR!==!1,W=K.ALLOW_DATA_ATTR!==!1,Y=K.ALLOW_UNKNOWN_PROTOCOLS||!1,re=K.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ae=K.SAFE_FOR_TEMPLATES||!1,Pe=K.WHOLE_DOCUMENT||!1,Ue=K.RETURN_DOM||!1,ze=K.RETURN_DOM_FRAGMENT||!1,Oe=K.RETURN_TRUSTED_TYPE||!1,Fe=K.FORCE_BODY||!1,Dt=K.SANITIZE_DOM!==!1,mt=K.SANITIZE_NAMED_PROPS||!1,Et=K.KEEP_CONTENT!==!1,Lt=K.IN_PLACE||!1,F=K.ALLOWED_URI_REGEXP||Nf,Mt=K.NAMESPACE||Ot,me=K.CUSTOM_ELEMENT_HANDLING||{},K.CUSTOM_ELEMENT_HANDLING&&kr(K.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(me.tagNameCheck=K.CUSTOM_ELEMENT_HANDLING.tagNameCheck),K.CUSTOM_ELEMENT_HANDLING&&kr(K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(me.attributeNameCheck=K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),K.CUSTOM_ELEMENT_HANDLING&&typeof K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(me.allowCustomizedBuiltInElements=K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ae&&(W=!1),ze&&(Ue=!0),Xe&&(j=Le({},[...Xl]),te=[],Xe.html===!0&&(Le(j,Jl),Le(te,Ql)),Xe.svg===!0&&(Le(j,Po),Le(te,Io),Le(te,Qn)),Xe.svgFilters===!0&&(Le(j,Oo),Le(te,Io),Le(te,Qn)),Xe.mathMl===!0&&(Le(j,Mo),Le(te,Zl),Le(te,Qn))),K.ADD_TAGS&&(j===q&&(j=mi(j)),Le(j,K.ADD_TAGS,Ye)),K.ADD_ATTR&&(te===ge&&(te=mi(te)),Le(te,K.ADD_ATTR,Ye)),K.ADD_URI_SAFE_ATTR&&Le(Er,K.ADD_URI_SAFE_ATTR,Ye),K.FORBID_CONTENTS&&(lt===Pt&&(lt=mi(lt)),Le(lt,K.FORBID_CONTENTS,Ye)),Et&&(j["#text"]=!0),Pe&&Le(j,["html","head","body"]),j.table&&(Le(j,["tbody"]),delete oe.tbody),K.TRUSTED_TYPES_POLICY){if(typeof K.TRUSTED_TYPES_POLICY.createHTML!="function")throw nn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof K.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw nn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');g=K.TRUSTED_TYPES_POLICY,E=g.createHTML("")}else g===void 0&&(g=gS(C,i)),g!==null&&typeof E=="string"&&(E=g.createHTML(""));gt&&gt(K),Tr=K}},ji=Le({},["mi","mo","mn","ms","mtext"]),ht=Le({},["foreignobject","desc","title","annotation-xml"]),nt=Le({},["title","style","font","a","script"]),Rr=Le({},Po);Le(Rr,Oo),Le(Rr,oS);const Ui=Le({},Mo);Le(Ui,aS);const Rn=function(K){let he=v(K);(!he||!he.tagName)&&(he={namespaceURI:Mt,tagName:"template"});const _e=cs(K.tagName),$e=cs(he.tagName);return Wt[K.namespaceURI]?K.namespaceURI===zr?he.namespaceURI===Ot?_e==="svg":he.namespaceURI===ni?_e==="svg"&&($e==="annotation-xml"||ji[$e]):!!Rr[_e]:K.namespaceURI===ni?he.namespaceURI===Ot?_e==="math":he.namespaceURI===zr?_e==="math"&&ht[$e]:!!Ui[_e]:K.namespaceURI===Ot?he.namespaceURI===zr&&!ht[$e]||he.namespaceURI===ni&&!ji[$e]?!1:!Ui[_e]&&(nt[_e]||!Rr[_e]):!!(fr==="application/xhtml+xml"&&Wt[K.namespaceURI]):!1},Xt=function(K){rn(e.removed,{element:K});try{K.parentNode.removeChild(K)}catch{K.remove()}},Qt=function(K,he){try{rn(e.removed,{attribute:he.getAttributeNode(K),from:he})}catch{rn(e.removed,{attribute:null,from:he})}if(he.removeAttribute(K),K==="is"&&!te[K])if(Ue||ze)try{Xt(he)}catch{}else try{he.setAttribute(K,"")}catch{}},dr=function(K){let he,_e;if(Fe)K="<remove></remove>"+K;else{const ut=rS(K,/^[\r\n\t ]+/);_e=ut&&ut[0]}fr==="application/xhtml+xml"&&Mt===Ot&&(K='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+K+"</body></html>");const $e=g?g.createHTML(K):K;if(Mt===Ot)try{he=new y().parseFromString($e,fr)}catch{}if(!he||!he.documentElement){he=T.createDocument(Mt,"template",null);try{he.documentElement.innerHTML=wt?E:$e}catch{}}const Ke=he.body||he.documentElement;return K&&_e&&Ke.insertBefore(o.createTextNode(_e),Ke.childNodes[0]||null),Mt===Ot?A.call(he,Pe?"html":"body")[0]:Pe?he.documentElement:Ke},ai=function(K){return R.call(K.ownerDocument||K,K,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},ci=function(K){return K instanceof m&&(typeof K.nodeName!="string"||typeof K.textContent!="string"||typeof K.removeChild!="function"||!(K.attributes instanceof f)||typeof K.removeAttribute!="function"||typeof K.setAttribute!="function"||typeof K.namespaceURI!="string"||typeof K.insertBefore!="function"||typeof K.hasChildNodes!="function")},li=function(K){return typeof n=="object"?K instanceof n:K&&typeof K=="object"&&typeof K.nodeType=="number"&&typeof K.nodeName=="string"},zt=function(K,he,_e){O[K]&&tS(O[K],$e=>{$e.call(e,he,_e,Tr)})},xn=function(K){let he;if(zt("beforeSanitizeElements",K,null),ci(K))return Xt(K),!0;const _e=Ye(K.nodeName);if(zt("uponSanitizeElement",K,{tagName:_e,allowedTags:j}),K.hasChildNodes()&&!li(K.firstElementChild)&&(!li(K.content)||!li(K.content.firstElementChild))&&Tt(/<[/\w]/g,K.innerHTML)&&Tt(/<[/\w]/g,K.textContent))return Xt(K),!0;if(!j[_e]||oe[_e]){if(!oe[_e]&&Dn(_e)&&(me.tagNameCheck instanceof RegExp&&Tt(me.tagNameCheck,_e)||me.tagNameCheck instanceof Function&&me.tagNameCheck(_e)))return!1;if(Et&&!lt[_e]){const $e=v(K)||K.parentNode,Ke=_(K)||K.childNodes;if(Ke&&$e){const ut=Ke.length;for(let qe=ut-1;qe>=0;--qe)$e.insertBefore(S(Ke[qe],!0),u(K))}}return Xt(K),!0}return K instanceof s&&!Rn(K)||(_e==="noscript"||_e==="noembed"||_e==="noframes")&&Tt(/<\/no(script|embed|frames)/i,K.innerHTML)?(Xt(K),!0):(ae&&K.nodeType===3&&(he=K.textContent,he=Kt(he,H," "),he=Kt(he,N," "),he=Kt(he,B," "),K.textContent!==he&&(rn(e.removed,{element:K.cloneNode()}),K.textContent=he)),zt("afterSanitizeElements",K,null),!1)},Wi=function(K,he,_e){if(Dt&&(he==="id"||he==="name")&&(_e in o||_e in Ar))return!1;if(!(W&&!pe[he]&&Tt(ee,he))){if(!(z&&Tt(ue,he))){if(!te[he]||pe[he]){if(!(Dn(K)&&(me.tagNameCheck instanceof RegExp&&Tt(me.tagNameCheck,K)||me.tagNameCheck instanceof Function&&me.tagNameCheck(K))&&(me.attributeNameCheck instanceof RegExp&&Tt(me.attributeNameCheck,he)||me.attributeNameCheck instanceof Function&&me.attributeNameCheck(he))||he==="is"&&me.allowCustomizedBuiltInElements&&(me.tagNameCheck instanceof RegExp&&Tt(me.tagNameCheck,_e)||me.tagNameCheck instanceof Function&&me.tagNameCheck(_e))))return!1}else if(!Er[he]){if(!Tt(F,Kt(_e,M,""))){if(!((he==="src"||he==="xlink:href"||he==="href")&&K!=="script"&&iS(_e,"data:")===0&&be[K])){if(!(Y&&!Tt(se,Kt(_e,M,"")))){if(_e)return!1}}}}}}return!0},Dn=function(K){return K.indexOf("-")>0},Ln=function(K){let he,_e,$e,Ke;zt("beforeSanitizeAttributes",K,null);const{attributes:ut}=K;if(!ut)return;const qe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:te};for(Ke=ut.length;Ke--;){he=ut[Ke];const{name:st,namespaceURI:hi}=he;if(_e=st==="value"?he.value:nS(he.value),$e=Ye(st),qe.attrName=$e,qe.attrValue=_e,qe.keepAttr=!0,qe.forceKeepAttr=void 0,zt("uponSanitizeAttribute",K,qe),_e=qe.attrValue,qe.forceKeepAttr||(Qt(st,K),!qe.keepAttr))continue;if(!re&&Tt(/\/>/i,_e)){Qt(st,K);continue}ae&&(_e=Kt(_e,H," "),_e=Kt(_e,N," "),_e=Kt(_e,B," "));const zi=Ye(K.nodeName);if(Wi(zi,$e,_e)){if(mt&&($e==="id"||$e==="name")&&(Qt(st,K),_e=Fi+_e),g&&typeof C=="object"&&typeof C.getAttributeType=="function"&&!hi)switch(C.getAttributeType(zi,$e)){case"TrustedHTML":{_e=g.createHTML(_e);break}case"TrustedScriptURL":{_e=g.createScriptURL(_e);break}}try{hi?K.setAttributeNS(hi,st,_e):K.setAttribute(st,_e),Yl(e.removed)}catch{}}}zt("afterSanitizeAttributes",K,null)},Pn=function Ee(K){let he;const _e=ai(K);for(zt("beforeSanitizeShadowDOM",K,null);he=_e.nextNode();)zt("uponSanitizeShadowNode",he,null),!xn(he)&&(he.content instanceof l&&Ee(he.content),Ln(he));zt("afterSanitizeShadowDOM",K,null)};return e.sanitize=function(Ee){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he,_e,$e,Ke;if(wt=!Ee,wt&&(Ee="<!-->"),typeof Ee!="string"&&!li(Ee))if(typeof Ee.toString=="function"){if(Ee=Ee.toString(),typeof Ee!="string")throw nn("dirty is not a string, aborting")}else throw nn("toString is not a function");if(!e.isSupported)return Ee;if(de||oi(K),e.removed=[],typeof Ee=="string"&&(Lt=!1),Lt){if(Ee.nodeName){const st=Ye(Ee.nodeName);if(!j[st]||oe[st])throw nn("root node is forbidden and cannot be sanitized in-place")}}else if(Ee instanceof n)he=dr("<!---->"),_e=he.ownerDocument.importNode(Ee,!0),_e.nodeType===1&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?he=_e:he.appendChild(_e);else{if(!Ue&&!ae&&!Pe&&Ee.indexOf("<")===-1)return g&&Oe?g.createHTML(Ee):Ee;if(he=dr(Ee),!he)return Ue?null:Oe?E:""}he&&Fe&&Xt(he.firstChild);const ut=ai(Lt?Ee:he);for(;$e=ut.nextNode();)xn($e)||($e.content instanceof l&&Pn($e.content),Ln($e));if(Lt)return Ee;if(Ue){if(ze)for(Ke=h.call(he.ownerDocument);he.firstChild;)Ke.appendChild(he.firstChild);else Ke=he;return(te.shadowroot||te.shadowrootmode)&&(Ke=x.call(r,Ke,!0)),Ke}let qe=Pe?he.outerHTML:he.innerHTML;return Pe&&j["!doctype"]&&he.ownerDocument&&he.ownerDocument.doctype&&he.ownerDocument.doctype.name&&Tt(Hf,he.ownerDocument.doctype.name)&&(qe="<!DOCTYPE "+he.ownerDocument.doctype.name+`>
`+qe),ae&&(qe=Kt(qe,H," "),qe=Kt(qe,N," "),qe=Kt(qe,B," ")),g&&Oe?g.createHTML(qe):qe},e.setConfig=function(Ee){oi(Ee),de=!0},e.clearConfig=function(){Tr=null,de=!1},e.isValidAttribute=function(Ee,K,he){Tr||oi({});const _e=Ye(Ee),$e=Ye(K);return Wi(_e,$e,he)},e.addHook=function(Ee,K){typeof K=="function"&&(O[Ee]=O[Ee]||[],rn(O[Ee],K))},e.removeHook=function(Ee){if(O[Ee])return Yl(O[Ee])},e.removeHooks=function(Ee){O[Ee]&&(O[Ee]=[])},e.removeAllHooks=function(){O={}},e}var mS=$f();function th(t){let e=Ca.value;Ca.value="",Ir.writeln(`Me: ${Li(e)}`),t.broadcastMessage({chatMessage:e})}function vS(t,e){e&&Ir.writeln(`${Li(t)}: ${Li(e==null?void 0:e.chatMessage)}`)}function Li(t){return mS.sanitize(t)}function yS(t,e,r){e?(console.log(`Connected to: ${t}`),Ir.writeln(`Connected to: ${t}`)):(console.log(`Failed to connect to: ${t}`),Ir.writeln(`Failed to connect to: ${t}`)),Ff(r)}function SS(t,e){console.log(`Disconnected from: ${t}`),Ir.writeln(`Disconnected from: ${t}`),Ff(e)}function Ff(t){ql.innerHTML="",t.getPeers(!0).forEach((e,r)=>{ql.innerHTML+=`<li class="list-group-item ${e==t.peer.id?"list-group-item-light":""}"> <span style="user-select:none">${r}: </span><span>${Li(e)} </span></li>`})}var Tn={},bS=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},jf={},xt={};let oc;const CS=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];xt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};xt.getSymbolTotalCodewords=function(e){return CS[e]};xt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};xt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');oc=e};xt.isKanjiModeEnabled=function(){return typeof oc<"u"};xt.toSJIS=function(e){return oc(e)};var $s={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,o){if(t.isValid(i))return i;try{return e(i)}catch{return o}}})($s);function Uf(){this.buffer=[],this.length=0}Uf.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ES=Uf;function An(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}An.prototype.set=function(t,e,r,i){const o=t*this.size+e;this.data[o]=r,i&&(this.reservedBit[o]=!0)};An.prototype.get=function(t,e){return this.data[t*this.size+e]};An.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};An.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var wS=An,Wf={};(function(t){const e=xt.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,l=e(i),p=l===145?26:Math.ceil((l-13)/(2*o-2))*2,n=[l-7];for(let s=1;s<o-1;s++)n[s]=n[s-1]-p;return n.push(6),n.reverse()},t.getPositions=function(i){const o=[],l=t.getRowColCoords(i),p=l.length;for(let n=0;n<p;n++)for(let s=0;s<p;s++)n===0&&s===0||n===0&&s===p-1||n===p-1&&s===0||o.push([l[n],l[s]]);return o}})(Wf);var zf={};const TS=xt.getSymbolSize,rh=7;zf.getPositions=function(e){const r=TS(e);return[[0,0],[r-rh,0],[0,r-rh]]};var Vf={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const l=o.size;let p=0,n=0,s=0,c=null,f=null;for(let m=0;m<l;m++){n=s=0,c=f=null;for(let y=0;y<l;y++){let C=o.get(m,y);C===c?n++:(n>=5&&(p+=e.N1+(n-5)),c=C,n=1),C=o.get(y,m),C===f?s++:(s>=5&&(p+=e.N1+(s-5)),f=C,s=1)}n>=5&&(p+=e.N1+(n-5)),s>=5&&(p+=e.N1+(s-5))}return p},t.getPenaltyN2=function(o){const l=o.size;let p=0;for(let n=0;n<l-1;n++)for(let s=0;s<l-1;s++){const c=o.get(n,s)+o.get(n,s+1)+o.get(n+1,s)+o.get(n+1,s+1);(c===4||c===0)&&p++}return p*e.N2},t.getPenaltyN3=function(o){const l=o.size;let p=0,n=0,s=0;for(let c=0;c<l;c++){n=s=0;for(let f=0;f<l;f++)n=n<<1&2047|o.get(c,f),f>=10&&(n===1488||n===93)&&p++,s=s<<1&2047|o.get(f,c),f>=10&&(s===1488||s===93)&&p++}return p*e.N3},t.getPenaltyN4=function(o){let l=0;const p=o.data.length;for(let s=0;s<p;s++)l+=o.data[s];return Math.abs(Math.ceil(l*100/p/5)-10)*e.N4};function r(i,o,l){switch(i){case t.Patterns.PATTERN000:return(o+l)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(o+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return o*l%2+o*l%3===0;case t.Patterns.PATTERN110:return(o*l%2+o*l%3)%2===0;case t.Patterns.PATTERN111:return(o*l%3+(o+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(o,l){const p=l.size;for(let n=0;n<p;n++)for(let s=0;s<p;s++)l.isReserved(s,n)||l.xor(s,n,r(o,s,n))},t.getBestMask=function(o,l){const p=Object.keys(t.Patterns).length;let n=0,s=1/0;for(let c=0;c<p;c++){l(c),t.applyMask(c,o);const f=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(c,o),f<s&&(s=f,n=c)}return n}})(Vf);var Fs={};const Or=$s,Zn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],es=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Fs.getBlocksCount=function(e,r){switch(r){case Or.L:return Zn[(e-1)*4+0];case Or.M:return Zn[(e-1)*4+1];case Or.Q:return Zn[(e-1)*4+2];case Or.H:return Zn[(e-1)*4+3];default:return}};Fs.getTotalCodewordsCount=function(e,r){switch(r){case Or.L:return es[(e-1)*4+0];case Or.M:return es[(e-1)*4+1];case Or.Q:return es[(e-1)*4+2];case Or.H:return es[(e-1)*4+3];default:return}};var qf={},js={};const dn=new Uint8Array(512),Es=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)dn[r]=e,Es[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)dn[r]=dn[r-255]})();js.log=function(e){if(e<1)throw new Error("log("+e+")");return Es[e]};js.exp=function(e){return dn[e]};js.mul=function(e,r){return e===0||r===0?0:dn[Es[e]+Es[r]]};(function(t){const e=js;t.mul=function(i,o){const l=new Uint8Array(i.length+o.length-1);for(let p=0;p<i.length;p++)for(let n=0;n<o.length;n++)l[p+n]^=e.mul(i[p],o[n]);return l},t.mod=function(i,o){let l=new Uint8Array(i);for(;l.length-o.length>=0;){const p=l[0];for(let s=0;s<o.length;s++)l[s]^=e.mul(o[s],p);let n=0;for(;n<l.length&&l[n]===0;)n++;l=l.slice(n)}return l},t.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let l=0;l<i;l++)o=t.mul(o,new Uint8Array([1,e.exp(l)]));return o}})(qf);const Kf=qf;function ac(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}ac.prototype.initialize=function(e){this.degree=e,this.genPoly=Kf.generateECPolynomial(this.degree)};ac.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const i=Kf.mod(r,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i};var AS=ac,Gf={},Ur={},cc={};cc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ur={};const Yf="[0-9]+",kS="[A-Z $%*+\\-./:]+";let mn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";mn=mn.replace(/u/g,"\\u");const RS="(?:(?![A-Z0-9 $%*+\\-./:]|"+mn+`)(?:.|[\r
]))+`;ur.KANJI=new RegExp(mn,"g");ur.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ur.BYTE=new RegExp(RS,"g");ur.NUMERIC=new RegExp(Yf,"g");ur.ALPHANUMERIC=new RegExp(kS,"g");const xS=new RegExp("^"+mn+"$"),DS=new RegExp("^"+Yf+"$"),LS=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ur.testKanji=function(e){return xS.test(e)};ur.testNumeric=function(e){return DS.test(e)};ur.testAlphanumeric=function(e){return LS.test(e)};(function(t){const e=cc,r=ur;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,p){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(p))throw new Error("Invalid version: "+p);return p>=1&&p<10?l.ccBits[0]:p<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return r.testNumeric(l)?t.NUMERIC:r.testAlphanumeric(l)?t.ALPHANUMERIC:r.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(l,p){if(t.isValid(l))return l;try{return i(l)}catch{return p}}})(Ur);(function(t){const e=xt,r=Fs,i=$s,o=Ur,l=cc,p=7973,n=e.getBCHDigit(p);function s(y,C,b){for(let S=1;S<=40;S++)if(C<=t.getCapacity(S,b,y))return S}function c(y,C){return o.getCharCountIndicator(y,C)+4}function f(y,C){let b=0;return y.forEach(function(S){const u=c(S.mode,C);b+=u+S.getBitsLength()}),b}function m(y,C){for(let b=1;b<=40;b++)if(f(y,b)<=t.getCapacity(b,C,o.MIXED))return b}t.from=function(C,b){return l.isValid(C)?parseInt(C,10):b},t.getCapacity=function(C,b,S){if(!l.isValid(C))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=o.BYTE);const u=e.getSymbolTotalCodewords(C),_=r.getTotalCodewordsCount(C,b),v=(u-_)*8;if(S===o.MIXED)return v;const g=v-c(S,C);switch(S){case o.NUMERIC:return Math.floor(g/10*3);case o.ALPHANUMERIC:return Math.floor(g/11*2);case o.KANJI:return Math.floor(g/13);case o.BYTE:default:return Math.floor(g/8)}},t.getBestVersionForData=function(C,b){let S;const u=i.from(b,i.M);if(Array.isArray(C)){if(C.length>1)return m(C,u);if(C.length===0)return 1;S=C[0]}else S=C;return s(S.mode,S.getLength(),u)},t.getEncodedBits=function(C){if(!l.isValid(C)||C<7)throw new Error("Invalid QR Code version");let b=C<<12;for(;e.getBCHDigit(b)-n>=0;)b^=p<<e.getBCHDigit(b)-n;return C<<12|b}})(Gf);var Jf={};const Ta=xt,Xf=1335,PS=21522,ih=Ta.getBCHDigit(Xf);Jf.getEncodedBits=function(e,r){const i=e.bit<<3|r;let o=i<<10;for(;Ta.getBCHDigit(o)-ih>=0;)o^=Xf<<Ta.getBCHDigit(o)-ih;return(i<<10|o)^PS};var Qf={};const OS=Ur;function Pi(t){this.mode=OS.NUMERIC,this.data=t.toString()}Pi.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Pi.prototype.getLength=function(){return this.data.length};Pi.prototype.getBitsLength=function(){return Pi.getBitsLength(this.data.length)};Pi.prototype.write=function(e){let r,i,o;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),o=parseInt(i,10),e.put(o,10);const l=this.data.length-r;l>0&&(i=this.data.substr(r),o=parseInt(i,10),e.put(o,l*3+1))};var MS=Pi;const IS=Ur,Bo=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Oi(t){this.mode=IS.ALPHANUMERIC,this.data=t}Oi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Oi.prototype.getLength=function(){return this.data.length};Oi.prototype.getBitsLength=function(){return Oi.getBitsLength(this.data.length)};Oi.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let i=Bo.indexOf(this.data[r])*45;i+=Bo.indexOf(this.data[r+1]),e.put(i,11)}this.data.length%2&&e.put(Bo.indexOf(this.data[r]),6)};var BS=Oi,NS=function(e){for(var r=[],i=e.length,o=0;o<i;o++){var l=e.charCodeAt(o);if(l>=55296&&l<=56319&&i>o+1){var p=e.charCodeAt(o+1);p>=56320&&p<=57343&&(l=(l-55296)*1024+p-56320+65536,o+=1)}if(l<128){r.push(l);continue}if(l<2048){r.push(l>>6|192),r.push(l&63|128);continue}if(l<55296||l>=57344&&l<65536){r.push(l>>12|224),r.push(l>>6&63|128),r.push(l&63|128);continue}if(l>=65536&&l<=1114111){r.push(l>>18|240),r.push(l>>12&63|128),r.push(l>>6&63|128),r.push(l&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const HS=NS,$S=Ur;function Mi(t){this.mode=$S.BYTE,typeof t=="string"&&(t=HS(t)),this.data=new Uint8Array(t)}Mi.getBitsLength=function(e){return e*8};Mi.prototype.getLength=function(){return this.data.length};Mi.prototype.getBitsLength=function(){return Mi.getBitsLength(this.data.length)};Mi.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var FS=Mi;const jS=Ur,US=xt;function Ii(t){this.mode=jS.KANJI,this.data=t}Ii.getBitsLength=function(e){return e*13};Ii.prototype.getLength=function(){return this.data.length};Ii.prototype.getBitsLength=function(){return Ii.getBitsLength(this.data.length)};Ii.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=US.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var WS=Ii,Zf={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,i,o){var l={},p={};p[i]=0;var n=e.PriorityQueue.make();n.push(i,0);for(var s,c,f,m,y,C,b,S,u;!n.empty();){s=n.pop(),c=s.value,m=s.cost,y=r[c]||{};for(f in y)y.hasOwnProperty(f)&&(C=y[f],b=m+C,S=p[f],u=typeof p[f]>"u",(u||S>b)&&(p[f]=b,n.push(f,b),l[f]=c))}if(typeof o<"u"&&typeof p[o]>"u"){var _=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(_)}return l},extract_shortest_path_from_predecessor_list:function(r,i){for(var o=[],l=i;l;)o.push(l),r[l],l=r[l];return o.reverse(),o},find_path:function(r,i,o){var l=e.single_source_shortest_paths(r,i,o);return e.extract_shortest_path_from_predecessor_list(l,o)},PriorityQueue:{make:function(r){var i=e.PriorityQueue,o={},l;r=r||{};for(l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);return o.queue=[],o.sorter=r.sorter||i.default_sorter,o},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var o={value:r,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Zf);var zS=Zf.exports;(function(t){const e=Ur,r=MS,i=BS,o=FS,l=WS,p=ur,n=xt,s=zS;function c(_){return unescape(encodeURIComponent(_)).length}function f(_,v,g){const E=[];let T;for(;(T=_.exec(g))!==null;)E.push({data:T[0],index:T.index,mode:v,length:T[0].length});return E}function m(_){const v=f(p.NUMERIC,e.NUMERIC,_),g=f(p.ALPHANUMERIC,e.ALPHANUMERIC,_);let E,T;return n.isKanjiModeEnabled()?(E=f(p.BYTE,e.BYTE,_),T=f(p.KANJI,e.KANJI,_)):(E=f(p.BYTE_KANJI,e.BYTE,_),T=[]),v.concat(g,E,T).sort(function(h,A){return h.index-A.index}).map(function(h){return{data:h.data,mode:h.mode,length:h.length}})}function y(_,v){switch(v){case e.NUMERIC:return r.getBitsLength(_);case e.ALPHANUMERIC:return i.getBitsLength(_);case e.KANJI:return l.getBitsLength(_);case e.BYTE:return o.getBitsLength(_)}}function C(_){return _.reduce(function(v,g){const E=v.length-1>=0?v[v.length-1]:null;return E&&E.mode===g.mode?(v[v.length-1].data+=g.data,v):(v.push(g),v)},[])}function b(_){const v=[];for(let g=0;g<_.length;g++){const E=_[g];switch(E.mode){case e.NUMERIC:v.push([E,{data:E.data,mode:e.ALPHANUMERIC,length:E.length},{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.ALPHANUMERIC:v.push([E,{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.KANJI:v.push([E,{data:E.data,mode:e.BYTE,length:c(E.data)}]);break;case e.BYTE:v.push([{data:E.data,mode:e.BYTE,length:c(E.data)}])}}return v}function S(_,v){const g={},E={start:{}};let T=["start"];for(let R=0;R<_.length;R++){const h=_[R],A=[];for(let x=0;x<h.length;x++){const O=h[x],H=""+R+x;A.push(H),g[H]={node:O,lastCount:0},E[H]={};for(let N=0;N<T.length;N++){const B=T[N];g[B]&&g[B].node.mode===O.mode?(E[B][H]=y(g[B].lastCount+O.length,O.mode)-y(g[B].lastCount,O.mode),g[B].lastCount+=O.length):(g[B]&&(g[B].lastCount=O.length),E[B][H]=y(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,v))}}T=A}for(let R=0;R<T.length;R++)E[T[R]].end=0;return{map:E,table:g}}function u(_,v){let g;const E=e.getBestModeForData(_);if(g=e.from(v,E),g!==e.BYTE&&g.bit<E.bit)throw new Error('"'+_+'" cannot be encoded with mode '+e.toString(g)+`.
 Suggested mode is: `+e.toString(E));switch(g===e.KANJI&&!n.isKanjiModeEnabled()&&(g=e.BYTE),g){case e.NUMERIC:return new r(_);case e.ALPHANUMERIC:return new i(_);case e.KANJI:return new l(_);case e.BYTE:return new o(_)}}t.fromArray=function(v){return v.reduce(function(g,E){return typeof E=="string"?g.push(u(E,null)):E.data&&g.push(u(E.data,E.mode)),g},[])},t.fromString=function(v,g){const E=m(v,n.isKanjiModeEnabled()),T=b(E),R=S(T,g),h=s.find_path(R.map,"start","end"),A=[];for(let x=1;x<h.length-1;x++)A.push(R.table[h[x]].node);return t.fromArray(C(A))},t.rawSplit=function(v){return t.fromArray(m(v,n.isKanjiModeEnabled()))}})(Qf);const Us=xt,No=$s,VS=ES,qS=wS,KS=Wf,GS=zf,Aa=Vf,ka=Fs,YS=AS,ws=Gf,JS=Jf,XS=Ur,Ho=Qf;function QS(t,e){const r=t.size,i=GS.getPositions(e);for(let o=0;o<i.length;o++){const l=i[o][0],p=i[o][1];for(let n=-1;n<=7;n++)if(!(l+n<=-1||r<=l+n))for(let s=-1;s<=7;s++)p+s<=-1||r<=p+s||(n>=0&&n<=6&&(s===0||s===6)||s>=0&&s<=6&&(n===0||n===6)||n>=2&&n<=4&&s>=2&&s<=4?t.set(l+n,p+s,!0,!0):t.set(l+n,p+s,!1,!0))}}function ZS(t){const e=t.size;for(let r=8;r<e-8;r++){const i=r%2===0;t.set(r,6,i,!0),t.set(6,r,i,!0)}}function eb(t,e){const r=KS.getPositions(e);for(let i=0;i<r.length;i++){const o=r[i][0],l=r[i][1];for(let p=-2;p<=2;p++)for(let n=-2;n<=2;n++)p===-2||p===2||n===-2||n===2||p===0&&n===0?t.set(o+p,l+n,!0,!0):t.set(o+p,l+n,!1,!0)}}function tb(t,e){const r=t.size,i=ws.getEncodedBits(e);let o,l,p;for(let n=0;n<18;n++)o=Math.floor(n/3),l=n%3+r-8-3,p=(i>>n&1)===1,t.set(o,l,p,!0),t.set(l,o,p,!0)}function $o(t,e,r){const i=t.size,o=JS.getEncodedBits(e,r);let l,p;for(l=0;l<15;l++)p=(o>>l&1)===1,l<6?t.set(l,8,p,!0):l<8?t.set(l+1,8,p,!0):t.set(i-15+l,8,p,!0),l<8?t.set(8,i-l-1,p,!0):l<9?t.set(8,15-l-1+1,p,!0):t.set(8,15-l-1,p,!0);t.set(i-8,8,1,!0)}function rb(t,e){const r=t.size;let i=-1,o=r-1,l=7,p=0;for(let n=r-1;n>0;n-=2)for(n===6&&n--;;){for(let s=0;s<2;s++)if(!t.isReserved(o,n-s)){let c=!1;p<e.length&&(c=(e[p]>>>l&1)===1),t.set(o,n-s,c),l--,l===-1&&(p++,l=7)}if(o+=i,o<0||r<=o){o-=i,i=-i;break}}}function ib(t,e,r){const i=new VS;r.forEach(function(s){i.put(s.mode.bit,4),i.put(s.getLength(),XS.getCharCountIndicator(s.mode,t)),s.write(i)});const o=Us.getSymbolTotalCodewords(t),l=ka.getTotalCodewordsCount(t,e),p=(o-l)*8;for(i.getLengthInBits()+4<=p&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const n=(p-i.getLengthInBits())/8;for(let s=0;s<n;s++)i.put(s%2?17:236,8);return nb(i,t,e)}function nb(t,e,r){const i=Us.getSymbolTotalCodewords(e),o=ka.getTotalCodewordsCount(e,r),l=i-o,p=ka.getBlocksCount(e,r),n=i%p,s=p-n,c=Math.floor(i/p),f=Math.floor(l/p),m=f+1,y=c-f,C=new YS(y);let b=0;const S=new Array(p),u=new Array(p);let _=0;const v=new Uint8Array(t.buffer);for(let h=0;h<p;h++){const A=h<s?f:m;S[h]=v.slice(b,b+A),u[h]=C.encode(S[h]),b+=A,_=Math.max(_,A)}const g=new Uint8Array(i);let E=0,T,R;for(T=0;T<_;T++)for(R=0;R<p;R++)T<S[R].length&&(g[E++]=S[R][T]);for(T=0;T<y;T++)for(R=0;R<p;R++)g[E++]=u[R][T];return g}function sb(t,e,r,i){let o;if(Array.isArray(t))o=Ho.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const f=Ho.rawSplit(t);c=ws.getBestVersionForData(f,r)}o=Ho.fromString(t,c||40)}else throw new Error("Invalid data");const l=ws.getBestVersionForData(o,r);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=l;else if(e<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const p=ib(e,r,o),n=Us.getSymbolSize(e),s=new qS(n);return QS(s,e),ZS(s),eb(s,e),$o(s,r,0),e>=7&&tb(s,e),rb(s,p),isNaN(i)&&(i=Aa.getBestMask(s,$o.bind(null,s,r))),Aa.applyMask(i,s),$o(s,r,i),{modules:s,version:e,errorCorrectionLevel:r,maskPattern:i,segments:o}}jf.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let i=No.M,o,l;return typeof r<"u"&&(i=No.from(r.errorCorrectionLevel,No.M),o=ws.from(r.version),l=Aa.from(r.maskPattern),r.toSJISFunc&&Us.setToSJISFunction(r.toSJISFunc)),sb(e,o,i,l)};var ed={},lc={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,p=i.scale||4;return{width:l,scale:l?4:p,margin:o,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},t.getImageWidth=function(i,o){const l=t.getScale(i,o);return Math.floor((i+o.margin*2)*l)},t.qrToImageData=function(i,o,l){const p=o.modules.size,n=o.modules.data,s=t.getScale(p,l),c=Math.floor((p+l.margin*2)*s),f=l.margin*s,m=[l.color.light,l.color.dark];for(let y=0;y<c;y++)for(let C=0;C<c;C++){let b=(y*c+C)*4,S=l.color.light;if(y>=f&&C>=f&&y<c-f&&C<c-f){const u=Math.floor((y-f)/s),_=Math.floor((C-f)/s);S=m[n[u*p+_]?1:0]}i[b++]=S.r,i[b++]=S.g,i[b++]=S.b,i[b]=S.a}}})(lc);(function(t){const e=lc;function r(o,l,p){o.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=p,l.width=p,l.style.height=p+"px",l.style.width=p+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,p,n){let s=n,c=p;typeof s>"u"&&(!p||!p.getContext)&&(s=p,p=void 0),p||(c=i()),s=e.getOptions(s);const f=e.getImageWidth(l.modules.size,s),m=c.getContext("2d"),y=m.createImageData(f,f);return e.qrToImageData(y.data,l,s),r(m,c,f),m.putImageData(y,0,0),c},t.renderToDataURL=function(l,p,n){let s=n;typeof s>"u"&&(!p||!p.getContext)&&(s=p,p=void 0),s||(s={});const c=t.render(l,p,s),f=s.type||"image/png",m=s.rendererOpts||{};return c.toDataURL(f,m.quality)}})(ed);var td={};const ob=lc;function nh(t,e){const r=t.a/255,i=e+'="'+t.hex+'"';return r<1?i+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function Fo(t,e,r){let i=t+e;return typeof r<"u"&&(i+=" "+r),i}function ab(t,e,r){let i="",o=0,l=!1,p=0;for(let n=0;n<t.length;n++){const s=Math.floor(n%e),c=Math.floor(n/e);!s&&!l&&(l=!0),t[n]?(p++,n>0&&s>0&&t[n-1]||(i+=l?Fo("M",s+r,.5+c+r):Fo("m",o,0),o=0,l=!1),s+1<e&&t[n+1]||(i+=Fo("h",p),p=0)):o++}return i}td.render=function(e,r,i){const o=ob.getOptions(r),l=e.modules.size,p=e.modules.data,n=l+o.margin*2,s=o.color.light.a?"<path "+nh(o.color.light,"fill")+' d="M0 0h'+n+"v"+n+'H0z"/>':"",c="<path "+nh(o.color.dark,"stroke")+' d="'+ab(p,l,o.margin)+'"/>',f='viewBox="0 0 '+n+" "+n+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+f+' shape-rendering="crispEdges">'+s+c+`</svg>
`;return typeof i=="function"&&i(null,y),y};const cb=bS,Ra=jf,rd=ed,lb=td;function hc(t,e,r,i,o){const l=[].slice.call(arguments,1),p=l.length,n=typeof l[p-1]=="function";if(!n&&!cb())throw new Error("Callback required as last argument");if(n){if(p<2)throw new Error("Too few arguments provided");p===2?(o=r,r=e,e=i=void 0):p===3&&(e.getContext&&typeof o>"u"?(o=i,i=void 0):(o=i,i=r,r=e,e=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(r=e,e=i=void 0):p===2&&!e.getContext&&(i=r,r=e,e=void 0),new Promise(function(s,c){try{const f=Ra.create(r,i);s(t(f,e,i))}catch(f){c(f)}})}try{const s=Ra.create(r,i);o(null,t(s,e,i))}catch(s){o(s)}}Tn.create=Ra.create;Tn.toCanvas=hc.bind(null,rd.render);Tn.toDataURL=hc.bind(null,rd.renderToDataURL);Tn.toString=hc.bind(null,function(t,e,r){return lb.render(t,r)});const hb=()=>{Kl.addEventListener("shown.bs.tooltip",()=>{let t=new URL("./",window.location.href)+"?peer=<br/>"+If.value;Tn.toCanvas(document.querySelector("#qr"),t,{errorCorrectionLevel:"H"}).then(e=>{document.querySelector("#qrURL").innerHTML=Li(t)}).catch(e=>{console.error(e)})}),Kl.addEventListener("click",()=>{document.querySelector("#qr").toBlob(t=>{navigator.clipboard.write([new ClipboardItem({[t.type]:t})])})})};function ub(t,e){Vy.addEventListener("click",()=>{localStorage.removeItem("myPeerID"),t.close(),e()}),qy.addEventListener("click",()=>{t.runMPyCDemo(!1)}),Ky.addEventListener("click",()=>t.runMPyCDemo(!0)),Gy.addEventListener("click",e),Yy.addEventListener("click",()=>{localStorage.setItem("hostPeerID",Do.value),t.connectToPeer(Do.value)}),Jy.addEventListener("click",()=>{th(t)});var o=new URLSearchParams(window.location.search).get("peer")||localStorage.getItem("hostPeerID");o&&(Do.value=o,localStorage.setItem("hostPeerID",o)),Fy("#myPeerID","button#copyPeerID"),Ca.addEventListener("keypress",function(n){let s=n;if(s.key==="Enter"&&!s.shiftKey)return s.preventDefault(),th(t)});var l=lr.Default.allowList;l.span=["style"],l.canvas=[],document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(n=>new lr(n)),hb()}var St=uc();ub(St,uc);function uc(){return St&&St.close(),St=new N_(localStorage.getItem("myPeerID"),"config.toml"),St.onPeerConnectedHook=yS,St.onPeerDisconnectedHook=SS,St.onPeerJSUserDataReceivedHook=vS,St.onPeerIDReadyHook=t=>{If.value=Li(t),localStorage.setItem("myPeerID",t),console.log("My peer ID is: "+t)},Ir.writeln("Loading PyScript runtime..."),St.onRuntimeReadyHook=()=>{Ir.writeln("PyScript runtime ready.")},St.onPyScriptDisplayHook=t=>{Ir.writeln(t)},document.mpyc=St,document.r=uc,document.run=()=>St.runMPyCDemo(!1),document.runa=()=>St.runMPyCDemo(!0),St}
